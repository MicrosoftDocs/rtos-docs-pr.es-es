---
title: 'Capítulo 1: Introducción al servidor DHCPv6 de Azure RTOS NetX Duo'
description: En este documento se explica con detalle cómo el servidor DHCPv6 de NetX Duo asigna direcciones IPv6 a clientes DHCPv6.
author: philmea
ms.author: philmea
ms.date: 06/08/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 6cf7baa91b1804876b97b1d75d1872d1120ad028
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/22/2021
ms.locfileid: "104814749"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-duo-dhcpv6-server"></a><span data-ttu-id="2fc1a-103">Capítulo 1: Introducción al servidor DHCPv6 de Azure RTOS NetX Duo</span><span class="sxs-lookup"><span data-stu-id="2fc1a-103">Chapter 1 - Introduction to Azure RTOS NetX Duo DHCPv6 server</span></span>

<span data-ttu-id="2fc1a-104">En redes IPv6, DHCPv6 es necesario para que los clientes obtengan direcciones IPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-104">In IPv6 networks, DHCPv6is required for Clients to obtain IPv6 addresses.</span></span> <span data-ttu-id="2fc1a-105">No sustituye al DHCP, que está limitado a IPv4, ya que no ofrece direcciones IPv4.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-105">It does not replace DHCP which is limited to IPv4in that it does not offer IPv4 addresses.</span></span> <span data-ttu-id="2fc1a-106">DHCPv6 tiene características similares a DHCP y muchas mejoras.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-106">DHCPv6 has similar features to DHCP as well as many enhancements.</span></span> <span data-ttu-id="2fc1a-107">Un cliente que no puede usar la configuración automática de direcciones sin estado IPv6 puede usar DHCPv6 para que se le asigne una dirección IPv6 global única desde un servidor DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-107">A Client who does not or cannot use IPv6 stateless address auto-configuration can use DHCPv6 to be assigned a unique global IPv6 address from a DHCPv6 Server.</span></span>

<span data-ttu-id="2fc1a-108">NetX Duo se desarrolló para admitir aplicaciones basadas en red IPv6 y protocolos de red como DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-108">NetX Duo was developed to support IPv6 network based applications and network protocols such as DHCPv6.</span></span> <span data-ttu-id="2fc1a-109">En este documento se explica con detalle cómo el servidor DHCPv6 de NetX Duo asigna direcciones IPv6 a clientes DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-109">This document will explain in detail how the NetX Duo DHCPv6 Server assigns IPv6 addresses to DHCPv6 Clients.</span></span>

## <a name="dhcpv6-communication"></a><span data-ttu-id="2fc1a-110">Comunicación de DHCPv6</span><span class="sxs-lookup"><span data-stu-id="2fc1a-110">DHCPv6 Communication</span></span>

<span data-ttu-id="2fc1a-111">**Estructura de los mensajes DHCPv6**</span><span class="sxs-lookup"><span data-stu-id="2fc1a-111">**DHCPv6 Message structure**</span></span>

<span data-ttu-id="2fc1a-112">El contenido de los mensajes es básicamente un encabezado seguido de uno o varios (normalmente más) bloques de opciones.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-112">Message content is basically a message header followed by one or more (usually more) option blocks.</span></span> <span data-ttu-id="2fc1a-113">A continuación se muestra la estructura básica donde cada bloque representa un byte:</span><span class="sxs-lookup"><span data-stu-id="2fc1a-113">Below is the basic structure where each block represents one byte:</span></span>

![Diagrama que muestra la estructura de bloques de opciones y mensajes DHCPv6.](media/image2.jpg)

<span data-ttu-id="2fc1a-115">**Figura 1. Estructura de bloques de opciones y mensajes DHCPv6**</span><span class="sxs-lookup"><span data-stu-id="2fc1a-115">**Figure 1. DHCPv6 message and option block structure**</span></span>

<span data-ttu-id="2fc1a-116">El campo Msg-Type de 1 byte indica el tipo de mensaje DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-116">The 1-byte Msg-Type field indicates the type of DHCPv6 message.</span></span> <span data-ttu-id="2fc1a-117">El campo Transaction-ID de 3 bytes lo establece el cliente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-117">The 3-byte Transaction-ID field is set by the Client.</span></span> <span data-ttu-id="2fc1a-118">Puede ser cualquier secuencia de caracteres, pero debe ser única para cada mensaje del cliente al servidor (se conserva en los mensajes duplicados enviados por el cliente).</span><span class="sxs-lookup"><span data-stu-id="2fc1a-118">It can by any sequence of characters but must be unique for each Client message to the Server (conserved across duplicate messages sent by the Client).</span></span> <span data-ttu-id="2fc1a-119">El servidor utiliza ese campo Transaction-ID para cada respuesta al cliente con el fin de permitir que el cliente coteje los mensajes del servidor en caso de que se retrasen o quiten paquetes de la red.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-119">The Server uses that Transaction-ID for each response to the Client to enable the Client to match up Server messages in the event of packets that are delayed or dropped on the network.</span></span> <span data-ttu-id="2fc1a-120">Después del campo Transaction-ID, se usan una o varias opciones de DHCPv6 para indicar lo que el cliente está solicitando.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-120">Following the Transaction-ID field, are one or more DHCPv6 options used to indicate what the Client is requesting.</span></span>

<span data-ttu-id="2fc1a-121">La estructura de la opción DHCPv6 está formada por un código de opción, un campo de longitud de opción, que no incluye los campos de longitud o de código y, por último, los datos de opciones, que son uno o más campos de códigos de opción de 2 bytes correspondientes a los datos que el cliente solicita.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-121">The DHCPv6 option structure is composed of an option code, an option length field, which does not include the length or code fields, and finally the option data itself which is one or more 2 byte option code fields for the data the Client is requesting.</span></span>

<span data-ttu-id="2fc1a-122">Algunos bloques de opciones tienen opciones anidadas.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-122">Some option blocks have nested options.</span></span> <span data-ttu-id="2fc1a-123">Por ejemplo, una opción de *asociación de identidades de direcciones no temporales (IANA)* contiene una o más opciones de *asociación de identidades (IA)* para solicitar direcciones IPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-123">For example, an *Identity Association for Non Temporary Address (IANA)* option contains one or more *Identity Association (IA)* options to request IPv6 addresses.</span></span> <span data-ttu-id="2fc1a-124">La opción de *IANA* devuelta en el mensaje de respuesta del servidor contiene las mismas opciones de *IA* con la dirección IPv6 y los tiempos de concesión concedidos por el servidor, así como una opción *Status* (Estado) que indica si hay un error en la solicitud de la dirección del cliente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-124">The *IANA* option returned in the Server Reply message contains the same *IA* option(s) with the IPv6 address and lease times granted by the Server, as well as a *Status* option indicating if there is an error with the Client address request.</span></span>

<span data-ttu-id="2fc1a-125">En el **Apéndice A** se proporciona una lista de todos los bloques de opciones con su descripción.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-125">A list of all option blocks and their description is provided in **Appendix A**.</span></span>

<span data-ttu-id="2fc1a-126">**Tipos de mensajes DHCPv6**</span><span class="sxs-lookup"><span data-stu-id="2fc1a-126">**DHCPv6 Message Types**</span></span>

<span data-ttu-id="2fc1a-127">Aunque DHCPv6 mejora en gran medida la funcionalidad de DHCP, usa el mismo número de mensajes que DHCP y admite las mismas opciones de proveedor que DHCP.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-127">Although DHCPv6 greatly enhances the functionality of DHCP, it uses the same number of messages as DHCP and supports the same vendor options as DHCP.</span></span> <span data-ttu-id="2fc1a-128">La lista de mensajes DHCPv6 es la siguiente:</span><span class="sxs-lookup"><span data-stu-id="2fc1a-128">The list of DHCPv6 messages are as follows:</span></span>

- <span data-ttu-id="2fc1a-129">SOLICIT (1) (enviado por el cliente)</span><span class="sxs-lookup"><span data-stu-id="2fc1a-129">SOLICT (1) (sent by Client)</span></span>
- <span data-ttu-id="2fc1a-130">ADVERTISE (2) (enviado por el servidor)</span><span class="sxs-lookup"><span data-stu-id="2fc1a-130">ADVERTISE (2) (sent by Server)</span></span>
- <span data-ttu-id="2fc1a-131">REQUEST (3) (enviada por el cliente)</span><span class="sxs-lookup"><span data-stu-id="2fc1a-131">REQUEST (3) (sent by Client)</span></span>
- <span data-ttu-id="2fc1a-132">REPLY (7) (enviada por el servidor)</span><span class="sxs-lookup"><span data-stu-id="2fc1a-132">REPLY (7) (sent by Server)</span></span>
- <span data-ttu-id="2fc1a-133">CONFIRM (4) (enviado por el cliente)</span><span class="sxs-lookup"><span data-stu-id="2fc1a-133">CONFIRM (4) (sent by Client)</span></span>
- <span data-ttu-id="2fc1a-134">RENEW (5) (enviado por el cliente)</span><span class="sxs-lookup"><span data-stu-id="2fc1a-134">RENEW (5) (sent by Client)</span></span>
- <span data-ttu-id="2fc1a-135">REBIND (6) (enviado por el cliente)</span><span class="sxs-lookup"><span data-stu-id="2fc1a-135">REBIND (6) (sent by Client)</span></span>
- <span data-ttu-id="2fc1a-136">RELEASE (8) (enviada por el cliente)</span><span class="sxs-lookup"><span data-stu-id="2fc1a-136">RELEASE (8) (sent by Client)</span></span>
- <span data-ttu-id="2fc1a-137">DECLINE (9) (enviado por el cliente)</span><span class="sxs-lookup"><span data-stu-id="2fc1a-137">DECLINE (9) (sent by Client)</span></span>
- <span data-ttu-id="2fc1a-138">INFORM_REQUEST (11) (enviado por el cliente)</span><span class="sxs-lookup"><span data-stu-id="2fc1a-138">INFORM_REQUEST (11) (sent by Client)</span></span>
- <span data-ttu-id="2fc1a-139">RECONFIGURE\* (10) (enviado por el servidor)</span><span class="sxs-lookup"><span data-stu-id="2fc1a-139">RECONFIGURE\* (10) (sent by Server)</span></span>

<span data-ttu-id="2fc1a-140">\* El servidor DHCPv6 de NetX Duo no admite RECONFIGURE.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-140">\*RECONFIGURE is not supported by the NetX Duo DHCPv6 Server.</span></span>

<span data-ttu-id="2fc1a-141">La secuencia de solicitud DHCPv6 básica, con el tipo de mensaje DHCPv4 equivalente entre paréntesis, es la siguiente:</span><span class="sxs-lookup"><span data-stu-id="2fc1a-141">The basic DHCPv6 request sequence, with the equivalent DHCPv4 message type in parenthesis, is as follows:</span></span>

<span data-ttu-id="2fc1a-142">Client ***Solicit** _ (_Discovery *) Server **Advertisement** (* Offer *) Client **Request** (* Request *) Server **Reply** (* DHCPAck*)</span><span class="sxs-lookup"><span data-stu-id="2fc1a-142">Client ***Solicit** _ (_Discovery *) Server **Advertisement** (* Offer *) Client **Request** (* Request *) Server **Reply** (* DHCPAck*)</span></span>

<span data-ttu-id="2fc1a-143">Client **Renew**(same) Server **Reply** (*DHCPAck*)</span><span class="sxs-lookup"><span data-stu-id="2fc1a-143">Client **Renew**(same) Server **Reply** (*DHCPAck*)</span></span>

## <a name="dhcpv6-message-validation"></a><span data-ttu-id="2fc1a-144">Validación de mensajes DHCPv6</span><span class="sxs-lookup"><span data-stu-id="2fc1a-144">DHCPv6 Message Validation</span></span>

<span data-ttu-id="2fc1a-145">Identificador de transacción: el cliente debe generar un identificador de transacción para cada mensaje que envía al servidor.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-145">Transaction ID: The Client must generate a transaction ID for each message it sends to the Server.</span></span> <span data-ttu-id="2fc1a-146">El servidor DHCPv6 rechazará cualquier mensaje del cliente que no coincida con este identificador de transacción.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-146">The DHCPv6 Server will reject any message from the Client not matching this transaction ID.</span></span> <span data-ttu-id="2fc1a-147">A su vez, el servidor debe usar el mismo identificador de transacción en sus respuestas al cliente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-147">The Server in turn must use the same transaction ID in its responses back to the Client.</span></span>

<span data-ttu-id="2fc1a-148">**Identificadores únicos DHCPv6 (DUID)**</span><span class="sxs-lookup"><span data-stu-id="2fc1a-148">**DHCPv6 unique Identifiers (DUIDs)**</span></span>

<span data-ttu-id="2fc1a-149">Todos los mensajes del servidor también deben incluir un identificador único de DHCPv6 (DUID) en cada mensaje, o el cliente DHCPv6 no debería aceptar el mensaje.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-149">All Server messages must also include a DHCPv6 unique Identifier (DUID) in each message or the DHCPv6 Client should not accept the message.</span></span> <span data-ttu-id="2fc1a-150">Un DUID de nivel de vínculo (LL) es un bloque de control que contiene la dirección MAC del cliente, el tipo de hardware y el tipo de DUID.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-150">A Link Layer (LL) DUID is a control block containing client MAC address, hardware type, and DUID type.</span></span> <span data-ttu-id="2fc1a-151">Un DUID de tiempo de nivel de vínculo (LLT) también contiene un campo de tiempo que reduce las probabilidades de que el DUID no sea único en la red del host.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-151">A Link Layer Time (LLT) DUID additionally contains a time field which decreases the chances the DUID will not be unique on the host network.</span></span> <span data-ttu-id="2fc1a-152">Por ese motivo, RFC 3315 recomienda LLT DUID en lugar de LL DUID.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-152">For that reason RFC 3315 recommends LLT DUIDs over LL DUIDs.</span></span> <span data-ttu-id="2fc1a-153">Si la aplicación host no crea su propio valor de tiempo único, el servidor DHCPv6 de NetX Duo proporcionará uno predeterminado.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-153">If the host application does not create its own unique time value, NetX Duo DHCPv6 will provide a default one.</span></span> <span data-ttu-id="2fc1a-154">El tercer tipo de DUID es el DUID de empresa (asignado por el proveedor) que contiene un identificador de empresa registrado (como el registrado en IANA) y datos privados que son variables de tipo y longitud; por ejemplo, según el tamaño de la memoria o el tipo de sistema operativo de otra configuración de hardware.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-154">The third type of DUID is the Enterprise (Vendor assigned) DUID which contains a registered Enterprise ID (as in registered with IANA) and private data that is variable in type and length e.g. based on memory size, operating system type of other hardware configuration.</span></span> <span data-ttu-id="2fc1a-155">Consulte la lista de opciones de configuración en otra sección de este documento para configurar los valores de identificador privado y asignado por el proveedor del servidor.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-155">See the list of Configuration Options elsewhere in this document for setting up the Server vendor assigned and private ID values.</span></span>

<span data-ttu-id="2fc1a-156">El cliente también debe incluir su DUID en sus mensajes al servidor, excepto INFORM_REQUEST; de lo contrario, el servidor los rechazará.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-156">The Client must also include its DUID in its messages to the Server except for INFORM_REQUEST, or the Server will reject them.</span></span>

<span data-ttu-id="2fc1a-157">**Sesiones de clientes y servidores DHCPv6**</span><span class="sxs-lookup"><span data-stu-id="2fc1a-157">**DHCPv6 Client Server Sessions**</span></span>

<span data-ttu-id="2fc1a-158">Los clientes y servidores DHCPv6 intercambian mensajes a través de UDP.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-158">DHCPv6 Clients and Servers exchange messages over UDP.</span></span> <span data-ttu-id="2fc1a-159">El cliente utiliza el puerto 546 para enviar y recibir mensajes DHCPv6, mientras que el servidor usa el puerto 547.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-159">The Client uses port 546 to send and receive DHCPv6 messages and the Server uses port 547.</span></span> <span data-ttu-id="2fc1a-160">El cliente usa inicialmente su dirección local de vínculo para transmitir y recibir mensajes DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-160">The Client initially uses its link-local address for transmitting and receiving DHCPv6 messages.</span></span> <span data-ttu-id="2fc1a-161">Este envía todos los mensajes a los servidores DHCPv6 con una dirección de multidifusión reservada de ámbito de vínculo conocida como *dirección de multidifusión* *All_DHCP_Relay_Agents_and_Servers* (FF02::01:02).</span><span class="sxs-lookup"><span data-stu-id="2fc1a-161">It sends all messages to DHCPv6 servers using a reserved, link-scoped multicast address known as the *All_DHCP_Relay_Agents_and_Servers* multicast address *(FF02::01:02)*.</span></span>

<span data-ttu-id="2fc1a-162">Para las solicitudes de asignación de direcciones IPv6, el servidor DHCPv6 escucha los mensajes *Solicit* enviados a la dirección *All_DHCP_Relay_Agents_and_Servers*.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-162">ForIPv6 address assignment requests, the DHCPv6 Server listens for *Solicit* messages sent to the *All_DHCP_Relay_Agents_and_Servers* address.</span></span> <span data-ttu-id="2fc1a-163">En la solicitud *Solicit*, el cliente puede solicitar la asignación de una dirección IPv6 específica o dejar que el servidor elija una.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-163">In the *Solicit* request, the Client can request the assignment of specific IPv6 address or let the Server choose one.</span></span> <span data-ttu-id="2fc1a-164">También puede solicitar otra información de configuración de red del servidor.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-164">It can also request other network configuration information from the Server.</span></span>

<span data-ttu-id="2fc1a-165">Si el servidor DHCPv6 extrae un mensaje *Solicit* válido y puede asignar una dirección IPv6 al cliente, responde con un mensaje *Advertise* que contiene la dirección IPv6 que se va a conceder al cliente, el tiempo de concesión de la dirección IPv6 y cualquier información adicional solicitada por el cliente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-165">If the DHCPv6Server extracts a valid *Solicit* message and can assign an IPv6 address to the Client, it responds with an *Advertise* message containing the IPv6 address it will grant to the Client, the IPv6 address lease time and any additional information requested by the Client.</span></span> <span data-ttu-id="2fc1a-166">Si el cliente acepta la oferta del servidor, responde con un mensaje *Request* que permite al servidor saber que aceptará la dirección IPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-166">If the Client accepts the Server offer it responds with a *Request* message letting the Server know it will accept the IPv6 address.</span></span> <span data-ttu-id="2fc1a-167">El servidor confirma que el cliente está enlazado a la dirección IPv6 con un mensaje *Reply*.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-167">The Server confirms the Client is bound to the IPv6 address with a *Reply* message.</span></span>

<span data-ttu-id="2fc1a-168">Si el mensaje DHCPv6 del cliente no es válido, el servidor descartará el mensaje de forma silenciosa.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-168">If the Client DHCPv6 message is invalid, the Server will discard the message silently.</span></span> <span data-ttu-id="2fc1a-169">Si el servidor no puede conceder la solicitud, enviará un mensaje *Reply* con una indicación del problema en el campo Status (Estado) de la opción de IANA de la dirección IP.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-169">If the Server is unable to grant the request it will send a *Reply* message with an indication of the problem in the status field of the IP address IANA option.</span></span> <span data-ttu-id="2fc1a-170">Si se reciben solicitudes de cliente duplicadas, el servidor vuelve a enviar su respuesta DHCPv6 anterior, dando por hecho que el cliente no haya recibido el paquete.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-170">If duplicate Client requests are received the Server resends its previous DHCPv6 response, assuming the Client simply did not receive the packet.</span></span>

<span data-ttu-id="2fc1a-171">Es el cliente quien comprueba que su dirección IPv6 asignada desde el servidor no está asignada a otro host del sistema mediante el uso de varios protocolos IPv6, como el de detección de direcciones duplicadas.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-171">It is up to the Client to verify that its assigned IPv6 address from the Server is not assigned to another host on the system by using various IPv6 protocols such as Duplicate Address Detection.</span></span> <span data-ttu-id="2fc1a-172">Si la dirección no es única, el cliente enviará un mensaje *Decline* al servidor.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-172">If the address is not unique, the Client will send the Server a *Decline* message.</span></span> <span data-ttu-id="2fc1a-173">El servidor actualiza su tabla de concesión de direcciones IP con esta información, registrando que la dirección ya está asignada.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-173">The Server updates its IP lease table with this information, recording that the address is already assigned.</span></span> <span data-ttu-id="2fc1a-174">Mientras tanto, el cliente debe reiniciar el proceso de solicitud DHCPv6 con otro mensaje *Solicit*.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-174">Meanwhile the Client must restart the DHCPv6 request process with another *Solicit* message.</span></span>

<span data-ttu-id="2fc1a-175">Además de una dirección IPv6, es probable que un cliente también tenga que conocer el servidor DNS y, posiblemente, otra información de red, como el nombre de dominio de red.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-175">In addition to an IPv6 address, a Client will likely also need to know the DNS server and possibly other network information such as the network domain name.</span></span> <span data-ttu-id="2fc1a-176">DHCPv6 proporciona los medios para solicitar esta información mediante el uso de solicitudes de opciones en los mensajes *Solicit* y *Request*, o bien por separado en mensajes *INFORM_REQUEST*.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-176">DHCPv6 provides the means to request this information using either the use of Option Requests in the *Solicit* and *Request* messages, or separately in *Information Request* messages.</span></span> <span data-ttu-id="2fc1a-177">Las opciones de DHCPv6 se explican más adelante en este capítulo.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-177">DHCPv6 options are explained later in this chapter.</span></span>

<span data-ttu-id="2fc1a-178">**Duración de la concesión de IPv6**</span><span class="sxs-lookup"><span data-stu-id="2fc1a-178">**IPv6 Lease Duration**</span></span>

<span data-ttu-id="2fc1a-179">Cuando el servidor concede una dirección IPv6 a un cliente, también asigna la duración de la concesión (vigencia) en la opción de IANA para cuando recomiende al cliente que empiece a renovar (T1) o reenlazar (T2) su dirección IPv6 utilizando los mensajes *Renew* y *Rebind*.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-179">When the Server grants an IPv6 address to a Client, it also assigns the lease duration (lifetime)in the IANA option for when it recommends the Client to start renewing (T1) or rebinding (T2) its IPv6 address using *Renew* and *Rebind* messages.</span></span> <span data-ttu-id="2fc1a-180">La diferencia entre los dos es que el cliente dirige el mensaje *Renew* al servidor incluyendo el DUID del servidor en la solicitud *Renew*.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-180">The difference between the two is the Client directs the *Renew* message to the Server by including the Server DUID in the *Renew* request.</span></span> <span data-ttu-id="2fc1a-181">Sin embargo, no especifica ningún servidor y, por lo tanto, no incluye un DUID de servidor, en el mensaje *Rebind* a la dirección *All_DHCP_Relay_Agents_and_Servers*.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-181">However, it does not specify any server, and hence does not include a Server DUID, in the *Rebind* message to the *All_DHCP_Relay_Agents_and_Servers* address.</span></span> <span data-ttu-id="2fc1a-182">La opción de IA que contiene la dirección IPv6 real que el servidor concede al cliente también contiene las duraciones preferida y válida cuando la dirección IPv6 concedida está en desuso u obsoleta (no válida), respectivamente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-182">The IA option which contains the actual IPv6 address the Server grants the Client also contains the preferred and valid lifetimes when the leased IPv6 address becomes deprecated or obsolete (invalid), respectively.</span></span>

<span data-ttu-id="2fc1a-183">El servidor DHCPv6 de NetX Duo mantiene un tiempo de espera de la sesión para cada cliente con el fin de hacer un seguimiento del tiempo entre los mensajes del cliente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-183">The NetX Duo DHCPv6 Server maintains a session timeout for each Client to track the time between Client messages.</span></span> <span data-ttu-id="2fc1a-184">Esto es necesario en caso de que un host de cliente pierda conectividad o la red esté desactivada.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-184">This is necessary in the event of a Client host losing connectivity or the network doing down.</span></span> <span data-ttu-id="2fc1a-185">Cuando expira el tiempo de espera de la sesión, se supone que el cliente ya no está interesado o puede realizar solicitudes DHCPv6 del servidor.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-185">When the session timeout expires, it is assumed the Client is either no longer interested or able to make DHCPv6 requests of the Server.</span></span> <span data-ttu-id="2fc1a-186">El servidor elimina el registro del cliente y devuelve cualquier dirección IPv6 asignada provisionalmente al grupo disponible.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-186">The Server deletes the Client record and returns any tentatively assigned IPv6 address back to the available pool.</span></span> <span data-ttu-id="2fc1a-187">El tiempo de espera de la sesión es una opción configurable por el usuario.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-187">The session timeout wait is a user configurable option.</span></span>

<span data-ttu-id="2fc1a-188">Si el cliente desea liberar su dirección IPv6 o detecta que la dirección IPv6 asignada por el servidor DHCPv6 ya está en uso, envía un mensaje *Release* o *Decline*, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-188">If the Client wishes to release its IPv6 address, or discovers that the IPv6 address assigned to it by the DHCPv6 Server is already in use, it send a *Release* or *Decline* message respectively.</span></span> <span data-ttu-id="2fc1a-189">En el caso de un mensaje *Release*, el servidor devuelve el estado de la dirección IPv6 al grupo disponible.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-189">In the case of a *Release* message, the Server returns that IPv6 address status back to the available pool.</span></span> <span data-ttu-id="2fc1a-190">En el caso del mensaje *Decline*, actualiza su tabla de concesión de direcciones IP para indicar que esta dirección IPv6 no está disponible (es propiedad de otra entidad en otra parte de la red).</span><span class="sxs-lookup"><span data-stu-id="2fc1a-190">In the case of the *Decline* message, it updates its IP lease table to indicate this IPv6 address is not available (owned by another entity elsewhere on the network).</span></span>

<span data-ttu-id="2fc1a-191">**Concesión de direcciones IPv6 y datos de registros del cliente**</span><span class="sxs-lookup"><span data-stu-id="2fc1a-191">**IPv6 Lease and Client Record Data**</span></span>

<span data-ttu-id="2fc1a-192">Cuando el servidor DHCPv6 comienza a aceptar solicitudes del cliente, mantiene una lista de clientes activos que envían solicitudes o a los que se les ha asignado direcciones IPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-192">When the DHCPv6 Server starts accepting Client requests it maintains a list of active Clients who are requesting or have been assigned IPv6 addresses.</span></span> <span data-ttu-id="2fc1a-193">El servidor comprueba la expiración de la concesión de dirección IP por medio de un temporizador de concesión que actualiza periódicamente la duración de la concesión del cliente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-193">The Server checks for IP lease expiration by means of a lease timer that periodically updates the Client lease duration.</span></span> <span data-ttu-id="2fc1a-194">Cuando la duración supera la duración válida, el servidor borra el registro del cliente y devuelve su dirección IPv6 al grupo disponible.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-194">When the duration exceeds the valid lifetime, the Server clears the Client record and returns its IPv6 address back to the available pool.</span></span> <span data-ttu-id="2fc1a-195">El cliente debe iniciar el proceso de renovación y reenlace antes de que esto suceda.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-195">It is up to the Client to start the renewal/rebinding process before this happens!</span></span>

<span data-ttu-id="2fc1a-196">La tabla de registros de clientes y servidores DHCPv6 de NetX Duo contiene información para identificar a los clientes e información de "estado" para validar las solicitudes del cliente DHCPv6 y asignar o volver a asignar las direcciones IPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-196">The NetX Duo DHCPv6 Server client record table contains information to identify Clients, and ‘state’ information for validating DHCPv6 Client requests and assigning or re-assigning IPv6 addresses.</span></span> <span data-ttu-id="2fc1a-197">Esta información incluye lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="2fc1a-197">Such information includes:</span></span>

- <span data-ttu-id="2fc1a-198">El identificador único de DHCPv6 del cliente (DUID) que define de forma única cada host de cliente en una red.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-198">The Client DHCPv6 Unique Identifier (DUID) which uniquely defines each Client host on a network.</span></span> <span data-ttu-id="2fc1a-199">El cliente siempre debe usar este mismo DUID para todos sus mensajes DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-199">The Client must always use this same DUID for all its DHCPv6 messages.</span></span>

- <span data-ttu-id="2fc1a-200">Las direcciones IPv6 acumulativas de la asociación de identidades de direcciones no temporales (IANA) y la asociación de identidades (IA) del cliente, que definen los parámetros de asignación de direcciones IPv6 del cliente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-200">The Client Identity Association for Non Temporary Addresses (IANA) and Identity Association IPv6 address (IA) cumulatively which define the Client IPv6 address assignment parameters.</span></span>

- <span data-ttu-id="2fc1a-201">Solicitudes de opciones del cliente (servidor DNS, nombre de dominio, etc.).</span><span class="sxs-lookup"><span data-stu-id="2fc1a-201">Client option requests (DNS server, domain name, etc).</span></span>

- <span data-ttu-id="2fc1a-202">La dirección de origen IPv6 del cliente (si se establece) y la dirección de destino (si no es de multidifusión) de la solicitud DHCPv6 más reciente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-202">The Client IPv6 source address (if set) and destination address (if not multicast) of its most recent DHCPv6 request.</span></span>

- <span data-ttu-id="2fc1a-203">El tipo de mensaje más reciente del cliente y el "estado" de DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-203">The Client’s most recent message type and DHCPv6 ‘state’.</span></span>

## <a name="netx-duo-dhcpv6-server-requirements-and-constraints"></a><span data-ttu-id="2fc1a-204">Requisitos y restricciones del servidor DHCPv6 de NetX Duo</span><span class="sxs-lookup"><span data-stu-id="2fc1a-204">NetX Duo DHCPv6 Server Requirements and Constraints</span></span>

<span data-ttu-id="2fc1a-205">La API del servidor DHCPv6 de NetX Duo requiere ThreadX 5.1 o posterior y NetX Duo 5.5 o posterior.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-205">The NetX Duo DHCPv6 Server API requires ThreadX 5.1 or later, and NetX Duo 5.5 or later.</span></span>

<span data-ttu-id="2fc1a-206">**Requisitos**</span><span class="sxs-lookup"><span data-stu-id="2fc1a-206">**Requirements**</span></span>

<span data-ttu-id="2fc1a-207">***Configuración de tareas de subprocesos de direcciones IP***</span><span class="sxs-lookup"><span data-stu-id="2fc1a-207">***IP Thread Task Setup***</span></span>

<span data-ttu-id="2fc1a-208">El servidor DHCPv6 de NetX Duo requiere la creación de una instancia de IP para enviar y recibir mensajes a DHCPv6 en su vínculo de red.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-208">The NetX Duo DHCPv6 Server requires a creation of an IP instance for sending and receiving messages to DHCPv6 on its network link.</span></span> <span data-ttu-id="2fc1a-209">Esto se hace mediante el servicio *nx_ip_create*.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-209">This is done using the *nx_ip_create* service.</span></span> <span data-ttu-id="2fc1a-210">El servidor DHCPv6 de NetX Duo se debe crear.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-210">The NetX Duo DHCPv6 Server itself must be created.</span></span> <span data-ttu-id="2fc1a-211">Esto se hace mediante el servicio *nx_dhcpv6_server_create*.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-211">This is done using the *nx_dhcpv6_server_create* service.</span></span>

<span data-ttu-id="2fc1a-212">DHCPv6 emplea NetX Duo, ICMPv6 y UDP.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-212">DHCPv6 utilizes NetX Duo, ICMPv6 and UDP.</span></span> <span data-ttu-id="2fc1a-213">Por lo tanto, IPv6 primero debe estar habilitado antes de usar el servidor DHCPv6 mediante una llamada a los siguientes servicios de NetX Duo:</span><span class="sxs-lookup"><span data-stu-id="2fc1a-213">Therefore IPv6 must first be enabled prior to using DHCPv6 Server by calling the following NetX Duo services:</span></span>

- <span data-ttu-id="2fc1a-214">*nx_udp_enable*</span><span class="sxs-lookup"><span data-stu-id="2fc1a-214">*nx_udp_enable*</span></span>
- <span data-ttu-id="2fc1a-215">*nxd_ipv6_enable*</span><span class="sxs-lookup"><span data-stu-id="2fc1a-215">*nxd_ipv6_enable*</span></span>
- <span data-ttu-id="2fc1a-216">*nxd_icmp_enable*</span><span class="sxs-lookup"><span data-stu-id="2fc1a-216">*nxd_icmp_enable*</span></span>

<span data-ttu-id="2fc1a-217">Además, antes de que se pueda iniciar el servidor DHCPv6, tiene varias tareas de configuración que realizar:</span><span class="sxs-lookup"><span data-stu-id="2fc1a-217">Further, before the DHCPv6 Server can be started, it has a number of set up tasks to perform:</span></span>

- <span data-ttu-id="2fc1a-218">Crear y validar sus direcciones globales IPv6 y locales de vínculo.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-218">Create and validate its link local and IPv6 global addresses.</span></span> <span data-ttu-id="2fc1a-219">La validación de direcciones se realiza automáticamente mediante NetX Duo, que emplea el protocolo de detección de direcciones duplicadas si está habilitado.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-219">Address validation is performed automatically by NetX Duo using Duplicate Address Detection if it is enabled.</span></span> <span data-ttu-id="2fc1a-220">Vea el *manual del usuario de NetX Duo* para obtener más información sobre la validación de direcciones IP globales y locales de vínculo.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-220">See the *NetX Duo User Manual* for details on link local and global IP address validation.</span></span>

- <span data-ttu-id="2fc1a-221">Establecer el índice de la interfaz de red para su interfaz DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-221">Set the network interface index for its DHCPv6 interface.</span></span>

- <span data-ttu-id="2fc1a-222">Crear un intervalo de direcciones IP para direcciones IPv6 asignables.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-222">Create an IP address range for assignable IPv6 addresses.</span></span> <span data-ttu-id="2fc1a-223">O, si hay datos de una sesión anterior DHCPv6 del servidor, los registros de clientes y la tabla de concesión de IPv6 de esa sesión se deben cargar desde la memoria no volátil al servidor DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-223">Or, if data exists from a previous Server DHCPv6 session, IPv6 lease table and client records from that session must be uploaded from non volatile memory to the DHCPv6 Server.</span></span> <span data-ttu-id="2fc1a-224">En el sistema de ejemplo pequeño de este documento se mostrarán los servicios del servidor DHCPv6 para cumplir este requisito.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-224">The small example system elsewhere in this document will demonstrate the DHCPv6 Server services for accomplishing this requirement.</span></span>

- <span data-ttu-id="2fc1a-225">Establecer el DUID del servidor.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-225">Set the Server DUID.</span></span> <span data-ttu-id="2fc1a-226">Si el servidor ha creado su DUID en una sesión anterior, debe usar los mismos datos para crear el mismo DUID para los mensajes a sus clientes.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-226">If the Server has created its DUID in a previous session it must use the same data to create the same DUID for messages to its Clients.</span></span> <span data-ttu-id="2fc1a-227">En el sistema de ejemplo pequeño de este documento se muestra cómo se cumple este requisito.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-227">The small example system elsewhere in this document will demonstrate how this requirement is accomplished.</span></span>

<span data-ttu-id="2fc1a-228">En este punto, el servidor DHCPv6 está listo para ejecutarse.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-228">At this point the DHCPv6 Server is ready to run.</span></span> <span data-ttu-id="2fc1a-229">Internamente, el servidor DHCPv6 de NetX Duo creará un socket UDP enlazado al puerto 547 y comenzará a escuchar las solicitudes del cliente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-229">Internally the NetX Duo DHCPv6 Server will create a UDP socket bound to port 547, and starts listening for Client requests.</span></span>

<span data-ttu-id="2fc1a-230">***Requisitos de grupos de paquetes***</span><span class="sxs-lookup"><span data-stu-id="2fc1a-230">***Packet Pool Requirements***</span></span>

<span data-ttu-id="2fc1a-231">El servidor DHCPv6 de NetX Duo requiere un grupo de paquetes para enviar mensajes DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-231">NetX Duo DHCPv6 Server requires a packet pool for sending DHCPv6 messages.</span></span> <span data-ttu-id="2fc1a-232">El tamaño del grupo de paquetes en términos de carga de paquetes y el número de paquetes disponibles es configurable por el usuario, y depende del volumen previsto de mensajes DHCPv6 y otras transmisiones que va a enviar la aplicación host.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-232">The size of the packet pool in terms of packet payload and number of packets available is user configurable, and depends on the anticipated volume of DHCPv6 messages and other transmissions the host application will be sending.</span></span>

<span data-ttu-id="2fc1a-233">Un mensaje DHCPv6 típico tiene aproximadamente 200-300 bytes, según el número de opciones adicionales que solicite el cliente, y de la información disponible en el servidor.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-233">A typical DHCPv6 message is about 200-300 bytes depending on the number of additional options requested by the Client, and information available from the Server.</span></span>

<span data-ttu-id="2fc1a-234">***Configuración de la interfaz del servidor DHCPv6***</span><span class="sxs-lookup"><span data-stu-id="2fc1a-234">***Setting the DHCPv6 Server interface***</span></span>

<span data-ttu-id="2fc1a-235">El servidor DHCPv6 utiliza de forma predeterminada la interfaz de red principal como la interfaz en la que aceptará las solicitudes del cliente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-235">The DHCPv6 Server defaults to the primary network interface as the interface it will accept Client requests on.</span></span> <span data-ttu-id="2fc1a-236">Sin embargo, la aplicación host todavía debe establecer el índice de direcciones globales que se usó para crear la dirección global del servidor.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-236">However, the host application must still set the global address index which it used to create the Server global address.</span></span> <span data-ttu-id="2fc1a-237">El índice de la interfaz DHCPv6 y el índice de direcciones globales se establecen mediante el servicio *nx_dhcpv6_server_interface_set*.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-237">The DHCPv6 interface index and global address index are set using the *nx_dhcpv6_server_interface_set* service.</span></span> <span data-ttu-id="2fc1a-238">Esto también se muestra en el "sistema de ejemplo pequeño" de este documento.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-238">This is also demonstrated in the “small example” in this document.</span></span>

<span data-ttu-id="2fc1a-239">***Guardado de los DUID de DHCPv6 en los reinicios del servidor***</span><span class="sxs-lookup"><span data-stu-id="2fc1a-239">***Saving DHCPv6 DUID across Server Reboots***</span></span>

<span data-ttu-id="2fc1a-240">El protocolo DHCPv6 requiere que el servidor use el mismo DUID en varios reinicios.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-240">The DHCPv6 protocol requires the Server to use the same DUID across multiple reboots.</span></span> <span data-ttu-id="2fc1a-241">Por tanto, los datos usados para crear el DUID deben almacenarse y recuperarse de la memoria no volátil para cumplir este requisito.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-241">Any data used to create the DUID must therefore be stored and retrieved from nonvolatile memory for this requirement.</span></span> <span data-ttu-id="2fc1a-242">Para hosts que usan el nivel de vínculo y el DUID de tiempo que requiere acceso a un reloj en tiempo real,</span><span class="sxs-lookup"><span data-stu-id="2fc1a-242">For hosts that use the Link Layer Plus Time DUID which requires access to a real time clock.</span></span> <span data-ttu-id="2fc1a-243">la aplicación host DHCPv6 de NetX Duo debe incluir el acceso a datos en tiempo real con el fin de generar un valor de tiempo para la creación inicial de DUID del servidor y almacenar esos datos para su reutilización en sesiones posteriores del servidor.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-243">The NetX Duo DHCPv6 host application should include real time data access for generating a time value for the initial Server DUID creation, and store that data for reuse on subsequent Server sessions.</span></span> <span data-ttu-id="2fc1a-244">A continuación, *nx_dhcpv6_set_server_duid* toma los datos de DUID como argumentos, así como las opciones de configuración en función del tipo de DUID, para generar (o reproducir) su propio DUID.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-244">The *nx_dhcpv6_set_server_duid* then takes DUID data as its arguments, as well as configuration options depending on DUID type, to produce (or reproduce) its own DUID.</span></span>

<span data-ttu-id="2fc1a-245">***Creación de listas de direcciones IPv6 asignables***</span><span class="sxs-lookup"><span data-stu-id="2fc1a-245">***Assignable IPv6 Address List Creation***</span></span>

<span data-ttu-id="2fc1a-246">Después de crear el servidor DHCPv6, la aplicación host del servidor debe crear un intervalo de direcciones globales IPv6 asignables si no hay datos de listas de direcciones IP previamente almacenados.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-246">After creation of the DHCPv6 Server, the Server host application must create a range of assignable IPv6 global addresses if there is no previously stored IP address list data.</span></span> <span data-ttu-id="2fc1a-247">Esto se hace mediante el servicio *nx_dhcpv6_create_ip_address_range* que toma como entrada una dirección IPv6 inicial y final.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-247">This is done using the *nx_dhcpv6_create_ip_address_range* service which takes as input a starting and ending IPv6 address.</span></span>

<span data-ttu-id="2fc1a-248">***Guardado de los datos del cliente y las direcciones DHCPv6 asignables***</span><span class="sxs-lookup"><span data-stu-id="2fc1a-248">***Saving DHCPv6 Assignable Address and Client data***</span></span>

<span data-ttu-id="2fc1a-249">El protocolo DHCPv6 requiere que el servidor DHCPv6 guarde los datos del cliente y de las direcciones IPv6 en un almacenamiento no volátil en caso de que se reinicie el servidor.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-249">The DHCPv6 protocol requires that the DHCPv6 Server save its Client and IPv6 address data in nonvolatile storage in the event of rebooting the server.</span></span> <span data-ttu-id="2fc1a-250">El servidor DHCPv6 de NetX Duo tiene varias API para cargar y descargar datos del cliente y de las direcciones IPv6 con origen y destino en el servidor DHCPv6, respectivamente:</span><span class="sxs-lookup"><span data-stu-id="2fc1a-250">The NetX Duo DHCPv6 Server has several API for uploading and downloading Client and IPv6 address data to and from the DHCPv6 Server, respectively:</span></span>

<span data-ttu-id="2fc1a-251">*nx_dhcpv6_add_client_record*</span><span class="sxs-lookup"><span data-stu-id="2fc1a-251">*nx_dhcpv6_add_client_record*</span></span>

<span data-ttu-id="2fc1a-252">*nx_dhcpv6_add_ip_address_lease*</span><span class="sxs-lookup"><span data-stu-id="2fc1a-252">*nx_dhcpv6_add_ip_address_lease*</span></span>

<span data-ttu-id="2fc1a-253">*nx_dhcpv6_retrieve_client_record*</span><span class="sxs-lookup"><span data-stu-id="2fc1a-253">*nx_dhcpv6_retrieve_client_record*</span></span>

<span data-ttu-id="2fc1a-254">*nx_dhcpv6_retrieve_ip_address_lease*</span><span class="sxs-lookup"><span data-stu-id="2fc1a-254">*nx_dhcpv6_retrieve_ip_address_lease*</span></span>

<span data-ttu-id="2fc1a-255">La carga de datos en el servidor debe realizarse antes de reiniciar el servidor.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-255">Uploading data to the Server must be done before restarting the Server.</span></span> <span data-ttu-id="2fc1a-256">La descarga de los datos debe realizarse solo después de que el servidor DHCPv6 se detenga (o se suspenda).</span><span class="sxs-lookup"><span data-stu-id="2fc1a-256">Downloading the data should be done only after the DHCPv6 Server is stopped (or suspended).</span></span> <span data-ttu-id="2fc1a-257">Los servicios para hacerlo se describen con detalle más adelante en este documento.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-257">The services for doing so are described in detail later in this document.</span></span> <span data-ttu-id="2fc1a-258">Sin embargo, el servidor DHCPv6 de NetX Duo no define ningún acceso al almacenamiento no volátil.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-258">However, the NetX Duo DHCPv6 provides does not define an access to nonvolatile storage.</span></span> <span data-ttu-id="2fc1a-259">Este debe controlarse mediante la aplicación host.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-259">This must be handled by the host application.</span></span> <span data-ttu-id="2fc1a-260">En el sistema de ejemplo pequeño se muestra cómo la aplicación host lo hace.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-260">The small example demonstrates how the host application does this.</span></span>

<span data-ttu-id="2fc1a-261">***Identificador único de DHCP (DUID) del servidor***</span><span class="sxs-lookup"><span data-stu-id="2fc1a-261">***Server DHCP Unique Identifier (DUID)***</span></span>

<span data-ttu-id="2fc1a-262">El DUID del servidor define de forma única el host del servidor DHCPv6 en la red.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-262">The Server DUID uniquely defines the DHCPv6 Server host on the network.</span></span> <span data-ttu-id="2fc1a-263">Si un servidor no ha creado previamente su DUID, puede usar *nx_dhcpv6_server_set_duid* para crear uno.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-263">If a Server has not previously created its DUID, it can use the *nx_dhcpv6_server_set_duid* to create one.</span></span> <span data-ttu-id="2fc1a-264">Según RFC 3315, el servidor DHCPv6 debe guardar este DUID en la memoria no volátil para poder recuperarlo después de que se reinicie el servidor.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-264">As per RFC 3315, the DHCPv6 Server must save this DUID to nonvolatile memory to be able to retrieve it after Server reboots.</span></span> <span data-ttu-id="2fc1a-265">El servidor DHCPv6 es compatible con los tipos de DUID de nivel de vínculo, de tiempo de nivel de vínculo y de empresa (asignado por el proveedor).</span><span class="sxs-lookup"><span data-stu-id="2fc1a-265">The DHCPv6 Server supports the Link Layer, Link Layer Time and Enterprise (Vendor assigned) DUID types.</span></span> <span data-ttu-id="2fc1a-266">Tenga en cuenta que el cliente debe enviar directamente el DUID de tipo de proveedor.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-266">Note that the Client must send in the Vendor type DUID directly.</span></span> <span data-ttu-id="2fc1a-267">La opción para los DUID (17) de tipo de proveedor no es compatible directamente con el servidor DHPv6 de NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-267">The option for Vendor type DUIDs (17) is not directly supported by the NetX Duo DHPv6 Server.</span></span>

<span data-ttu-id="2fc1a-268">La aplicación host del servidor DHCPv6 tiene valores predeterminados para la asignación de direcciones IPv6 que incluye el tiempo de espera de la concesión.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-268">The DHCPv6 Server host application has default values for IPv6 address assignment including lease timeout.</span></span> <span data-ttu-id="2fc1a-269">Consulte la sección de opciones configurables más adelante en este documento para obtener más información sobre cómo establecer estas opciones.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-269">See Configurable Options later in this document for how to set these options.</span></span> <span data-ttu-id="2fc1a-270">:</span><span class="sxs-lookup"><span data-stu-id="2fc1a-270">:</span></span>

<span data-ttu-id="2fc1a-271">El bloque de control de *IANA* contiene los campos T1 y T2.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-271">The *IANA* control block contains the T1 and T2 fields.</span></span> <span data-ttu-id="2fc1a-272">El bloque *IA* del bloque de control de *IANA* contiene los campos de las duraciones preferida y válida.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-272">The *IA* block in the *IANA* control block contains the preferred and valid lifetime fields.</span></span> <span data-ttu-id="2fc1a-273">La aplicación host tiene opciones configurables definidas en otro lugar de este documento para establecer estas opciones.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-273">The host application has configurable options defined elsewhere in this document for setting these options.</span></span> <span data-ttu-id="2fc1a-274">Estas se asignan a todas las solicitudes de direcciones IPv6 del cliente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-274">They are assigned to all Client IPv6 address requests.</span></span>

<span data-ttu-id="2fc1a-275">Estos parámetros de concesión de direcciones IP DHCPv6 se definen a continuación.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-275">These DHCPv6 IP lease parameters are defined below.</span></span>

<span data-ttu-id="2fc1a-276">T1: tiempo en segundos en que el cliente debe empezar a renovar su dirección IPv6 desde el servidor que la asignó.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-276">T1 – time in seconds when the Client must start renewing its IPv6 address from the Server that assigned it.</span></span>

<span data-ttu-id="2fc1a-277">T2: tiempo en segundos en el que el cliente debe iniciar el reenlace de la dirección IPv6, si se produce un error de renovación, con cualquier servidor en su vínculo.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-277">T2 – time in seconds when the Client must start rebinding the IPv6 address, if renewal failed, with any Server on its link.</span></span>

<span data-ttu-id="2fc1a-278">Duración preferida: tiempo en segundos en que la dirección del cliente deja de estar en desuso si el cliente no la ha renovado ni reenlazado.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-278">Preferred lifetime – time in seconds when the Client address becomes deprecated if the Client has not renewed or rebound it.</span></span> <span data-ttu-id="2fc1a-279">El cliente puede seguir usando esta dirección.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-279">The Client can still use this address.</span></span>

<span data-ttu-id="2fc1a-280">Duración válida: tiempo en segundos en que la dirección IP del cliente expiró y no debe usar esta dirección en sus transmisiones de red.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-280">Valid lifetime – time in seconds when the Client IP address is expired and MUST not use this address in its network transmissions.</span></span>

<span data-ttu-id="2fc1a-281">RFC recomienda los tiempos T1 y T2 que son 0,5 y 0,8, respectivamente, de la duración preferida en la opción de *IANA* del cliente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-281">The RFC recommends T1 and T2 times that are 0.5 and 0.8, respectively, of the preferred lifetime in the Client *IANA* option.</span></span> <span data-ttu-id="2fc1a-282">Si el servidor no tiene ninguna preferencia, debe establecer estos tiempos en cero.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-282">If the Server has no preference, it should set these times to zero.</span></span> <span data-ttu-id="2fc1a-283">Si una respuesta del servidor contiene los tiempos T1 y T2 establecidos en cero, se permite que el cliente establezca sus propios tiempos T1 y T2.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-283">If a Server reply contains T1 and T2 times set to zero, it is letting the Client set its own T1 and T2 times.</span></span>

<span data-ttu-id="2fc1a-284">**Restricciones**</span><span class="sxs-lookup"><span data-stu-id="2fc1a-284">**Constraints**</span></span>

<span data-ttu-id="2fc1a-285">El servidor DHCPv6 de NetX Duo no es compatible con las siguientes opciones de DHCPv6:</span><span class="sxs-lookup"><span data-stu-id="2fc1a-285">NetX Duo DHCPv6 Server does not support the following DHCPv6 options:</span></span>

  - <span data-ttu-id="2fc1a-286">Opción de confirmación rápida que optimiza el proceso de solicitud de direcciones DHCPv6 solo para el intercambio de mensajes de solicitud y respuesta.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-286">Rapid Commit option which optimizes the DHCPv6 address request process to just the Solicit and Reply message exchange</span></span>

  - <span data-ttu-id="2fc1a-287">Opción reconfigure que permite al servidor iniciar cambios en el estado de la dirección IP del cliente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-287">Reconfigure option which allows the Server can initiate changes to the Client’s IP address status.</span></span>

  - <span data-ttu-id="2fc1a-288">Opción de unidifusión: todos los mensajes del cliente deben enviarse a la dirección de multidifusión *All_DHCP_Relay_Agents_and_Servers* en lugar de directamente al servidor DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-288">Unicast option; all Client messages must be sent to the *All_DHCP_Relay_Agents_and_Servers* multicast address rather than to the DHCPv6 Server directly.</span></span>

  - <span data-ttu-id="2fc1a-289">Opción de la asociación de identidades de direcciones temporales (IA_TA), que es una dirección IP temporal concedida a un cliente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-289">Identity Association for the Temporary Addresses(IA_TA)option which is a temporary IP address granted to a Client.</span></span>

  - <span data-ttu-id="2fc1a-290">Varias opciones de IA (direcciones IPv6) por solicitud del cliente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-290">Multiple IA (IPv6 addresses) options per Client Request</span></span>

  - <span data-ttu-id="2fc1a-291">El host de retransmisión entre el cliente y el servidor DHCPv6; por ejemplo, el cliente y el servidor deben estar en la misma red.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-291">Relay host between DHCPv6 Client and Server e.g. Client and Server must be on the same network.</span></span>

  - <span data-ttu-id="2fc1a-292">IPSec y la autenticación no se admiten en la mensajería DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-292">IPSec and Authentication are not supported in DHCPv6 messaging.</span></span> <span data-ttu-id="2fc1a-293">Sin embargo, la instancia de IP puede estar habilitada para IPSec según la versión de NetX Duo en uso.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-293">However, the IP instance may be IPSec enabled depending on the version of NetX Duo in use.</span></span>

  - <span data-ttu-id="2fc1a-294">El servidor DHCPv6 de NetX Duo solo admite directamente la solicitud de opción de servidor DNS.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-294">The NetX Duo DHCPv6 Server directly supports only the DNS server option request.</span></span> <span data-ttu-id="2fc1a-295">Esto puede cambiar en versiones futuras.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-295">This may change in future releases.</span></span>

  - <span data-ttu-id="2fc1a-296">No se admite la opción de delegación de prefijo.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-296">The Prefix Delegation option is not supported.</span></span>

  - <span data-ttu-id="2fc1a-297">Autenticación de mensajes DHCPv6, aunque IPSec se puede habilitar en el entorno de NetX Duo subyacente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-297">Authentication of DHCPv6 messages although IPSec can be enabled in the underlying NetX Duo environment.</span></span> <span data-ttu-id="2fc1a-298">Ninguno de los servidores DHCPv6 de NetX Duo admiten conexiones de retransmisión a los clientes.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-298">Neither does the NetX Duo DHCPv6 Server support relay connections to the Clients.</span></span> <span data-ttu-id="2fc1a-299">Se da por sentado que todas las solicitudes del cliente se originan en los hosts de la red del servidor.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-299">It is assumed all Client requests originate from hosts on the Server network.</span></span>

## <a name="netx-duo-dhcpv6-server-callback-functions"></a><span data-ttu-id="2fc1a-300">Funciones de devolución de llamada del servidor DHCPv6 de NetX Duo</span><span class="sxs-lookup"><span data-stu-id="2fc1a-300">NetX Duo DHCPv6 Server Callback Functions</span></span>

<span data-ttu-id="2fc1a-301">*nx_dhcpv6_IP_address_declined_handler*</span><span class="sxs-lookup"><span data-stu-id="2fc1a-301">*nx_dhcpv6_IP_address_declined_handler*</span></span>

<span data-ttu-id="2fc1a-302">Cuando el cliente DHCPv6 envía un mensaje Decline, el servidor DHCPv6 de NetX Duo marca la dirección como no disponible en las tablas de direcciones IPv6.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-302">When the DHCPv6 Client sends a Decline message, the NetX Duo DHCPv6 Server marks the address as not available in its IPv6 address tables.</span></span> <span data-ttu-id="2fc1a-303">Para poder personalizar el servidor que controla este mensaje, se proporciona *nx_dhcpv6_IP_address_declined_handler* *.*</span><span class="sxs-lookup"><span data-stu-id="2fc1a-303">To have the ability to customize the Server handling of this message, the *nx_dhcpv6_IP_address_declined_handler* is provided *.*</span></span> <span data-ttu-id="2fc1a-304">Sin embargo, esta devolución de llamada no está implementada actualmente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-304">However, this callback is not currently implemented.</span></span>

<span data-ttu-id="2fc1a-305">*nx_dhcpv6_server_option_request_handler*</span><span class="sxs-lookup"><span data-stu-id="2fc1a-305">*nx_dhcpv6_server_option_request_handler*</span></span>

<span data-ttu-id="2fc1a-306">Cuando el mensaje del cliente DHCPv6 contiene datos de solicitud de opción, el servidor DHCPv6 de NetX Duo reenvía cada código de opción de solicitud a esta devolución de llamada de usuario, si se ha definido.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-306">When the DHCPv6 Client message contains option request data, the NetX Duo DHCPv6 Server forwards each option request option code to this user callback, if defined.</span></span> <span data-ttu-id="2fc1a-307">De esta forma, el servidor de NetX Duo puede permitir que la devolución de llamada definida por el usuario llene los datos.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-307">This gives the NetX Duo Server the capability to let the user defined callback fill in the data.</span></span> <span data-ttu-id="2fc1a-308">Sin embargo, esta funcionalidad no está implementada actualmente.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-308">However this functionality is not currently implemented.</span></span>

## <a name="supported-dhcpv6-rfcs"></a><span data-ttu-id="2fc1a-309">RFC de DHCPv6 compatibles</span><span class="sxs-lookup"><span data-stu-id="2fc1a-309">Supported DHCPv6 RFCs</span></span>

<span data-ttu-id="2fc1a-310">El servidor DHCPv6 de NetX Duo es compatible con RFC3315, RFC3646 y RFC relacionados.</span><span class="sxs-lookup"><span data-stu-id="2fc1a-310">NetX Duo DHCPv6 is compliant with RFC3315, RFC3646, and related RFCs.</span></span>
---
title: 'Capítulo 1: Introducción al FTP de Azure RTOS NetX Duo'
description: El protocolo de transferencia de archivos (FTP) es un protocolo diseñado para las transferencias de archivos.
author: philmea
ms.author: philmea
ms.date: 07/14/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 1d56b20b1c7d719d1b7d9c8c5b2fe234d5577da3
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/22/2021
ms.locfileid: "104814710"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-duo-ftp"></a><span data-ttu-id="e4b7a-103">Capítulo 1: Introducción al FTP de Azure RTOS NetX Duo</span><span class="sxs-lookup"><span data-stu-id="e4b7a-103">Chapter 1 - Introduction to Azure RTOS NetX Duo FTP</span></span>

<span data-ttu-id="e4b7a-104">El protocolo de transferencia de archivos (FTP) es un protocolo diseñado para las transferencias de archivos.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-104">The File Transfer Protocol (FTP) is a protocol designed for file transfers.</span></span> <span data-ttu-id="e4b7a-105">FTP emplea servicios del Protocolo de control de transmisión (TCP) de confianza para realizar su función de transferencia de archivos.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-105">FTP utilizes reliable Transmission Control Protocol (TCP) services to perform its file transfer function.</span></span> <span data-ttu-id="e4b7a-106">Por este motivo, FTP es un protocolo de transferencia de archivos altamente fiable.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-106">Because of this, FTP is a highly reliable file transfer protocol.</span></span> <span data-ttu-id="e4b7a-107">FTP también es de alto rendimiento.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-107">FTP is also high-performance.</span></span> <span data-ttu-id="e4b7a-108">La transferencia de archivos FTP real se realiza en una conexión FTP dedicada.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-108">The actual FTP file transfer is performed on a dedicated FTP connection.</span></span> <span data-ttu-id="e4b7a-109">El protocolo FTP de NetX Duo admite redes IPv4 e IPv6.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-109">NetX Duo FTP accommodates both IPv4 and IPv6 networks.</span></span> <span data-ttu-id="e4b7a-110">IPv6 no cambia directamente el protocolo FTP, aunque es necesario realizar algunos cambios en la API de FTP de NetX original para adaptarse a IPv6 y se describirán en este documento.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-110">IPv6 does not directly change the FTP protocol, although some changes in the original NetX FTP API are necessary to accommodate IPv6 and will be described in this document.</span></span>

## <a name="ftp-requirements"></a><span data-ttu-id="e4b7a-111">Requisitos de FTP</span><span class="sxs-lookup"><span data-stu-id="e4b7a-111">FTP Requirements</span></span>

<span data-ttu-id="e4b7a-112">Para que funcione correctamente, el paquete FTP de NetX requiere NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-112">In order to function properly, the NetX FTP package requires NetX Duo.</span></span> <span data-ttu-id="e4b7a-113">La aplicación host debe crear una instancia de IP para ejecutar las tareas periódicas y los servicios de NetX.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-113">The host application must create an IP instance for running NetX services and periodic tasks.</span></span> <span data-ttu-id="e4b7a-114">Si ejecuta la aplicación de host FTP en una red IPv6, IPv6 e ICMPv6 deben estar habilitados en la tarea IP.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-114">If running the FTP host application over an IPv6 network, IPv6, and ICMPv6 must be enabled on the IP task.</span></span> <span data-ttu-id="e4b7a-115">TCP también debe estar habilitado para redes IPv6 o IPv4.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-115">TCP must be also enabled for either IPv6 or IPv4 networks.</span></span> <span data-ttu-id="e4b7a-116">La aplicación host IPv6 debe establecer su dirección IPv6 local y global de vínculo mediante la API IPv6 o DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-116">The IPv6 host application must set its linklocal and global IPv6 address using the IPv6 API and/or DHCPv6.</span></span> <span data-ttu-id="e4b7a-117">Mediante un programa de demostración de la sección “Sistema de ejemplo pequeño” del **capítulo 2** se mostrará cómo se hace esto.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-117">A demo program in section “Small Example System” in **Chapter 2** demonstrates how this is done.</span></span>

<span data-ttu-id="e4b7a-118">El servidor y el cliente FTP también están diseñados para funcionar con el sistema de archivos incrustado FileX.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-118">The FTP Server and Client are also designed to work with the FileX embedded file system.</span></span> <span data-ttu-id="e4b7a-119">Si FileX no está disponible, el desarrollador del host puede implementar o sustituir su propio sistema de archivos a lo largo de las instrucciones que se sugieren en filex_stub.h definiendo cada uno de los servicios enumerados en ese archivo.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-119">If FileX is not available, the host developer can implement or substitute their own file system along the guidelines suggested in filex_stub.h by defining each of the services listed in that file.</span></span> <span data-ttu-id="e4b7a-120">Esto se describe en secciones posteriores de esta guía.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-120">This is discussed in later sections of this guide.</span></span>

<span data-ttu-id="e4b7a-121">La parte del cliente FTP del paquete FTP de NetX no tiene ningún requisito adicional.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-121">The FTP Client portion of the NetX FTP package has no further requirements.</span></span>

<span data-ttu-id="e4b7a-122">La parte del servidor FTP del paquete FTP de NetX tiene varios requisitos adicionales.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-122">The FTP Server portion of the NetX FTP package has several additional requirements.</span></span> <span data-ttu-id="e4b7a-123">En primer lugar, es necesario tener acceso completo al *conocido puerto 21* de TCP para controlar todas las solicitudes de comandos del FTP cliente y al *conocido puerto 20* para controlar todas las transferencias de datos del FTP cliente.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-123">First, it requires complete access to TCP *well-known port 21* for handling all Client FTP command requests and *well-known port 20* for handling all Client FTP data transfers.</span></span>

## <a name="ftp-constraints"></a><span data-ttu-id="e4b7a-124">Restricciones de FTP</span><span class="sxs-lookup"><span data-stu-id="e4b7a-124">FTP Constraints</span></span>

<span data-ttu-id="e4b7a-125">El estándar FTP tiene muchas opciones relacionadas con la representación de datos de archivos.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-125">The FTP standard has many options regarding the representation of file data.</span></span> <span data-ttu-id="e4b7a-126">FTP de NetX no implementa opciones de conmutador, por ejemplo, ls –al.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-126">NetX FTP does not implement switch options e.g. ls –al.</span></span> <span data-ttu-id="e4b7a-127">El servidor FTP de NetX espera recibir solicitudes y sus argumentos en un solo paquete y no en paquetes consecutivos.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-127">NetX FTP Server expects to receive requests and their arguments in a single packet rather than consecutive packets.</span></span>

<span data-ttu-id="e4b7a-128">De forma similar a las implementaciones de UNIX, FTP de NetX supone las siguientes restricciones de formato de archivo:</span><span class="sxs-lookup"><span data-stu-id="e4b7a-128">Similar to UNIX implementations, NetX FTP assumes the following file format constraints:</span></span>

- <span data-ttu-id="e4b7a-129">Tipo de archivo: **binario**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-129">File Type: **Binary**</span></span>
- <span data-ttu-id="e4b7a-130">Formato de archivo: **solo para no impresión**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-130">File Format: **Nonprint Only**</span></span>
- <span data-ttu-id="e4b7a-131">Estructura de archivo: **solo estructura de archivos**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-131">File Structure: **File Structure Only**</span></span>

## <a name="ftp-file-names"></a><span data-ttu-id="e4b7a-132">Nombre de archivos FTP</span><span class="sxs-lookup"><span data-stu-id="e4b7a-132">FTP File Names</span></span>

<span data-ttu-id="e4b7a-133">Los nombres de archivo FTP deben tener el formato del sistema de archivos de destino (normalmente, FileX).</span><span class="sxs-lookup"><span data-stu-id="e4b7a-133">FTP file names should be in the format of the target file system (usually FileX).</span></span> <span data-ttu-id="e4b7a-134">Deben ser cadenas ASCII terminadas en NULL, con información de la ruta de acceso completa si es necesario.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-134">They should be NULL terminated ASCII strings, with full path information if necessary.</span></span> <span data-ttu-id="e4b7a-135">No hay ningún límite especificado para el tamaño de los nombres de archivo FTP en la implementación FTP de NetX.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-135">There is no specified limit for the size of FTP file names in the NetX FTP implementation.</span></span> <span data-ttu-id="e4b7a-136">Sin embargo, el tamaño de carga del grupo de paquetes debe ser capaz de dar cabida a la ruta de acceso máxima o al nombre de archivo.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-136">However, the packet pool payload size should be able to accommodate the maximum path and/or file name.</span></span>

## <a name="ftp-client-commands"></a><span data-ttu-id="e4b7a-137">Comandos de cliente FTP</span><span class="sxs-lookup"><span data-stu-id="e4b7a-137">FTP Client Commands</span></span>

<span data-ttu-id="e4b7a-138">FTP tiene un mecanismo sencillo para abrir conexiones y realizar operaciones de archivos y directorios.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-138">The FTP has a simple mechanism for opening connections and performing file and directory operations.</span></span> <span data-ttu-id="e4b7a-139">Básicamente, hay un conjunto de comandos FTP estándar que el cliente emite después de que una conexión se haya establecido correctamente en el *conocido puerto 21* de TCP.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-139">There is basically a set of standard FTP commands that are issued by the Client after a connection has been successfully established on the TCP *well-known port 21*.</span></span> <span data-ttu-id="e4b7a-140">A continuación se muestran algunos de los comandos FTP básicos.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-140">The following shows some of the basic FTP commands.</span></span> <span data-ttu-id="e4b7a-141">Tenga en cuenta que la única diferencia cuando FTP se ejecuta a través de IPv6 es que el comando PORT se reemplaza por el comando EPRT:</span><span class="sxs-lookup"><span data-stu-id="e4b7a-141">Note that the only difference when FTP runs over IPv6 is that the PORT command is replaced with the EPRT command:</span></span>

- <span data-ttu-id="e4b7a-142">CWD ruta_de_acceso *Cambiar el directorio de trabajo*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-142">CWD path *Change working directory*</span></span>
- <span data-ttu-id="e4b7a-143">DELE nombre_de_archivo *Eliminar el nombre de archivo*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-143">DELE filename *Delete specified file name*</span></span>
- <span data-ttu-id="e4b7a-144">EPRT dirección_ip, puerto *Proporcionar la dirección IPv6 y el puerto de datos de cliente*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-144">EPRT ip_address, port *Provide IPv6 address and Client data port*</span></span>
- <span data-ttu-id="e4b7a-145">EPSV *Solicitar modo de transferencia pasiva IPv6*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-145">EPSV *Request passive transfer mode for IPv6*</span></span>
- <span data-ttu-id="e4b7a-146">LIST directorio *Obtener lista de directorios*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-146">LIST directory *Get directory listing*</span></span>
- <span data-ttu-id="e4b7a-147">MKD directorio *Crear nuevo directorio*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-147">MKD directory *Make new directory*</span></span>
- <span data-ttu-id="e4b7a-148">NLST directorio *Obtener lista de directorios*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-148">NLST directory *Get directory listing*</span></span>
- <span data-ttu-id="e4b7a-149">NOOP *Ninguna operación, vuelve correctamente*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-149">NOOP *No operation, returns success*</span></span>
- <span data-ttu-id="e4b7a-150">PASS contraseña *Proporcionar la contraseña para el inicio de sesión*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-150">PASS password *Provide password for login*</span></span>
- <span data-ttu-id="e4b7a-151">PASV *Solicitar modo de transferencia pasiva IPv4*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-151">PASV *Request passive transfer mode for IPv4*</span></span>
- <span data-ttu-id="e4b7a-152">PORT dirección_ip,puerto *Proporcionar la dirección IP y el puerto de datos de cliente*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-152">PORT ip_address,port *Provide IP address and Client data port*</span></span>
- <span data-ttu-id="e4b7a-153">PWD ruta_de_acceso *seleccionar la ruta de acceso del directorio actual*.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-153">PWD path *Pickup current directory path*</span></span>
- <span data-ttu-id="e4b7a-154">QUIT *Finalizar la conexión de cliente*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-154">QUIT *Terminate Client connection*</span></span>
- <span data-ttu-id="e4b7a-155">RETR nombre_de_archivo *Leer el archivo especificado*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-155">RETR filename *Read specified file*</span></span>
- <span data-ttu-id="e4b7a-156">RMD directorio *Eliminar el directorio especificado*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-156">RMD directory *Delete specified directory*</span></span>
- <span data-ttu-id="e4b7a-157">RNFR nombre_de_archivo_antiguo *Especificar el archivo que se va a cambiar de nombre*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-157">RNFR oldfilename *Specify file to rename*</span></span>
- <span data-ttu-id="e4b7a-158">RNTO nombre_de_archivo_nuevo *Cambiar el nombre del archivo por el nombre de archivo proporcionado*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-158">RNTO newfilename *Rename file to supplied file name*</span></span>
- <span data-ttu-id="e4b7a-159">STOR nombre_de_archivo *Escribir archivo especificado*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-159">STOR filename *Write specified file*</span></span>
- <span data-ttu-id="e4b7a-160">TYPE I *Seleccionar imagen de archivo binario*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-160">TYPE I *Select binary file image*</span></span>
- <span data-ttu-id="e4b7a-161">USER nombre_de_usuario *Proporcionar el nombre de usuario para el inicio de sesión*</span><span class="sxs-lookup"><span data-stu-id="e4b7a-161">USER username *Provide username for login*</span></span>

<span data-ttu-id="e4b7a-162">El software del cliente FTP de NetX usa internamente estos comandos ASCII para realizar operaciones FTP con el servidor FTP.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-162">These ASCII commands are used internally by the NetX FTP Client software to perform FTP operations with the FTP Server.</span></span>

## <a name="ftp-server-responses"></a><span data-ttu-id="e4b7a-163">Respuestas del servidor FTP</span><span class="sxs-lookup"><span data-stu-id="e4b7a-163">FTP Server Responses</span></span>

<span data-ttu-id="e4b7a-164">Una vez que el servidor FTP procesa la solicitud del cliente, devuelve una respuesta codificada de tres dígitos en ASCII seguida del texto ASCII opcional.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-164">Once the FTP Server processes the Client request, it returns a 3-digit coded response in ASCII followed by optional ASCII text.</span></span> <span data-ttu-id="e4b7a-165">El software del cliente FTP usa la respuesta numérica para determinar si la operación se ha realizado correctamente o no.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-165">The numeric response is used by the FTP Client software to determine whether the operation succeeded or failed.</span></span> <span data-ttu-id="e4b7a-166">A continuación, se muestran varias respuestas del servidor FTP a solicitudes de cliente:</span><span class="sxs-lookup"><span data-stu-id="e4b7a-166">The following list shows various FTP Server responses to Client requests:</span></span>

<span data-ttu-id="e4b7a-167">**Significado del primer campo numérico**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-167">**First Numeric Field Meaning**</span></span>

- <span data-ttu-id="e4b7a-168">1xx *Estado preliminar positivo: otra respuesta entrante*.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-168">1xx *Positive preliminary status – another reply coming*.</span></span>
- <span data-ttu-id="e4b7a-169">2xx *Estado de finalización positivo*.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-169">2xx *Positive completion status*.</span></span>
- <span data-ttu-id="e4b7a-170">3xx *Estado preliminar positivo: se debe enviar otro comando*.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-170">3xx *Positive preliminary status – another command must be sent*.</span></span>
- <span data-ttu-id="e4b7a-171">4xx *Condición de error temporal*.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-171">4xx *Temporary error condition*.</span></span>
- <span data-ttu-id="e4b7a-172">5xx *Condición de error*.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-172">5xx *Error condition.*</span></span>

<span data-ttu-id="e4b7a-173">**Significado del segundo campo numérico**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-173">**Second Numeric Field Meaning**</span></span>

- <span data-ttu-id="e4b7a-174">x0x *Error de sintaxis en el comando*.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-174">x0x *Syntax error in command*.</span></span>
- <span data-ttu-id="e4b7a-175">x1x *Mensaje informativo*.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-175">x1x *Informational message*.</span></span>
- <span data-ttu-id="e4b7a-176">x2x *Conexión relacionada*.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-176">x2x *Connection related*.</span></span>
- <span data-ttu-id="e4b7a-177">x3x *Autenticación relacionada*.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-177">x3x *Authentication related*.</span></span>
- <span data-ttu-id="e4b7a-178">x4x *Sin especificar*.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-178">x4x *Unspecified*.</span></span>
- <span data-ttu-id="e4b7a-179">x5x *Sistema de archivos relacionado*.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-179">x5x *File system related*.</span></span>

<span data-ttu-id="e4b7a-180">Por ejemplo, una solicitud de cliente para desconectar una conexión FTP con el comando QUIT normalmente responderá con un código “221” del servidor si la desconexión se realiza correctamente.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-180">For example, a Client request to disconnect an FTP connection with the QUIT command will typically be responded with a “221” code from the Server – if the disconnect is successful.</span></span>

## <a name="ftp-passive-transfer-mode"></a><span data-ttu-id="e4b7a-181">Modo de transferencia pasiva de FTP</span><span class="sxs-lookup"><span data-stu-id="e4b7a-181">FTP Passive Transfer Mode</span></span>

<span data-ttu-id="e4b7a-182">De forma predeterminada, el cliente FTP de NetX Duo usa el modo de transporte activo para intercambiar datos a través del socket de datos con el servidor FTP.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-182">By default, the NetX Duo FTP Client uses the active transport mode to exchange data over the data socket with the FTP server.</span></span> <span data-ttu-id="e4b7a-183">El problema de esta disposición es que requiere que el cliente FTP abra un socket de servidor TCP para que el servidor FTP se conecte.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-183">The problem with this arrangement is that it requires the FTP Client to open a TCP server socket for the FTP Server to connect to.</span></span> <span data-ttu-id="e4b7a-184">Esto representa un posible riesgo de seguridad y puede ser bloqueado por el firewall del cliente.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-184">This represents a possible security risk and may be blocked by the Client firewall.</span></span> <span data-ttu-id="e4b7a-185">El modo de transferencia pasiva difiere del modo de transporte activa al hacer que el servidor FTP cree el socket del servidor TCP en la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-185">Passive transfer mode differs from active transport mode by having the FTP server create the TCP server socket on the data connection.</span></span> <span data-ttu-id="e4b7a-186">Esto elimina el riesgo de seguridad para el cliente FTP.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-186">This eliminates the security risk (for the FTP Client).</span></span>

<span data-ttu-id="e4b7a-187">Para habilitar la transferencia de datos pasiva, la aplicación llama a *nx_ftp_client_passive_mode_set* en un cliente FTP creado previamente con el segundo argumento establecido en NX_TRUE.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-187">To enable passive data transfer, the application calls *nx_ftp_client_passive_mode_set* on a previously created FTP Client with the second argument set to NX_TRUE.</span></span> <span data-ttu-id="e4b7a-188">A partir de ese momento, todos los servicios de cliente FTP de NetX Duo posteriores para la transferencia de datos (NLST, RETR, STOR) se intentan en el modo de transporte pasivo.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-188">Thereafter, all subsequent NetX Duo FTP Client services for transferring data (NLST, RETR, STOR) are attempted in the passive transport mode.</span></span>

<span data-ttu-id="e4b7a-189">El cliente FTP envía primero el comando pasivo (sin argumentos), el comando PASV para IPv4 o el comando EPSV para IPv6.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-189">The FTP Client first sends the passive command (no arguments), PASV command for IPv4 or EPSV command for IPv6.</span></span> <span data-ttu-id="e4b7a-190">Si el servidor FTP admite esta solicitud, devolverá la respuesta 227 “OK” para PASV y la respuesta 229 “OK” para EPSV.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-190">If the FTP server supports this request it will return the 227 “OK” response for PASV, and 229 “OK” response for EPSV.</span></span> <span data-ttu-id="e4b7a-191">A continuación, el cliente envía la solicitud, por ejemplo, RETR.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-191">Then the Client sends the request e.g. RETR.</span></span> <span data-ttu-id="e4b7a-192">Si el servidor rechaza el modo de transferencia pasiva, el servicio de cliente FTP de NetX Duo devuelve un estado de error.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-192">If the server refuses passive transfer mode, the NetX Duo FTP Client service returns an error status.</span></span>

<span data-ttu-id="e4b7a-193">Para deshabilitar el modo de transporte pasivo y volver al modo de transporte activo, la aplicación llama a *nx_ftp_client_passive_mode_set* con el segundo argumento establecido en NX_FALSE.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-193">To disable passive transport mode and return to active transport mode, the application calls *nx_ftp_client_passive_mode_set* with the second argument set to NX_FALSE.</span></span>

## <a name="ftp-communication"></a><span data-ttu-id="e4b7a-194">Comunicación FTP</span><span class="sxs-lookup"><span data-stu-id="e4b7a-194">FTP Communication</span></span>

<span data-ttu-id="e4b7a-195">El servidor FTP emplea el *conocido puerto TCP 21* para atender las solicitudes del cliente.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-195">The FTP Server utilizes the *well-known TCP port 21* to field Client requests.</span></span> <span data-ttu-id="e4b7a-196">Los clientes FTP pueden utilizar cualquier puerto TCP disponible.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-196">FTP Clients may use any available TCP port.</span></span> <span data-ttu-id="e4b7a-197">La secuencia general de eventos FTP es la siguiente:</span><span class="sxs-lookup"><span data-stu-id="e4b7a-197">The general sequence of FTP events is as follows:</span></span>

<span data-ttu-id="e4b7a-198">**Solicitudes FTP de lectura de archivos**:</span><span class="sxs-lookup"><span data-stu-id="e4b7a-198">**FTP Read File Requests**:</span></span>

1. <span data-ttu-id="e4b7a-199">El cliente emite una conexión TCP al puerto 21 del servidor.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-199">Client issues TCP connect to Server port 21.</span></span>
1. <span data-ttu-id="e4b7a-200">El servidor envía la respuesta “220” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-200">Server sends “220” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-201">El cliente envía el mensaje “USER” con el “nombre de usuario”.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-201">Client sends “USER” message with “username.”</span></span>
1. <span data-ttu-id="e4b7a-202">El servidor envía la respuesta “331” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-202">Server sends “331” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-203">El cliente envía el mensaje “PASS” con la “contraseña”.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-203">Client sends “PASS” message with “password.”</span></span>
1. <span data-ttu-id="e4b7a-204">El servidor envía la respuesta “230” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-204">Server sends “230” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-205">El cliente envía el mensaje “TYPE I” para la transferencia binaria.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-205">Client sends “TYPE I” message for binary transfer.</span></span>
1. <span data-ttu-id="e4b7a-206">El servidor envía la respuesta “200” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-206">Server sends “200” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-207">*Aplicaciones IPv4*: el cliente envía el mensaje “PORT” con la dirección IP y el puerto.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-207">*IPv4 applications*: Client sends “PORT” message with IP address and port.</span></span><br /><span data-ttu-id="e4b7a-208">*Aplicaciones IPv6*: el cliente envía el mensaje “EPRT” con la dirección IP y el puerto.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-208">*IPv6 applications*: Client sends “EPRT” message with IP address and port.</span></span>
1. <span data-ttu-id="e4b7a-209">El servidor envía la respuesta “200” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-209">Server sends “200” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-210">El cliente envía el mensaje “RETR” con el nombre de archivo que se va a leer.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-210">Client sends “RETR” message with file name to read.</span></span>
1. <span data-ttu-id="e4b7a-211">El servidor crea el socket de datos y se conecta con el puerto de datos de cliente especificado en el comando “PORT”.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-211">Server creates data socket and connects with client data port specified in the “PORT” command.</span></span>
1. <span data-ttu-id="e4b7a-212">El servidor envía la respuesta “125” para indicar que se ha comenzado a leer el archivo.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-212">Server sends “125” response to signal file read has started.</span></span>
1. <span data-ttu-id="e4b7a-213">El servidor envía el contenido del archivo a través de la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-213">Server sends contents of file through the data connection.</span></span> <span data-ttu-id="e4b7a-214">Este proceso continúa hasta que el archivo se haya transferido por completo.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-214">This process continues until file is completely transferred.</span></span>
1. <span data-ttu-id="e4b7a-215">Cuando termina, el servidor desconecta la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-215">When finished, Server disconnects data connection.</span></span>
1. <span data-ttu-id="e4b7a-216">El servidor envía la respuesta “250” para indicar que el archivo se ha leído correctamente.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-216">Server sends “250” response to signal file read is successful.</span></span>
1. <span data-ttu-id="e4b7a-217">El cliente envía “QUIT” para finalizar la conexión FTP.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-217">Client sends “QUIT” to terminate FTP connection.</span></span>
1. <span data-ttu-id="e4b7a-218">El servidor envía la respuesta “221” para indicar que la desconexión se ha realizado correctamente.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-218">Server sends “221” response to signal disconnect is successful.</span></span>
1. <span data-ttu-id="e4b7a-219">El servidor desconecta la conexión FTP.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-219">Server disconnects FTP connection.</span></span>

<span data-ttu-id="e4b7a-220">Como se mencionó anteriormente, la única diferencia entre el FTP que se ejecuta a través de IPv4 e</span><span class="sxs-lookup"><span data-stu-id="e4b7a-220">As mentioned previously, the only difference between FTP running over IPv4 and</span></span>

<span data-ttu-id="e4b7a-221">IPv6 es el comando PORT que se sustituye por el comando EPRT para IPv6.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-221">IPv6 is the PORT command is replaced with the EPRT command for IPv6</span></span>

<span data-ttu-id="e4b7a-222">Si el cliente FTP realiza una solicitud de lectura en el modo de transferencia pasiva, la secuencia de comandos es la siguiente (las líneas en **negrita** indican un paso diferente del modo de transferencia activa):</span><span class="sxs-lookup"><span data-stu-id="e4b7a-222">If the FTP Client makes a read request in the passive transfer mode, the command sequence is as follows (**bolded** lines indicates a different step from active transfer mode):</span></span>

1. <span data-ttu-id="e4b7a-223">El cliente emite una conexión TCP al puerto 21 del servidor.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-223">Client issues TCP connect to Server port 21.</span></span>
1. <span data-ttu-id="e4b7a-224">El servidor envía la respuesta “220” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-224">Server sends “220” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-225">El cliente envía el mensaje “USER” con el “nombre de usuario”.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-225">Client sends “USER” message with “username.”</span></span>
1. <span data-ttu-id="e4b7a-226">El servidor envía la respuesta “331” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-226">Server sends “331” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-227">El cliente envía el mensaje “PASS” con la “contraseña”.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-227">Client sends “PASS” message with “password.”</span></span>
1. <span data-ttu-id="e4b7a-228">El servidor envía la respuesta “230” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-228">Server sends “230” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-229">El cliente envía el mensaje “TYPE I” para la transferencia binaria.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-229">Client sends “TYPE I” message for binary transfer.</span></span>
1. <span data-ttu-id="e4b7a-230">El servidor envía la respuesta “200” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-230">Server sends “200” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-231">***Aplicaciones IPv4:* el cliente envía el mensaje “PASV”.**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-231">***IPv4 applications:* Client sends “PASV” message.**</span></span><br /><span data-ttu-id="e4b7a-232">**_Aplicaciones IPv6:_ el cliente envía el mensaje “EPSV”.**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-232">**_IPv6 applications:_ Client sends “EPSV” message.**</span></span>
1. <span data-ttu-id="e4b7a-233">***Aplicaciones IPv4:* el servidor envía la respuesta “227”, la dirección IP y el puerto para el cliente al que se va a conectar para indicar que la operación es correcta.**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-233">***IPv4 applications:* Server sends “227” response, and IP address and port for the Client to connect to, to signal success.**</span></span><br /><span data-ttu-id="e4b7a-234">**_Aplicaciones IPv6:_ el servidor envía la respuesta “229”, la dirección IP y el puerto para el cliente al que se va a conectar para indicar que la operación es correcta.**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-234">**_IPv6 applications:_ Server sends “229” response, and IP address and port for the Client to connect to, to signal success.**</span></span>
1. <span data-ttu-id="e4b7a-235">El cliente envía el mensaje “RETR” con el nombre de archivo que se va a leer.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-235">Client sends “RETR” message with file name to read.</span></span>
1. <span data-ttu-id="e4b7a-236">**El servidor crea un socket de servidor de datos y realiza escuchas para la solicitud de conexión de cliente en este socket utilizando el puerto especificado en la respuesta en el paso 10.**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-236">**Server creates data server socket and listens for the Client connect request on this socket using the port specified in the response in step 10.**</span></span>
1. <span data-ttu-id="e4b7a-237">**El servidor envía la respuesta “150” en el socket de control para indicar que la lectura en el archivo se ha iniciado.**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-237">**Server sends “150” response on the control socket to signal file read has started.**</span></span>
1. <span data-ttu-id="e4b7a-238">El servidor envía el contenido del archivo a través de la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-238">Server sends contents of file through the data connection.</span></span> <span data-ttu-id="e4b7a-239">Este proceso continúa hasta que el archivo se haya transferido por completo.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-239">This process continues until file is completely transferred.</span></span>
1. <span data-ttu-id="e4b7a-240">Cuando termina, el servidor desconecta la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-240">When finished, Server disconnects data connection.</span></span>
1. <span data-ttu-id="e4b7a-241">**El servidor envía la respuesta “226” en el socket de control para indicar que la lectura del archivo se ha completado**.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-241">**Server sends “226” response on the control socket to signal file read is successful.**</span></span>
1. <span data-ttu-id="e4b7a-242">El cliente envía “QUIT” para finalizar la conexión FTP.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-242">Client sends “QUIT” to terminate FTP connection.</span></span>
1. <span data-ttu-id="e4b7a-243">El servidor envía la respuesta “221” para indicar que la desconexión se ha realizado correctamente.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-243">Server sends “221” response to signal disconnect is successful.</span></span>
1. <span data-ttu-id="e4b7a-244">El servidor desconecta la conexión FTP.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-244">Server disconnects FTP connection.</span></span>

<span data-ttu-id="e4b7a-245">**Solicitudes de escritura FTP**:</span><span class="sxs-lookup"><span data-stu-id="e4b7a-245">**FTP Write Requests**:</span></span>

1. <span data-ttu-id="e4b7a-246">El cliente emite una conexión TCP al puerto 21 del servidor.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-246">Client issues TCP connect to Server port 21.</span></span>
1. <span data-ttu-id="e4b7a-247">El servidor envía la respuesta “220” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-247">Server sends “220” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-248">El cliente envía el mensaje “USER” con el “nombre de usuario”.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-248">Client sends “USER” message with “username.”</span></span>
1. <span data-ttu-id="e4b7a-249">El servidor envía la respuesta “331” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-249">Server sends “331” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-250">El cliente envía el mensaje “PASS” con la “contraseña”.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-250">Client sends “PASS” message with “password.”</span></span>
1. <span data-ttu-id="e4b7a-251">El servidor envía la respuesta “230” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-251">Server sends “230” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-252">El cliente envía el mensaje “TYPE I” para la transferencia binaria.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-252">Client sends “TYPE I” message for binary transfer.</span></span>
1. <span data-ttu-id="e4b7a-253">El servidor envía la respuesta “200” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-253">Server sends “200” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-254">*Aplicaciones IPv4*: el cliente envía el mensaje “PORT” con la dirección IP y el puerto.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-254">*IPv4 applications*: Client sends “PORT” message with IP address and port.</span></span><br /><span data-ttu-id="e4b7a-255">*Aplicaciones IPv6*: el cliente envía el mensaje “EPRT” con la dirección IP y el puerto.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-255">*IPv6 applications*: Client sends “EPRT” message with IP address and port.</span></span>
1. <span data-ttu-id="e4b7a-256">El servidor envía la respuesta “200” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-256">Server sends “200” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-257">El cliente envía el mensaje “STOR” con el nombre de archivo que se va a escribir.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-257">Client sends “STOR” message with file name to write.</span></span>
1. <span data-ttu-id="e4b7a-258">El servidor crea el socket de datos y se conecta con el puerto de datos de cliente especificado en el comando “EPRT” o “PORT” anterior.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-258">Server creates data socket and connects with client data port specified in the previous “EPRT” or “PORT” command.</span></span>
1. <span data-ttu-id="e4b7a-259">El servidor envía la respuesta “125” para indicar que se ha comenzado a escribir el archivo.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-259">Server sends “125” response to signal file write has started.</span></span>
1. <span data-ttu-id="e4b7a-260">El cliente envía el contenido del archivo a través de la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-260">Client sends contents of file through the data connection.</span></span> <span data-ttu-id="e4b7a-261">Este proceso continúa hasta que el archivo se haya transferido por completo.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-261">This process continues until file is completely transferred.</span></span>
1. <span data-ttu-id="e4b7a-262">Cuando termina, el cliente desconecta la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-262">When finished, Client disconnects data connection.</span></span>
1. <span data-ttu-id="e4b7a-263">El servidor envía la respuesta “250” para indicar que se la escritura del archivo es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-263">Server sends “250” response to signal file write is successful.</span></span>
1. <span data-ttu-id="e4b7a-264">El cliente envía “QUIT” para finalizar la conexión FTP.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-264">Client sends “QUIT” to terminate FTP connection.</span></span>
1. <span data-ttu-id="e4b7a-265">El servidor envía la respuesta “221” para indicar que la desconexión se ha realizado correctamente.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-265">Server sends “221” response to signal disconnect is successful.</span></span>
1. <span data-ttu-id="e4b7a-266">El servidor desconecta la conexión FTP.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-266">Server disconnects FTP connection.</span></span>

<span data-ttu-id="e4b7a-267">Si el cliente FTP realiza una solicitud de escritura en el modo de transferencia pasiva, la secuencia de comandos es la siguiente (las líneas en **negrita** indican un paso diferente del modo de transferencia activa):</span><span class="sxs-lookup"><span data-stu-id="e4b7a-267">If the FTP Client makes a write request in the passive transfer mode, the command sequence is as follows (**bolded** lines indicates a different step from active transfer mode):</span></span>

1. <span data-ttu-id="e4b7a-268">El cliente emite una conexión TCP al puerto 21 del servidor.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-268">Client issues TCP connect to Server port 21.</span></span>
1. <span data-ttu-id="e4b7a-269">El servidor envía la respuesta “220” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-269">Server sends “220” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-270">El cliente envía el mensaje “USER” con el “nombre de usuario”.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-270">Client sends “USER” message with “username.”</span></span>
1. <span data-ttu-id="e4b7a-271">El servidor envía la respuesta “331” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-271">Server sends “331” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-272">El cliente envía el mensaje “PASS” con la “contraseña”.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-272">Client sends “PASS” message with “password.”</span></span>
1. <span data-ttu-id="e4b7a-273">El servidor envía la respuesta “230” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-273">Server sends “230” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-274">El cliente envía el mensaje “TYPE I” para la transferencia binaria.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-274">Client sends “TYPE I” message for binary transfer.</span></span>
1. <span data-ttu-id="e4b7a-275">El servidor envía la respuesta “200” para indicar que la operación es correcta.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-275">Server sends “200” response to signal success.</span></span>
1. <span data-ttu-id="e4b7a-276">***Aplicaciones IPv4:* el cliente envía el mensaje “PASV”.**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-276">***IPv4 applications:* Client sends “PASV” message.**</span></span><br /><span data-ttu-id="e4b7a-277">**_Aplicaciones IPv6:_ el cliente envía el mensaje “EPSV”.**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-277">**_IPv6 applications:_ Client sends “EPSV” message.**</span></span>
1. <span data-ttu-id="e4b7a-278">***Aplicaciones IPv4:* el servidor envía la respuesta “227”, la dirección IP y el puerto para el cliente al que se va a conectar para indicar que la operación es correcta.**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-278">***IPv4 applications:* Server sends “227” response, and IP address and port for the Client to connect to, to signal success.**</span></span><br /><span data-ttu-id="e4b7a-279">**_Aplicaciones IPv6:_ el servidor envía la respuesta “229”, la dirección IP y el puerto para el cliente al que se va a conectar para indicar que la operación es correcta.**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-279">**_IPv6 applications:_ Server sends “229” response, and IP address and port for the Client to connect to, to signal success.**</span></span>
1. <span data-ttu-id="e4b7a-280">El cliente envía el mensaje “STOR” con el nombre de archivo que se va a escribir.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-280">Client sends “STOR” message with file name to write.</span></span>
1. <span data-ttu-id="e4b7a-281">**El servidor crea un socket de servidor de datos y realiza escuchas para la solicitud de conexión de cliente en este socket utilizando el puerto especificado en la respuesta en el paso 10.**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-281">**Server creates data server socket and listens for the Client connect request on this socket using the port specified in the response in step 10.**</span></span>
1. <span data-ttu-id="e4b7a-282">**El servidor envía la respuesta “150” en el socket de control para indicar que la escritura en el archivo se ha iniciado.**</span><span class="sxs-lookup"><span data-stu-id="e4b7a-282">**Server sends “150” response on the control socket to signal file write has started.**</span></span>
1. <span data-ttu-id="e4b7a-283">El cliente envía el contenido del archivo a través de la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-283">Client sends contents of file through the data connection.</span></span> <span data-ttu-id="e4b7a-284">Este proceso continúa hasta que el archivo se haya transferido por completo.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-284">This process continues until file is completely transferred.</span></span>
1. <span data-ttu-id="e4b7a-285">Cuando termina, el cliente desconecta la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-285">When finished, Client disconnects data connection.</span></span>
1. <span data-ttu-id="e4b7a-286">**El servidor envía la respuesta “226” en el socket de control para indicar que la escritura del archivo se ha completado**.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-286">**Server sends “226” response on the control socket to signal file write is successful.**</span></span>
1. <span data-ttu-id="e4b7a-287">El cliente envía “QUIT” para finalizar la conexión FTP.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-287">Client sends “QUIT” to terminate FTP connection.</span></span>
1. <span data-ttu-id="e4b7a-288">El servidor envía la respuesta “221” para indicar que la desconexión se ha realizado correctamente.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-288">Server sends “221” response to signal disconnect is successful.</span></span>
1. <span data-ttu-id="e4b7a-289">El servidor desconecta la conexión FTP.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-289">Server disconnects FTP connection.</span></span>

## <a name="ftp-authentication"></a><span data-ttu-id="e4b7a-290">FTP Authentication</span><span class="sxs-lookup"><span data-stu-id="e4b7a-290">FTP Authentication</span></span>

<span data-ttu-id="e4b7a-291">Cada vez que se realiza una conexión FTP, el cliente debe proporcionar al servidor un *nombre de usuario* y una *contraseña*.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-291">Whenever an FTP connection takes place, the Client must provide the Server with a *username* and *password*.</span></span> <span data-ttu-id="e4b7a-292">Algunos sitios FTP permiten lo que se denomina *FTP anónimo*, que permite el acceso FTP sin un nombre de usuario ni una contraseña específicos.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-292">Some FTP sites allow what is called *Anonymous FTP*, which allows FTP access without a specific username and password.</span></span> <span data-ttu-id="e4b7a-293">Para este tipo de conexión, se debe proporcionar “anonymous” para el nombre de usuario y la contraseña debe ser una dirección de correo electrónico completa.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-293">For this type of connection, “anonymous” should be supplied for username and the password should be a complete e-mail address.</span></span>

<span data-ttu-id="e4b7a-294">El usuario es responsable de proporcionar al FTP de NetX las rutinas de autenticación de inicio y cierre de sesión.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-294">The user is responsible for supplying NetX FTP with login and logout authentication routines.</span></span> <span data-ttu-id="e4b7a-295">Estas se proporcionan durante los servicios ***nxd_ftp_server_create** _ y _*_nx_ftp_server_create_\*_ y se las llama desde el procesamiento de contraseñas.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-295">These are supplied during the ***nxd_ftp_server_create** _ and _*_nx_ftp_server_create_\*_ services and called from the password processing.</span></span> <span data-ttu-id="e4b7a-296">La diferencia entre las dos es que los punteros de la función de entrada _*_nxd_ftp_server_create_*_ a las funciones de autenticación de inicio y cierre de sesión esperan el tipo de dirección de NetX Duo _*_NXD_ADDRESS_*_.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-296">The difference between the two is the _*_nxd_ftp_server_create_*_ input function pointers to login and logout authenticate functions expect the NetX Duo address type _*_NXD_ADDRESS_*_.</span></span> <span data-ttu-id="e4b7a-297">Este tipo de datos contiene los formatos de dirección IPv4 o IPv6, lo que convierte a esta función en el servicio “dúo” que admite redes IPv4 e IPv6.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-297">This data type holds both IPv4 or IPv6 address formats, making this function the “duo” service supporting both IPv4 and IPv6 networks.</span></span> <span data-ttu-id="e4b7a-298">Los punteros de función de entrada _ *_nx_ftp_server_create_*\* a las funciones de autenticación de inicio y cierre de sesión esperan el tipo de dirección IP ULONG.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-298">The _ *_nx_ftp_server_create_*\* input function pointers to login and logout authenticate functions expect ULONG IP address type.</span></span> <span data-ttu-id="e4b7a-299">Esta función está limitada a las redes IPv4.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-299">This function is limited to IPv4 networks.</span></span> <span data-ttu-id="e4b7a-300">Se recomienda al desarrollador que use el servicio “dúo” siempre que sea posible.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-300">The developer is encouraged to use the “duo” service whenever possible.</span></span>

<span data-ttu-id="e4b7a-301">Si la función *inicio de sesión* devuelve NX_SUCCESS, la conexión se autentica y se permiten las operaciones FTP.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-301">If the *login* function returns NX_SUCCESS, the connection is authenticated and FTP operations are allowed.</span></span> <span data-ttu-id="e4b7a-302">De lo contrario, si la función de *inicio de sesión* devuelve un valor distinto de NX_SUCCESS, se rechazará el intento de conexión.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-302">Otherwise, if the *login* function returns something other than NX_SUCCESS, the connection attempt is rejected.</span></span>

## <a name="ftp-multi-thread-support"></a><span data-ttu-id="e4b7a-303">Compatibilidad con varios subprocesos FTP</span><span class="sxs-lookup"><span data-stu-id="e4b7a-303">FTP Multi-Thread Support</span></span>

<span data-ttu-id="e4b7a-304">Se puede llamar a los servicios de cliente FTP de NetX desde varios subprocesos simultáneamente.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-304">The NetX FTP Client services can be called from multiple threads simultaneously.</span></span> <span data-ttu-id="e4b7a-305">Sin embargo, las solicitudes de lectura o escritura de una determinada instancia de cliente FTP deben realizarse en secuencia desde el mismo subproceso.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-305">However, read or write requests for a particular FTP Client instance should be done in sequence from the same thread.</span></span>

## <a name="ftp-rfcs"></a><span data-ttu-id="e4b7a-306">Publicaciones RFC para FTP</span><span class="sxs-lookup"><span data-stu-id="e4b7a-306">FTP RFCs</span></span>

<span data-ttu-id="e4b7a-307">FTP de NetX Duo es compatible con RFC 959, RFC 2428 y publicaciones RFC relacionadas.</span><span class="sxs-lookup"><span data-stu-id="e4b7a-307">NetX Duo FTP is compliant with RFC 959, RFC 2428 and related RFCs.</span></span>

---
title: 'Capítulo 2: Instalación y uso del cliente LWM2M de NetX Duo para RTOS'
description: En este capítulo se explica cómo instalar y usar el cliente LWM2M de NetX Duo para RTOS.
author: v-condav
ms.author: v-condav
ms.date: 01/22/2021
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 536225de30f54356157c222917fc904c6aa039fe
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/22/2021
ms.locfileid: "104814686"
---
# <a name="chapter-2--installation-and-use-of-lwm2m-client"></a><span data-ttu-id="0cea4-103">Capítulo 2: Instalación y uso del cliente LWM2M</span><span class="sxs-lookup"><span data-stu-id="0cea4-103">Chapter 2  Installation and Use of LWM2M Client</span></span>

<span data-ttu-id="0cea4-104">Este capítulo contiene una descripción de varios problemas relacionados con la instalación, la configuración y el uso del componente cliente LWM2M.</span><span class="sxs-lookup"><span data-stu-id="0cea4-104">This chapter contains a description of various issues related to installation, setup, and usage of the LWM2M Client component.</span></span>

## <a name="product-distribution"></a><span data-ttu-id="0cea4-105">Distribución del producto</span><span class="sxs-lookup"><span data-stu-id="0cea4-105">Product Distribution</span></span>

<span data-ttu-id="0cea4-106">El cliente LWM2M para Azure RTOS se puede obtener de nuestro repositorio de código fuente público en [https://github.com/azure-rtos/netxduo/tree/master/addons/lwm2m](https://github.com/azure-rtos/netxduo/tree/master/addons/lwm2m/).</span><span class="sxs-lookup"><span data-stu-id="0cea4-106">Azure RTOS LWM2M Client can be obtained from our public source code repository at [https://github.com/azure-rtos/netxduo/tree/master/addons/lwm2m](https://github.com/azure-rtos/netxduo/tree/master/addons/lwm2m/).</span></span> <span data-ttu-id="0cea4-107">El paquete incluye tres archivos de origen, uno de los archivos de inclusión, como se indica a continuación.</span><span class="sxs-lookup"><span data-stu-id="0cea4-107">The package includes three source files, one include files, as follows.</span></span>

* <span data-ttu-id="0cea4-108">**nx\_lwm2m\_client.h** Archivo de encabezado del cliente LWM2M</span><span class="sxs-lookup"><span data-stu-id="0cea4-108">**nx\_lwm2m\_client.h** Header file for the LWM2M Client</span></span>

* <span data-ttu-id="0cea4-109">**nx\_lwm2m\_client.c** Archivos de origen de C para el cliente LWM2M</span><span class="sxs-lookup"><span data-stu-id="0cea4-109">**nx\_lwm2m\_client.c** C Source files for LWM2M Client</span></span>

* <span data-ttu-id="0cea4-110">**demo\_netx\_lwm2m\_client.c** Archivo de origen de C de la demostración de cliente LWM2M</span><span class="sxs-lookup"><span data-stu-id="0cea4-110">**demo\_netx\_lwm2m\_client.c** C Source file for LWM2M Client Demo</span></span>

## <a name="lwm2m-client-installation"></a><span data-ttu-id="0cea4-111">Instalación de cliente LWM2M</span><span class="sxs-lookup"><span data-stu-id="0cea4-111">LWM2M Client Installation</span></span>

<span data-ttu-id="0cea4-112">El cliente LWM2M forma parte de NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="0cea4-112">The LWM2M Client is part of NetX Duo.</span></span> <span data-ttu-id="0cea4-113">Por lo tanto, después de clonar NetX Duo desde el repositorio de GitHub, se puede encontrar el origen del cliente LWM2M en ***netxduo/addons/LWM2M***.</span><span class="sxs-lookup"><span data-stu-id="0cea4-113">Therefore, after cloning NetX Duo from the GitHub repository, LWM2M client source can be found at ***netxduo/addons/lwm2m***.</span></span>

## <a name="using-lwm2m_client"></a><span data-ttu-id="0cea4-114">Uso del cliente LWM2M</span><span class="sxs-lookup"><span data-stu-id="0cea4-114">Using LWM2M\_Client</span></span>

<span data-ttu-id="0cea4-115">El uso del cliente LWM2M es sencillo.</span><span class="sxs-lookup"><span data-stu-id="0cea4-115">Using LWM2M Client is straightforward.</span></span> <span data-ttu-id="0cea4-116">Básicamente, el código de la aplicación debe incluir ***nx\_lwm2m\_client.h\**después de incluir*_tx\_api.h_*y*_nx\_api.h_ *, con el fin de usar ThreadX y NetX. Una vez que se incluye* _nx\_lwm2m\_client.h_ *, el código de aplicación puede realizar las llamadas de función del cliente LWM2M especificadas más adelante en esta guía. La aplicación también debe importar los archivos* nx\_lwm2m\_client\_.\**** en la biblioteca NetX.</span><span class="sxs-lookup"><span data-stu-id="0cea4-116">Basically, the application code must include ***nx\_lwm2m\_client.h\*\*_ after it includes _*_tx\_api.h_*_ and _*_nx\_api.h_*_, in order to use ThreadX and NetX. Once _*_nx\_lwm2m\_client.h_*_ is included, the application code is then able to make the LWM2M Client function calls specified later in this guide. The application must also import the _* _nx\_lwm2m\_client\_.\***\* files into the NetX library.</span></span>

## <a name="configuration-options"></a><span data-ttu-id="0cea4-117">Opciones de configuración</span><span class="sxs-lookup"><span data-stu-id="0cea4-117">Configuration Options</span></span>

<span data-ttu-id="0cea4-118">Hay varias opciones de configuración al compilar la biblioteca cliente LWM2M y la aplicación mediante el cliente LWM2M.</span><span class="sxs-lookup"><span data-stu-id="0cea4-118">There are several configuration options when building the LWM2M Client library and the application using the LWM2M Client.</span></span> <span data-ttu-id="0cea4-119">Las opciones de configuración pueden definirse en el origen de la aplicación, en la línea de comandos, a menos que se especifique lo contrario.</span><span class="sxs-lookup"><span data-stu-id="0cea4-119">The configuration options can be defined in the application source, on the command line, unless otherwise specified.</span></span>

| <span data-ttu-id="0cea4-120">Opción de configuración</span><span class="sxs-lookup"><span data-stu-id="0cea4-120">Configuration&nbsp;Option</span></span> | <span data-ttu-id="0cea4-121">Descripción</span><span class="sxs-lookup"><span data-stu-id="0cea4-121">Description</span></span> |
| --- | --- |
| <span data-ttu-id="0cea4-122">**NX\_LWM2M\_CLIENT\_MTU**</span><span class="sxs-lookup"><span data-stu-id="0cea4-122">**NX\_LWM2M\_CLIENT\_MTU**</span></span> | <span data-ttu-id="0cea4-123">Especifica el tamaño máximo de un mensaje CoAP, incluidos los encabezados IP y UDP.</span><span class="sxs-lookup"><span data-stu-id="0cea4-123">Specifies the maximum size of a CoAP message, including IP and UDP headers.</span></span> <span data-ttu-id="0cea4-124">El valor predeterminado es 1280.</span><span class="sxs-lookup"><span data-stu-id="0cea4-124">The default value is 1280.</span></span> |
| <span data-ttu-id="0cea4-125">**NX\_LWM2M\_CLIENT\_SOCKET\_TOS**</span><span class="sxs-lookup"><span data-stu-id="0cea4-125">**NX\_LWM2M\_CLIENT\_SOCKET\_TOS**</span></span> | <span data-ttu-id="0cea4-126">Tipo de servicio necesario para el UDP de LwM2M.</span><span class="sxs-lookup"><span data-stu-id="0cea4-126">Type of service required for the LwM2M UDP.</span></span> <span data-ttu-id="0cea4-127">De forma predeterminada, este valor se define como NX\_IP\_NORMAL para indicar el servicio de paquetes IP normal.</span><span class="sxs-lookup"><span data-stu-id="0cea4-127">By default, this value is defined as NX\_IP\_NORMAL to indicate normal IP packet service.</span></span> |
| <span data-ttu-id="0cea4-128">**NX\_LWM2M\_CLIENT\_SOCKET\_TTL**</span><span class="sxs-lookup"><span data-stu-id="0cea4-128">**NX\_LWM2M\_CLIENT\_SOCKET\_TTL**</span></span> | <span data-ttu-id="0cea4-129">Especifica el número de enrutadores que este paquete puede pasar antes de que se descarte.</span><span class="sxs-lookup"><span data-stu-id="0cea4-129">Specifies the number of routers this packet can pass before it is discarded.</span></span> <span data-ttu-id="0cea4-130">El valor predeterminado se define en 0x80.</span><span class="sxs-lookup"><span data-stu-id="0cea4-130">The default value is set to 0x80.</span></span> |
| <span data-ttu-id="0cea4-131">**NX\_LWM2M\_CLIENT\_SOCKET\_QUEUE\_MAX**</span><span class="sxs-lookup"><span data-stu-id="0cea4-131">**NX\_LWM2M\_CLIENT\_SOCKET\_QUEUE\_MAX**</span></span> | <span data-ttu-id="0cea4-132">Especifica el número máximo de profundidades de la cola de recepción.</span><span class="sxs-lookup"><span data-stu-id="0cea4-132">Specifies the number of maximum depths of receive queue.</span></span> <span data-ttu-id="0cea4-133">El valor predeterminado se establece en 4.</span><span class="sxs-lookup"><span data-stu-id="0cea4-133">The default value is set to 4.</span></span> |
| <span data-ttu-id="0cea4-134">**NX\_LWM2M\_CLIENT\_MAX\_COAP\_URI\_PATH**</span><span class="sxs-lookup"><span data-stu-id="0cea4-134">**NX\_LWM2M\_CLIENT\_MAX\_COAP\_URI\_PATH**</span></span> | <span data-ttu-id="0cea4-135">Especifica el número máximo de longitudes de la opción CoAP Uri-Path.</span><span class="sxs-lookup"><span data-stu-id="0cea4-135">Specifies the number of maximum lengths of the CoAP Uri-Path option.</span></span> <span data-ttu-id="0cea4-136">El valor predeterminado se establece en 32.</span><span class="sxs-lookup"><span data-stu-id="0cea4-136">The default value is set to 32.</span></span> |
| <span data-ttu-id="0cea4-137">**NX\_LWM2M\_CLIENT\_MAX\_DEVICE\_ERRORS**</span><span class="sxs-lookup"><span data-stu-id="0cea4-137">**NX\_LWM2M\_CLIENT\_MAX\_DEVICE\_ERRORS**</span></span> | <span data-ttu-id="0cea4-138">Especifica el número máximo de códigos de error almacenados por el objeto de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0cea4-138">Specifies the maximum number of error codes stored by the Device Object.</span></span> <span data-ttu-id="0cea4-139">El valor predeterminado es 8.</span><span class="sxs-lookup"><span data-stu-id="0cea4-139">The default value is 8.</span></span> |
| <span data-ttu-id="0cea4-140">**NX\_LWM2M\_CLIENT\_MAX\_SECURITY\_INSTANCES**</span><span class="sxs-lookup"><span data-stu-id="0cea4-140">**NX\_LWM2M\_CLIENT\_MAX\_SECURITY\_INSTANCES**</span></span> | <span data-ttu-id="0cea4-141">Especifica el número máximo de instancias de objeto de seguridad.</span><span class="sxs-lookup"><span data-stu-id="0cea4-141">Specifies the maximum number of Security Object Instances.</span></span> <span data-ttu-id="0cea4-142">El valor predeterminado es 2 para admitir un servidor de arranque y un servidor estándar.</span><span class="sxs-lookup"><span data-stu-id="0cea4-142">The default value is 2 for supporting a Bootstrap Server and a standard Server.</span></span> |
| <span data-ttu-id="0cea4-143">**NX\_LWM2M\_CLIENT\_MAX\_SERVER\_INSTANCES**</span><span class="sxs-lookup"><span data-stu-id="0cea4-143">**NX\_LWM2M\_CLIENT\_MAX\_SERVER\_INSTANCES**</span></span> | <span data-ttu-id="0cea4-144">Especifica el número máximo de instancias de objeto de servidor.</span><span class="sxs-lookup"><span data-stu-id="0cea4-144">Specifies the maximum number of Server Object Instances.</span></span> <span data-ttu-id="0cea4-145">El valor predeterminado es 1 para admitir un solo servidor estándar.</span><span class="sxs-lookup"><span data-stu-id="0cea4-145">The default value is 1 for supporting a single standard Server.</span></span> |
| <span data-ttu-id="0cea4-146">**NX\_LWM2M\_CLIENT\_MAX\_ACCESS\_CONTROL\_INSTANCES**</span><span class="sxs-lookup"><span data-stu-id="0cea4-146">**NX\_LWM2M\_CLIENT\_MAX\_ACCESS\_CONTROL\_INSTANCES**</span></span> | <span data-ttu-id="0cea4-147">Especifica el número máximo de instancias de Access Control.</span><span class="sxs-lookup"><span data-stu-id="0cea4-147">Specifies the maximum number of Access Control Instances.</span></span> <span data-ttu-id="0cea4-148">El valor predeterminado es 0, que deshabilita el control de acceso.</span><span class="sxs-lookup"><span data-stu-id="0cea4-148">The default value is 0, which disables access control.</span></span> <span data-ttu-id="0cea4-149">Si la aplicación admite más de un servidor LWM2M, el número máximo de instancias de Access Control debe establecerse en el número máximo de instancias de objeto que admitirá el cliente LWM2M, ya que se debe crear una instancia de Access Control para cada instancia de objeto (excepto las instancias de objeto de seguridad).</span><span class="sxs-lookup"><span data-stu-id="0cea4-149">If the application supports more than one LWM2M Server, the maximum number of Access Control Instances must be set to the maximum number of Object Instances that the LWM2M Client will support, as one Access Control Instance must be created for each Object Instance (except for the Security Object Instances).</span></span> |
| <span data-ttu-id="0cea4-150">**NX\_LWM2M\_CLIENT\_MAX\_ACCESS\_CONTROL\_ACLS**</span><span class="sxs-lookup"><span data-stu-id="0cea4-150">**NX\_LWM2M\_CLIENT\_MAX\_ACCESS\_CONTROL\_ACLS**</span></span> | <span data-ttu-id="0cea4-151">Especifica el número máximo de recursos de ACL por instancia de Access Control.</span><span class="sxs-lookup"><span data-stu-id="0cea4-151">Specifies the maximum number of ACL resources per Access Control Instance.</span></span> <span data-ttu-id="0cea4-152">El valor predeterminado es 4.</span><span class="sxs-lookup"><span data-stu-id="0cea4-152">The default value is 4.</span></span> |
| <span data-ttu-id="0cea4-153">**NX\_LWM2M\_CLIENT\_MAX\_NOTIFICATIONS**</span><span class="sxs-lookup"><span data-stu-id="0cea4-153">**NX\_LWM2M\_CLIENT\_MAX\_NOTIFICATIONS**</span></span> | <span data-ttu-id="0cea4-154">Especifica el número máximo de notificaciones que admitirá el cliente LWM2M.</span><span class="sxs-lookup"><span data-stu-id="0cea4-154">Specifies the maximum number of notifications that the LWM2M Client will support.</span></span> <span data-ttu-id="0cea4-155">Un servidor LWM2M puede establecer notificaciones en objetos, instancias de objeto y recursos.</span><span class="sxs-lookup"><span data-stu-id="0cea4-155">A LWM2M Server can set notifications on Objects, Object Instances, and Resources.</span></span> <span data-ttu-id="0cea4-156">El valor predeterminado es 8.</span><span class="sxs-lookup"><span data-stu-id="0cea4-156">The default value is 8.</span></span> |
| <span data-ttu-id="0cea4-157">**NX\_LWM2M\_CLIENT\_MAX\_RESOURCES**</span><span class="sxs-lookup"><span data-stu-id="0cea4-157">**NX\_LWM2M\_CLIENT\_MAX\_RESOURCES**</span></span> | <span data-ttu-id="0cea4-158">Especifica el número máximo de recursos por objeto.</span><span class="sxs-lookup"><span data-stu-id="0cea4-158">Specifies the maximum number of Resources per Object.</span></span> <span data-ttu-id="0cea4-159">El valor predeterminado es 32.</span><span class="sxs-lookup"><span data-stu-id="0cea4-159">The default value is 32.</span></span> |
| <span data-ttu-id="0cea4-160">**NX\_LWM2M\_CLIENT\_MAX\_MULTIPLE\_RESOURCES**</span><span class="sxs-lookup"><span data-stu-id="0cea4-160">**NX\_LWM2M\_CLIENT\_MAX\_MULTIPLE\_RESOURCES**</span></span> | <span data-ttu-id="0cea4-161">Especifica el número máximo de instancias de recursos para varios recursos.</span><span class="sxs-lookup"><span data-stu-id="0cea4-161">Specifies the maximum number of Resources instances for multiple resource.</span></span> <span data-ttu-id="0cea4-162">El valor predeterminado es 8.</span><span class="sxs-lookup"><span data-stu-id="0cea4-162">The default value is 8.</span></span> |
| <span data-ttu-id="0cea4-163">**NX\_LWM2M\_CLIENT\_BOOTSTRAP\_IDLE\_TIMER**</span><span class="sxs-lookup"><span data-stu-id="0cea4-163">**NX\_LWM2M\_CLIENT\_BOOTSTRAP\_IDLE\_TIMER**</span></span> | <span data-ttu-id="0cea4-164">Especifica el tiempo máximo de espera para las solicitudes del servidor de arranque cuando se inicia la sesión de arranque antes de anular la sesión.</span><span class="sxs-lookup"><span data-stu-id="0cea4-164">Specifies the maximum time to wait for bootstrap server requests when the bootstrap session is initiated before aborting the session.</span></span> <span data-ttu-id="0cea4-165">El valor predeterminado es de 60 segundos.</span><span class="sxs-lookup"><span data-stu-id="0cea4-165">The default value is 60 seconds.</span></span> |
| <span data-ttu-id="0cea4-166">**NX\_LWM2M\_CLIENT\_DTLS\_START\_TIMEOUT**</span><span class="sxs-lookup"><span data-stu-id="0cea4-166">**NX\_LWM2M\_CLIENT\_DTLS\_START\_TIMEOUT**</span></span> | <span data-ttu-id="0cea4-167">Especifica el tiempo máximo de espera para la finalización del protocolo de enlace de DTLS.</span><span class="sxs-lookup"><span data-stu-id="0cea4-167">Specifies the maximum time to wait for DTLS handshake completion.</span></span> <span data-ttu-id="0cea4-168">El valor predeterminado es 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="0cea4-168">The default value is 30 seconds.</span></span> |
| <span data-ttu-id="0cea4-169">**NX\_LWM2M\_CLIENT\_DTLS\_END\_TIMEOUT**</span><span class="sxs-lookup"><span data-stu-id="0cea4-169">**NX\_LWM2M\_CLIENT\_DTLS\_END\_TIMEOUT**</span></span> | <span data-ttu-id="0cea4-170">Especifica el tiempo máximo de espera para que se complete el apagado de DTLS.</span><span class="sxs-lookup"><span data-stu-id="0cea4-170">Specifies the maximum time to wait for DTLS shutdown completion.</span></span> <span data-ttu-id="0cea4-171">El valor predeterminado es de 5 segundos.</span><span class="sxs-lookup"><span data-stu-id="0cea4-171">The default value is 5 seconds.</span></span> |
| <span data-ttu-id="0cea4-172">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_SERVER\_URI**</span><span class="sxs-lookup"><span data-stu-id="0cea4-172">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_SERVER\_URI**</span></span> | <span data-ttu-id="0cea4-173">Especifica la longitud máxima de un URI de servidor, incluido el carácter nulo de terminación.</span><span class="sxs-lookup"><span data-stu-id="0cea4-173">Specifies the maximum length of a server URI, including terminating null character.</span></span> <span data-ttu-id="0cea4-174">El valor predeterminado es 128.</span><span class="sxs-lookup"><span data-stu-id="0cea4-174">The default value is 128.</span></span> |
| <span data-ttu-id="0cea4-175">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_PUBLIC\_KEY\_OR\_IDENTITY**</span><span class="sxs-lookup"><span data-stu-id="0cea4-175">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_PUBLIC\_KEY\_OR\_IDENTITY**</span></span> | <span data-ttu-id="0cea4-176">Especifica la longitud máxima de la clave pública o la identidad de DTLS.</span><span class="sxs-lookup"><span data-stu-id="0cea4-176">Specifies the maximum length of the public key or identity for DTLS.</span></span> <span data-ttu-id="0cea4-177">El valor predeterminado es 128.</span><span class="sxs-lookup"><span data-stu-id="0cea4-177">The default value is 128.</span></span> |
| <span data-ttu-id="0cea4-178">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_SERVER\_PUBLIC\_KEY**</span><span class="sxs-lookup"><span data-stu-id="0cea4-178">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_SERVER\_PUBLIC\_KEY**</span></span> | <span data-ttu-id="0cea4-179">Especifica la longitud máxima de la clave pública del servidor de DTLS.</span><span class="sxs-lookup"><span data-stu-id="0cea4-179">Specifies the maximum length of the server public key for DTLS.</span></span> <span data-ttu-id="0cea4-180">El valor predeterminado es 128.</span><span class="sxs-lookup"><span data-stu-id="0cea4-180">The default value is 128.</span></span> |
| <span data-ttu-id="0cea4-181">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_SECRET\_KEY**</span><span class="sxs-lookup"><span data-stu-id="0cea4-181">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_SECRET\_KEY**</span></span> | <span data-ttu-id="0cea4-182">Especifica la longitud máxima de la clave secreta de DTLS.</span><span class="sxs-lookup"><span data-stu-id="0cea4-182">Specifies the maximum length of the secret key for DTLS.</span></span> <span data-ttu-id="0cea4-183">El valor predeterminado es 128.</span><span class="sxs-lookup"><span data-stu-id="0cea4-183">The default value is 128.</span></span> |
| <span data-ttu-id="0cea4-184">**NX\_LWM2M\_CLIENT\_HOLD\_OFF**</span><span class="sxs-lookup"><span data-stu-id="0cea4-184">**NX\_LWM2M\_CLIENT\_HOLD\_OFF**</span></span> | <span data-ttu-id="0cea4-185">Especifica el número de segundos que se espera antes de que se inicie el arranque.</span><span class="sxs-lookup"><span data-stu-id="0cea4-185">Specifies the number of seconds to wait before initiating bootstrap.</span></span> <span data-ttu-id="0cea4-186">El valor predeterminado es 1 segundo.</span><span class="sxs-lookup"><span data-stu-id="0cea4-186">The default value is 1 second.</span></span> |
| <span data-ttu-id="0cea4-187">**NX\_LWM2M\_CLIENT\_LIFE\_TIME**</span><span class="sxs-lookup"><span data-stu-id="0cea4-187">**NX\_LWM2M\_CLIENT\_LIFE\_TIME**</span></span> | <span data-ttu-id="0cea4-188">Especifica el número de segundos para la duración del registro.</span><span class="sxs-lookup"><span data-stu-id="0cea4-188">Specifies the number of seconds for the registration lifetime.</span></span> <span data-ttu-id="0cea4-189">El valor predeterminado es 600 segundos.</span><span class="sxs-lookup"><span data-stu-id="0cea4-189">The default value is 600 seconds.</span></span> |

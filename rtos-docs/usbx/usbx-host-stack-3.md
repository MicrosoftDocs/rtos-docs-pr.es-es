---
title: 'Capítulo 3: Componentes funcionales de la pila del host USBX'
description: Este capítulo contiene una descripción de la pila de host USB insertada de USBX de alto rendimiento desde una perspectiva funcional.
author: philmea
ms.author: philmea
ms.date: 5/19/2020
ms.service: rtos
ms.topic: article
ms.openlocfilehash: 17b8d884dd2c71d60e91f5fcec40c360060f4fe8
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/22/2021
ms.locfileid: "104816298"
---
# <a name="chapter-3---functional-components-of-usbx-host-stack"></a><span data-ttu-id="8dcc1-103">Capítulo 3: Componentes funcionales de la pila del host USBX</span><span class="sxs-lookup"><span data-stu-id="8dcc1-103">Chapter 3 - Functional Components of USBX Host Stack</span></span>

<span data-ttu-id="8dcc1-104">Este capítulo contiene una descripción de la pila de host USB insertada de USBX de alto rendimiento desde una perspectiva funcional.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-104">This chapter contains a description of the high performance USBX embedded USB host stack from a functional perspective.</span></span>

## <a name="execution-overview"></a><span data-ttu-id="8dcc1-105">Información general sobre la ejecución</span><span class="sxs-lookup"><span data-stu-id="8dcc1-105">Execution Overview</span></span>

<span data-ttu-id="8dcc1-106">USBX se compone de varios componentes:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-106">USBX is composed of several components:</span></span>

- <span data-ttu-id="8dcc1-107">Inicialización</span><span class="sxs-lookup"><span data-stu-id="8dcc1-107">Initialization</span></span>
- <span data-ttu-id="8dcc1-108">Llamadas a la interfaz de la aplicación</span><span class="sxs-lookup"><span data-stu-id="8dcc1-108">Application interface calls</span></span>
- <span data-ttu-id="8dcc1-109">Concentrador raíz</span><span class="sxs-lookup"><span data-stu-id="8dcc1-109">Root Hub</span></span>
- <span data-ttu-id="8dcc1-110">Clase de concentrador</span><span class="sxs-lookup"><span data-stu-id="8dcc1-110">Hub Class</span></span>
- <span data-ttu-id="8dcc1-111">Clases de host</span><span class="sxs-lookup"><span data-stu-id="8dcc1-111">Host Classes</span></span>
- <span data-ttu-id="8dcc1-112">Pila de host USB</span><span class="sxs-lookup"><span data-stu-id="8dcc1-112">USB Host Stack</span></span>
- <span data-ttu-id="8dcc1-113">Controladora de host</span><span class="sxs-lookup"><span data-stu-id="8dcc1-113">Host controller</span></span>

<span data-ttu-id="8dcc1-114">En el siguiente diagrama se ilustra la pila de host de USBX:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-114">The following diagram illustrates the USBX host stack.</span></span>

![Pila de host de USBX](./media/usbx-host-stack/usbx-host-stack.png)

### <a name="initialization"></a><span data-ttu-id="8dcc1-116">Inicialización</span><span class="sxs-lookup"><span data-stu-id="8dcc1-116">Initialization</span></span>

<span data-ttu-id="8dcc1-117">Para activar USBX, se debe llamar a la función ***ux_system_initialize***.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-117">In order to activate USBX, the function ***ux_system_initialize*** must be called.</span></span> <span data-ttu-id="8dcc1-118">Esta función inicializa los recursos de memoria de USBX.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-118">This function initializes the memory resources of USBX.</span></span>

<span data-ttu-id="8dcc1-119">Para activar las instalaciones del host de USBX, se debe llamar a la función ***ux_host_stack_initialize***.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-119">In order to activate USBX host facilities, the function ***ux_host_stack_initialize*** must be called.</span></span> <span data-ttu-id="8dcc1-120">Esta función, a su vez, inicializará todos los recursos usados por la pila de host de USBX, como subprocesos de ThreadX, exclusiones mutuas y semáforos.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-120">This function will in turn initialize all the resources used by the USBX host stack such as ThreadX threads, mutexes, and semaphores.</span></span>

<span data-ttu-id="8dcc1-121">Depende de la inicialización de la aplicación activar al menos un controladora de host USB y una o varias clases USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-121">It is up to the application initialization to activate at least one USB host controller and one or more USB classes.</span></span> <span data-ttu-id="8dcc1-122">Cuando las clases se han registrado en la pila y se ha llamado a la función de inicialización de controladora de host, el bus está activo y se puede iniciar la detección de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-122">When the classes have been registered to the stack and the host controller(s) initialization function has been called the bus is active and device discovery can start.</span></span> <span data-ttu-id="8dcc1-123">Si el concentrador raíz del controladora de host detecta un dispositivo conectado, el subproceso de enumeración USB a cargo de la topología USB se reactivará y continuará con la enumeración de los dispositivos.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-123">If the root hub of the host controller detects an attached device, the USB enumeration thread, in charge of the USB topology, will be wake up and proceed to enumerate the device(s).</span></span>

<span data-ttu-id="8dcc1-124">Debido a la naturaleza de los concentradores raíz y de nivel inferior, es posible que no todos los dispositivos USB conectados se hayan configurado completamente cuando se devuelva la función de inicialización del controlador host.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-124">It is possible, due to the nature of the root hub and downstream hubs, that all attached USB devices may not have been configured completely when the host controller initialization function returns.</span></span> <span data-ttu-id="8dcc1-125">La enumeración de todos los dispositivos USB puede tardar varios segundos, especialmente si hay uno o más concentradores entre el concentrador raíz y los dispositivos USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-125">It can take several seconds to enumerate all USB devices, especially if there are one or more hubs between the root hub and USB devices.</span></span>

### <a name="application-interface-calls"></a><span data-ttu-id="8dcc1-126">Llamadas a la interfaz de la aplicación</span><span class="sxs-lookup"><span data-stu-id="8dcc1-126">Application Interface Calls</span></span>

<span data-ttu-id="8dcc1-127">Hay dos niveles de API en USBX:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-127">There are two levels of APIs in USBX.</span></span>

- <span data-ttu-id="8dcc1-128">API de pila de host USB</span><span class="sxs-lookup"><span data-stu-id="8dcc1-128">USB Host Stack APIs</span></span>
- <span data-ttu-id="8dcc1-129">API de clase de host USB</span><span class="sxs-lookup"><span data-stu-id="8dcc1-129">USB Host Class APIs</span></span>

<span data-ttu-id="8dcc1-130">Normalmente, una aplicación de USBX no debe tener que llamar a ninguna de las funciones de la API de pila de host USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-130">Normally, a USBX application should not have to call any of the USB host stack API functions.</span></span> <span data-ttu-id="8dcc1-131">La mayoría de las aplicaciones solo tendrán acceso a las funciones de la API de clase USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-131">Most applications will only access the USB Class API functions.</span></span>

### <a name="usb-host-stack-apis"></a><span data-ttu-id="8dcc1-132">API de pila de host USB</span><span class="sxs-lookup"><span data-stu-id="8dcc1-132">USB Host Stack APIs</span></span>

<span data-ttu-id="8dcc1-133">Las funciones de la API de pila de host son las responsables del registro de los componentes de USBX (clases de host y controladores de host), la configuración de los dispositivos y las solicitudes de transferencia para los puntos de conexión de dispositivo disponibles.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-133">The host stack API functions are responsible for the registration of USBX components (host classes and host controllers), configuration of devices, and the transfer requests for available device endpoints.</span></span>

### <a name="usb-host-class-api"></a><span data-ttu-id="8dcc1-134">API de clase de host USB</span><span class="sxs-lookup"><span data-stu-id="8dcc1-134">USB Host Class API</span></span>

<span data-ttu-id="8dcc1-135">Las API de clase son muy específicas de cada clase USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-135">The Class APIs are very specific to each USB class.</span></span> <span data-ttu-id="8dcc1-136">La mayoría de las funciones de API comunes para las clases USB proporcionan servicios como apertura y cierre de un dispositivo, y lectura y escritura en un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-136">Most of the common API functions for USB classes provide services such as opening/closing a device and reading from and writing to a device.</span></span>

### <a name="root-hub"></a><span data-ttu-id="8dcc1-137">Concentrador raíz</span><span class="sxs-lookup"><span data-stu-id="8dcc1-137">Root Hub</span></span>

<span data-ttu-id="8dcc1-138">Cada instancia del controladora de host tiene uno o varios concentradores raíz USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-138">Each host controller instance has one or more USB root hubs.</span></span> <span data-ttu-id="8dcc1-139">El número de concentradores raíz viene determinado por la naturaleza del controlador o se puede recuperar mediante la lectura de registros específicos del controlador.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-139">The number of root hubs is either determined by the nature of the controller or can be retrieved by reading specific registers from the controller.</span></span>

### <a name="hub-class"></a><span data-ttu-id="8dcc1-140">Clase de concentrador</span><span class="sxs-lookup"><span data-stu-id="8dcc1-140">Hub Class</span></span>

<span data-ttu-id="8dcc1-141">La clase de concentrador se encarga de controlar los concentradores USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-141">The hub class is in charge of driving USB hubs.</span></span> <span data-ttu-id="8dcc1-142">Un concentrador USB puede ser un concentrador independiente o formar parte de un dispositivo compuesto, como un teclado o un monitor.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-142">A USB hub can either be a stand-alone hub or as part of a compound device such as a keyboard or a monitor.</span></span> <span data-ttu-id="8dcc1-143">Un concentrador puede tener autoalimentación o alimentarse por bus.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-143">A hub can be self-powered or bus-powered.</span></span> <span data-ttu-id="8dcc1-144">Los concentradores alimentados por bus tienen un máximo de cuatro puertos de bajada y solo pueden permitir la conexión de dispositivos autoalimentados o alimentados por bus que usen menos de 100 mA de energía.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-144">Bus-powered hubs have a maximum of four downstream ports and can only allow for the connection of devices that are either self-powered or bus-powered devices that use less than 100mA of power.</span></span> <span data-ttu-id="8dcc1-145">Los concentradores pueden estar en cascada.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-145">Hubs can be cascaded.</span></span> <span data-ttu-id="8dcc1-146">Se pueden conectar hasta cinco concentradores entre sí.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-146">Up to five hubs can be connected to one another.</span></span>

### <a name="usb-host-stack"></a><span data-ttu-id="8dcc1-147">Pila de host USB</span><span class="sxs-lookup"><span data-stu-id="8dcc1-147">USB Host Stack</span></span>

<span data-ttu-id="8dcc1-148">La pila de host USB es la pieza central de USBX.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-148">The USB host stack is the centerpiece of USBX.</span></span> <span data-ttu-id="8dcc1-149">Tiene tres funciones principales:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-149">It has three main functions.</span></span>

- <span data-ttu-id="8dcc1-150">Administrar la topología del USB</span><span class="sxs-lookup"><span data-stu-id="8dcc1-150">Manage the topology of the USB.</span></span>
- <span data-ttu-id="8dcc1-151">Enlazar un dispositivo USB a una o más clases</span><span class="sxs-lookup"><span data-stu-id="8dcc1-151">Bind a USB device to one or more classes.</span></span>
- <span data-ttu-id="8dcc1-152">Proporcionar una API a las clases para realizar interrogaciones de descriptor de dispositivo y transferencias USB</span><span class="sxs-lookup"><span data-stu-id="8dcc1-152">Provide an API to classes to perform device descriptor interrogation and USB transfers.</span></span>

### <a name="topology-manager"></a><span data-ttu-id="8dcc1-153">Administrador de topología</span><span class="sxs-lookup"><span data-stu-id="8dcc1-153">Topology Manager</span></span>

<span data-ttu-id="8dcc1-154">El subproceso de topología de la pila USB se activa al conectar un dispositivo nuevo o al desconectar un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-154">The USB stack topology thread is awakened when a new device is connected or when a device has been disconnected.</span></span> <span data-ttu-id="8dcc1-155">El concentrador raíz o un concentrador normal pueden aceptar conexiones de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-155">Either the root hub or a regular hub can accept device connections.</span></span> <span data-ttu-id="8dcc1-156">Cuando se ha conectado un dispositivo al USB, el administrador de topología recuperará el descriptor del dispositivo,</span><span class="sxs-lookup"><span data-stu-id="8dcc1-156">Once a device has been connected to the USB, the topology manager will retrieve the device descriptor.</span></span> <span data-ttu-id="8dcc1-157">el cual contendrá el número de configuraciones posibles disponibles para dicho dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-157">This descriptor will contain the number of possible configurations available for this device.</span></span> <span data-ttu-id="8dcc1-158">La mayoría de los dispositivos solo tienen una configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-158">Most devices have one configuration only.</span></span> <span data-ttu-id="8dcc1-159">Algunos dispositivos pueden funcionar de manera diferente según la energía disponible del puerto al que está conectado.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-159">Some devices can operate differently according to the available power available on the port where it is connected.</span></span> <span data-ttu-id="8dcc1-160">En este caso, el dispositivo tendrá varias configuraciones que se pueden seleccionar en función de la energía disponible.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-160">If this is the case, the device will have multiple configurations that can be selected depending on the available power.</span></span> <span data-ttu-id="8dcc1-161">Cuando el administrador de topología configura el dispositivo, se permite que extraiga la cantidad de energía especificada en su descriptor de configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-161">When the device is configured by the topology manager, it is then allowed to draw the amount of power specified in its configuration descriptor.</span></span>

## <a name="usb-class-binding"></a><span data-ttu-id="8dcc1-162">Enlace de clase USB</span><span class="sxs-lookup"><span data-stu-id="8dcc1-162">USB Class Binding</span></span>

<span data-ttu-id="8dcc1-163">Cuando se configura el dispositivo, el administrador de topología permitirá que el administrador de clases continúe la detección de dispositivos examinando los descriptores de la interfaz del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-163">When the device is configured, the topology manager will let the class manager continue the device discovery by looking at the device interface descriptors.</span></span> <span data-ttu-id="8dcc1-164">Un dispositivo puede tener uno o varios descriptores de interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-164">A device can have one or more interface descriptors.</span></span>

<span data-ttu-id="8dcc1-165">Una interfaz representa una función de un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-165">An interface represents a function in a device.</span></span> <span data-ttu-id="8dcc1-166">Por ejemplo, un altavoz USB tiene tres interfaces, una para el streaming de audio, otra para el control de audio y otra para administrar los diversos botones del altavoz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-166">For instance, a USB speaker has three interfaces, one for audio streaming, one for audio control, and one to manage the various speaker buttons.</span></span>

<span data-ttu-id="8dcc1-167">El administrador de clases tiene dos mecanismos para unir las interfaces de dispositivo a una o más clases.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-167">The class manager has two mechanisms to join the device interface(s) to one or more classes.</span></span> <span data-ttu-id="8dcc1-168">Puede usar la combinación de un PID/VID (ID. de producto e ID. de proveedor) que se encuentra en el descriptor de la interfaz o la combinación de clase/subclase/protocolo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-168">It can either use the combination of a PID/VID (product ID and vendor ID) found in the interface descriptor or the combination of Class/Subclass/Protocol.</span></span>

<span data-ttu-id="8dcc1-169">La combinación de PID/VID es válida para las interfaces que no se pueden controlar mediante una clase genérica.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-169">The PID/VID combination is valid for interfaces that cannot be driven by a generic class.</span></span> <span data-ttu-id="8dcc1-170">La combinación de clase/subclase/protocolo la usan las interfaces que pertenecen a una clase certificada USB-IF, como printer, hub, storage, audio o HID.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-170">The Class/Subclass/Protocol combination is used by interfaces that belong to a USB-IF certified class such as a printer, hub, storage, audio, or HID.</span></span>

<span data-ttu-id="8dcc1-171">El administrador de clases contiene una lista de clases registradas de la inicialización de USBX.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-171">The class manager contains a list of registered classes from the initialization of USBX.</span></span> <span data-ttu-id="8dcc1-172">El administrador de clases llamará a cada clase de una en una hasta que una clase acepte administrar la interfaz para ese dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-172">The class manager will call each class one at a time until one class accepts to manage the interface for that device.</span></span> <span data-ttu-id="8dcc1-173">Una clase solo puede administrar una interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-173">A class can only manage one interface.</span></span> <span data-ttu-id="8dcc1-174">En el ejemplo del altavoz de audio USB, el administrador de clases llamará a todas las clases para cada una de las interfaces.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-174">For the example of the USB audio speaker, the class manager will call all the classes for each of the interfaces.</span></span>

<span data-ttu-id="8dcc1-175">Cuando una clase acepte una interfaz, se crea una nueva instancia de esa clase.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-175">Once a class accepts an interface, a new instance of that class is created.</span></span> <span data-ttu-id="8dcc1-176">Después, el administrador de clases buscará la configuración alternativa predeterminada para la interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-176">The class manager will then search for the default alternate setting for the interface.</span></span> <span data-ttu-id="8dcc1-177">Un dispositivo puede tener una o varias configuraciones alternativas para cada interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-177">A device may have one or more alternate settings for each interface.</span></span> <span data-ttu-id="8dcc1-178">La configuración alternativa 0 será la que se use de forma predeterminada hasta que una clase decida cambiarla.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-178">The alternate setting 0 will be the on used by default until a class decides to change it.</span></span>

<span data-ttu-id="8dcc1-179">En el caso de la configuración alternativa predeterminada, el administrador de clases montará todos los puntos de conexión contenidos en la configuración alternativa.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-179">For the default alternate setting, the class manager will mount all the endpoints contained in the alternate setting.</span></span> <span data-ttu-id="8dcc1-180">Si el montaje de cada punto de conexión se realiza correctamente, el administrador de clases completará su trabajo volviendo a la clase que finalizará la inicialización de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-180">If the mounting of each endpoint is successful, the class manager will complete its job by returning to the class that will finish the initialization of the interface.</span></span>

### <a name="usbx-apis"></a><span data-ttu-id="8dcc1-181">API de USBX</span><span class="sxs-lookup"><span data-stu-id="8dcc1-181">USBX APIs</span></span>

<span data-ttu-id="8dcc1-182">La pila USB exporta un número determinado de API para que las clases USB realicen la interrogación en el dispositivo y las transferencias USB en puntos de conexión específicos.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-182">The USB stack exports a certain number of APIs for the USB classes to perform interrogation on the device and USB transfers on specific endpoints.</span></span> <span data-ttu-id="8dcc1-183">Estas funciones de API se describen en detalle en este manual de referencia.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-183">These API functions are described in detail in this reference manual.</span></span>

### <a name="host-controller"></a><span data-ttu-id="8dcc1-184">Controladora de host</span><span class="sxs-lookup"><span data-stu-id="8dcc1-184">Host Controller</span></span>

<span data-ttu-id="8dcc1-185">El controlador de controladora de host es el responsable de impulsar un tipo específico de controlador USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-185">The host controller driver is responsible for driving a specific type of USB controller.</span></span> <span data-ttu-id="8dcc1-186">Un controladora de host USB puede contener varios controladores.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-186">A USB host controller can have multiple controllers inside.</span></span> <span data-ttu-id="8dcc1-187">Por ejemplo, ciertos conjuntos de chips de PC Intel contienen dos controladores UHCI.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-187">For instance, certain Intel PC chipset contain two UHCI controllers.</span></span> <span data-ttu-id="8dcc1-188">Algunos controladores USB 2.0 contienen varias instancias de un controlador OHCI además de una instancia del controlador EHCI.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-188">Some USB 2.0 controllers contain multiple instances of an OHCI controller in addition to one instance of the EHCI controller.</span></span>

<span data-ttu-id="8dcc1-189">El controladora de host solo administrará varias instancias del mismo controlador.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-189">The Host controller will manage multiple instance of the same controller only.</span></span> <span data-ttu-id="8dcc1-190">Con el fin de controlar la mayoría de los controladores de host USB 2.0, será necesario inicializar el controlador OCHI y el controlador EHCI durante la inicialización de USBX.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-190">In order to drive most USB 2.0 host controllers, it will be required to initialize both the OCHI controller and the EHCI controller during the initialization of USBX.</span></span>

<span data-ttu-id="8dcc1-191">El controladora de host es responsable de administrar lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-191">The host controller is responsible for managing the following.</span></span>

- <span data-ttu-id="8dcc1-192">Concentrador raíz</span><span class="sxs-lookup"><span data-stu-id="8dcc1-192">Root Hub</span></span>
- <span data-ttu-id="8dcc1-193">Administración de energía</span><span class="sxs-lookup"><span data-stu-id="8dcc1-193">Power Management</span></span>
- <span data-ttu-id="8dcc1-194">Puntos de conexión</span><span class="sxs-lookup"><span data-stu-id="8dcc1-194">Endpoints</span></span>
- <span data-ttu-id="8dcc1-195">Transferencias</span><span class="sxs-lookup"><span data-stu-id="8dcc1-195">Transfers</span></span>

### <a name="root-hub"></a><span data-ttu-id="8dcc1-196">Concentrador raíz</span><span class="sxs-lookup"><span data-stu-id="8dcc1-196">Root Hub</span></span>

<span data-ttu-id="8dcc1-197">La administración del concentrador raíz es responsable de iniciar cada puerto del controlador y de determinar si hay un dispositivo insertado o no.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-197">The root hub management is responsible for the powering up of each controller port and determining if there is a device inserted or not.</span></span> <span data-ttu-id="8dcc1-198">Esta funcionalidad la usa el concentrador de raíz USBX genérico para interrogar los puertos de bajada del controlador.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-198">This functionality is used by the USBX generic root hub to interrogate the controller downstream ports.</span></span>

### <a name="power-management"></a><span data-ttu-id="8dcc1-199">Administración de energía</span><span class="sxs-lookup"><span data-stu-id="8dcc1-199">Power Management</span></span>

<span data-ttu-id="8dcc1-200">El procesamiento de administración de energía proporciona el control de las señales de suspensión o reanudación en el modo de asociación, lo que afecta a todos los puertos de bajada del controlador al mismo tiempo, o individualmente si el controlador ofrece esta funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-200">The power management processing provides for the handling of suspend/resume signals either in gang mode, therefore affecting all controller downstream ports at the same time, or individually if the controller offers this functionality.</span></span>

### <a name="endpoints"></a><span data-ttu-id="8dcc1-201">Puntos de conexión</span><span class="sxs-lookup"><span data-stu-id="8dcc1-201">Endpoints</span></span>

<span data-ttu-id="8dcc1-202">La administración de puntos de conexión proporciona al controlador la posibilidad de crear o destruir puntos de conexión físicos.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-202">The endpoint management provides for the creation or destruction of physical endpoints to the controller.</span></span> <span data-ttu-id="8dcc1-203">Los puntos de conexión físicos son entidades de memoria que analiza el controlador si este es compatible con DMA principal o que están escritos en el controlador.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-203">The physical endpoints are memory entities that are parsed by the controller if the controller supports master DMA or that are written in the controller.</span></span> <span data-ttu-id="8dcc1-204">Los puntos de conexión físicos contienen información de transacciones que debe realizar el controlador.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-204">The physical endpoints contain transactions information to be performed by the controller.</span></span>

### <a name="transfers"></a><span data-ttu-id="8dcc1-205">Transferencias</span><span class="sxs-lookup"><span data-stu-id="8dcc1-205">Transfers</span></span>

<span data-ttu-id="8dcc1-206">La administración de transferencias permite que una clase realice una transacción en cada uno de los puntos de conexión que se han creado.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-206">Transfer management provides for a class to perform a transaction on each of the endpoints that have been created.</span></span> <span data-ttu-id="8dcc1-207">Cada punto de conexión lógico contiene un componente denominado "solicitud de transferencia" para solicitudes de transferencia USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-207">Each logical endpoint contains a component called TRANSFER REQUEST for USB transfer requests.</span></span> <span data-ttu-id="8dcc1-208">La pila usa la solicitud de transferencia para describir la transacción y,</span><span class="sxs-lookup"><span data-stu-id="8dcc1-208">The TRANSFER REQUEST is used by the stack to describe the transaction.</span></span> <span data-ttu-id="8dcc1-209">después, esta solicitud de transferencia se pasa a la pila y al controlador, que puede dividirla en varias subtransacciones en función de las capacidades del controlador.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-209">This TRANSFER REQUEST is then passed to the stack and to the controller, which may divide it into several sub transactions depending on the capabilities of the controller.</span></span>

## <a name="usb-device-framework"></a><span data-ttu-id="8dcc1-210">Marco de dispositivos USB</span><span class="sxs-lookup"><span data-stu-id="8dcc1-210">USB Device Framework</span></span>

<span data-ttu-id="8dcc1-211">Un dispositivo USB se representa mediante un árbol de descriptores.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-211">A USB device is represented by a tree of descriptors.</span></span> <span data-ttu-id="8dcc1-212">Hay seis tipos principales de descriptores:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-212">There are six main types of descriptors.</span></span>

- <span data-ttu-id="8dcc1-213">Descriptores de dispositivo</span><span class="sxs-lookup"><span data-stu-id="8dcc1-213">Device descriptors</span></span>
- <span data-ttu-id="8dcc1-214">Descriptores de configuración</span><span class="sxs-lookup"><span data-stu-id="8dcc1-214">Configuration descriptors</span></span>
- <span data-ttu-id="8dcc1-215">Descriptores de interfaz</span><span class="sxs-lookup"><span data-stu-id="8dcc1-215">Interface descriptors</span></span>
- <span data-ttu-id="8dcc1-216">Descriptores de punto de conexión</span><span class="sxs-lookup"><span data-stu-id="8dcc1-216">Endpoint descriptors</span></span>
- <span data-ttu-id="8dcc1-217">Descriptores de cadena</span><span class="sxs-lookup"><span data-stu-id="8dcc1-217">String descriptors</span></span>
- <span data-ttu-id="8dcc1-218">Descriptores funcionales</span><span class="sxs-lookup"><span data-stu-id="8dcc1-218">Functional descriptors</span></span>

<span data-ttu-id="8dcc1-219">Un dispositivo USB puede tener una descripción muy sencilla y su aspecto es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-219">A USB device may have a very simple description and looks like this.</span></span>
<span data-ttu-id="8dcc1-220">![Dispositivo USB simple](./media/usbx-host-stack/usb-device-simple.png)</span><span class="sxs-lookup"><span data-stu-id="8dcc1-220">![Simple USB device](./media/usbx-host-stack/usb-device-simple.png)</span></span>

<span data-ttu-id="8dcc1-221">En la ilustración anterior, el dispositivo solo tiene una configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-221">In the above illustration, the device has only one configuration.</span></span> <span data-ttu-id="8dcc1-222">Esta configuración solo tiene una interfaz asociada, lo que indica que el dispositivo solo tiene una función y un punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-222">A single interface is attached to this configuration, indicating that the device has only one function, and it has one endpoint only.</span></span> <span data-ttu-id="8dcc1-223">Conectado al descriptor de dispositivo hay un descriptor de cadena que proporciona una identificación visible del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-223">Attached to the device descriptor is a string descriptor providing a visible identification of the device.</span></span>

<span data-ttu-id="8dcc1-224">Pero un dispositivo puede ser más complejo y puede tener el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-224">However, a device may be more complex and may appear as follows.</span></span>

![Dispositivo USB complejo](./media/usbx-host-stack/usb-device-complex.png)

<span data-ttu-id="8dcc1-226">En la ilustración anterior, el dispositivo tiene dos descriptores de configuración asociados al descriptor del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-226">In the above illustration, the device has two configuration descriptors attached to the device descriptor.</span></span> <span data-ttu-id="8dcc1-227">Este dispositivo podría indicar que tiene dos modos de energía o que se puede controlar mediante clases estándar o clases de propiedad.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-227">This device may indicate that it has two power modes or can be driven by either standard classes or proprietary classes.</span></span>

<span data-ttu-id="8dcc1-228">La primera configuración tiene dos interfaces asociadas que indican que el dispositivo tiene dos funciones lógicas.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-228">Attached to the first configuration are two interfaces indicating that the device has two logical functions.</span></span> <span data-ttu-id="8dcc1-229">La primera función tiene tres descriptores de punto de conexión y un descriptor funcional.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-229">The first function has 3 endpoint descriptors and a functional descriptor.</span></span> <span data-ttu-id="8dcc1-230">La clase responsable de controlar la interfaz puede usar el descriptor funcional para obtener información adicional sobre esta interfaz que normalmente un descriptor genérico no encuentra.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-230">The functional descriptor may be used by the class responsible to drive the interface to obtain further information about this interface normally not found by a generic descriptor.</span></span>

### <a name="device-descriptors"></a><span data-ttu-id="8dcc1-231">Descriptores de dispositivo</span><span class="sxs-lookup"><span data-stu-id="8dcc1-231">Device Descriptors</span></span>

<span data-ttu-id="8dcc1-232">Cada dispositivo USB tiene un único descriptor de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-232">Each USB device has one single device descriptor.</span></span> <span data-ttu-id="8dcc1-233">Este descriptor contiene la identificación del dispositivo, el número de configuraciones admitidas y las características del punto de conexión de control predeterminado que se usa para configurar el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-233">This descriptor contains the device identification, the number of configurations supported, and the characteristics of the default control endpoint used for configuring the device.</span></span>

| <span data-ttu-id="8dcc1-234">Offset</span><span class="sxs-lookup"><span data-stu-id="8dcc1-234">Offset</span></span> | <span data-ttu-id="8dcc1-235">Campo</span><span class="sxs-lookup"><span data-stu-id="8dcc1-235">Field</span></span>              | <span data-ttu-id="8dcc1-236">Size</span><span class="sxs-lookup"><span data-stu-id="8dcc1-236">Size</span></span> | <span data-ttu-id="8dcc1-237">Value</span><span class="sxs-lookup"><span data-stu-id="8dcc1-237">Value</span></span>    | <span data-ttu-id="8dcc1-238">Descripción</span><span class="sxs-lookup"><span data-stu-id="8dcc1-238">Description</span></span>                             |
| ------ | ------------------ | ---- | -------- | --------------------------------------- |
| <span data-ttu-id="8dcc1-239">0</span><span class="sxs-lookup"><span data-stu-id="8dcc1-239">0</span></span>      | <span data-ttu-id="8dcc1-240">BLength</span><span class="sxs-lookup"><span data-stu-id="8dcc1-240">BLength</span></span>            | <span data-ttu-id="8dcc1-241">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-241">1</span></span>    | <span data-ttu-id="8dcc1-242">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-242">Number</span></span>   | <span data-ttu-id="8dcc1-243">Tamaño de este descriptor en bytes.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-243">Size of this descriptor in bytes</span></span> |
| <span data-ttu-id="8dcc1-244">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-244">1</span></span>      | <span data-ttu-id="8dcc1-245">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="8dcc1-245">bDescriptorType</span></span>    | <span data-ttu-id="8dcc1-246">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-246">1</span></span>    | <span data-ttu-id="8dcc1-247">Constante</span><span class="sxs-lookup"><span data-stu-id="8dcc1-247">Constant</span></span> | <span data-ttu-id="8dcc1-248">Tipo de descriptor de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-248">DEVICE Descriptor Type</span></span> |
| <span data-ttu-id="8dcc1-249">2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-249">2</span></span>      | <span data-ttu-id="8dcc1-250">bcdUSB</span><span class="sxs-lookup"><span data-stu-id="8dcc1-250">bcdUSB</span></span>             | <span data-ttu-id="8dcc1-251">2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-251">2</span></span>    | <span data-ttu-id="8dcc1-252">BCD</span><span class="sxs-lookup"><span data-stu-id="8dcc1-252">BCD</span></span>      | <span data-ttu-id="8dcc1-253">Número de versión de especificación USB en Binary-Coded Decimal.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-253">USB Specification Release Number in BinaryCoded Dec</span></span><br /><span data-ttu-id="8dcc1-254">Ejemplo: 2.10 es equivalente a 0x210.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-254">Example: 2.10 is equivalent to 0x210.</span></span> <span data-ttu-id="8dcc1-255">Este campo identifica la versión de la especificación USB con la que son compatibles el dispositivo y sus descriptores.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-255">This field identifies the release of the USB Specification that the device and its descriptors are compliant with.</span></span> |
| <span data-ttu-id="8dcc1-256">4</span><span class="sxs-lookup"><span data-stu-id="8dcc1-256">4</span></span>      | <span data-ttu-id="8dcc1-257">bDeviceClass</span><span class="sxs-lookup"><span data-stu-id="8dcc1-257">bDeviceClass</span></span>       | <span data-ttu-id="8dcc1-258">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-258">1</span></span>    | <span data-ttu-id="8dcc1-259">Clase</span><span class="sxs-lookup"><span data-stu-id="8dcc1-259">Class</span></span>    | <span data-ttu-id="8dcc1-260">Código de clase (asignado por USB-IF).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-260">Class code (assigned by USB-IF).</span></span><br /><span data-ttu-id="8dcc1-261">Si este campo se restablece en 0, cada interfaz de una configuración especifica su propia información de clase y las distintas interfaces funcionan de manera independiente.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-261">If this field is reset to 0, each interface within a configuration specifies its own class information and the various interfaces operate independently.</span></span><br /><span data-ttu-id="8dcc1-262">Si este campo se establece en un valor entre 1 y 0xFE, el dispositivo admite distintas especificaciones de clase en distintas interfaces y es posible que las interfaces no funcionen de forma independiente.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-262">If this field is set to a value between 1 and 0xFE, the device supports different class specifications on different interfaces and the interfaces may not operate independently.</span></span> <span data-ttu-id="8dcc1-263">Este valor identifica la definición de clase utilizada para las interfaces de agregado.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-263">This value identifies the class definition used for the aggregate interfaces.</span></span><br /><span data-ttu-id="8dcc1-264">Si este campo se establece en 0xFF, la clase de dispositivo es específica del proveedor.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-264">If this field is set to 0xFF, the device class is vendor specific.</span></span> |
| <span data-ttu-id="8dcc1-265">5</span><span class="sxs-lookup"><span data-stu-id="8dcc1-265">5</span></span>      | <span data-ttu-id="8dcc1-266">bDeviceSubClass</span><span class="sxs-lookup"><span data-stu-id="8dcc1-266">bDeviceSubClass</span></span>    | <span data-ttu-id="8dcc1-267">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-267">1</span></span>    | <span data-ttu-id="8dcc1-268">Subclase</span><span class="sxs-lookup"><span data-stu-id="8dcc1-268">SubClass</span></span> | <span data-ttu-id="8dcc1-269">Código de subclase (asignado por USB-IF).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-269">Subclass code (assigned by USB-IF).</span></span><br /><span data-ttu-id="8dcc1-270">Estos códigos se califican mediante el valor del campo bDeviceClass.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-270">These codes are qualified by the value of the bDeviceClass field.</span></span> <span data-ttu-id="8dcc1-271">Si el campo bDeviceClass se restablece a 0, este campo también debe restablecerse a 0.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-271">If the bDeviceClass field is reset to 0, this field must also be reset to 0.</span></span> <span data-ttu-id="8dcc1-272">Si el campo bDeviceClass no se establece en 0xFF, se reservan todos los valores para la asignación mediante USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-272">If the bDeviceClass field is not set to 0xFF, all values are reserved for assignment by USB.</span></span> |
| <span data-ttu-id="8dcc1-273">6</span><span class="sxs-lookup"><span data-stu-id="8dcc1-273">6</span></span>      | <span data-ttu-id="8dcc1-274">bDeviceProtocol</span><span class="sxs-lookup"><span data-stu-id="8dcc1-274">bDeviceProtocol</span></span>    | <span data-ttu-id="8dcc1-275">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-275">1</span></span>    | <span data-ttu-id="8dcc1-276">Protocolo</span><span class="sxs-lookup"><span data-stu-id="8dcc1-276">Protocol</span></span> | <span data-ttu-id="8dcc1-277">Código de protocolo (asignado por USB-IF).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-277">Protocol code (assigned by USB-IF).</span></span><br /><span data-ttu-id="8dcc1-278">Estos códigos se cualifican con el valor de los campos bDeviceClass y bDeviceSubClass.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-278">These codes are qualified by the value of the bDeviceClass and the bDeviceSubClass fields.</span></span> <span data-ttu-id="8dcc1-279">Si un dispositivo admite protocolos específicos de clase en un dispositivo en lugar de una interfaz, este código identifica los protocolos que el dispositivo usa tal y como se define en la especificación de la clase de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-279">If a device supports class-specific protocols on a device basis as opposed to an interface basis, this code identifies the protocols that the device uses as defined by the specification of the device class.</span></span> <span data-ttu-id="8dcc1-280">Si este campo se restablece a 0, el dispositivo no usa protocolos específicos de clase en un dispositivo,</span><span class="sxs-lookup"><span data-stu-id="8dcc1-280">If this field is reset to 0, the device does not use class specific protocols on a device basis.</span></span><br /><span data-ttu-id="8dcc1-281">pero puede usar protocolos específicos de clase en una interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-281">However, it may use class specific protocols on an interface basis.</span></span><br /><span data-ttu-id="8dcc1-282">Si este campo se restablece a 0xFF, el dispositivo usa un protocolo específico de proveedor en un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-282">If this field is set to 0xFF, the device uses a vendor specific protocol on a device basis.</span></span> |
| <span data-ttu-id="8dcc1-283">7</span><span class="sxs-lookup"><span data-stu-id="8dcc1-283">7</span></span>      | <span data-ttu-id="8dcc1-284">bMaxPacketSize0</span><span class="sxs-lookup"><span data-stu-id="8dcc1-284">bMaxPacketSize0</span></span>    | <span data-ttu-id="8dcc1-285">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-285">1</span></span>    | <span data-ttu-id="8dcc1-286">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-286">Number</span></span>   | <span data-ttu-id="8dcc1-287">Tamaño máximo de paquete para el punto de conexión cero (solo con válidos los tamaños de bytes de 8, 16, 32 o 64).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-287">Maximum packet size for endpoint zero (only byte sizes of 8, 16, 32, or 64 are valid)</span></span> |
| <span data-ttu-id="8dcc1-288">8</span><span class="sxs-lookup"><span data-stu-id="8dcc1-288">8</span></span>      | <span data-ttu-id="8dcc1-289">idVendor</span><span class="sxs-lookup"><span data-stu-id="8dcc1-289">idVendor</span></span>           | <span data-ttu-id="8dcc1-290">2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-290">2</span></span>    | <span data-ttu-id="8dcc1-291">ID</span><span class="sxs-lookup"><span data-stu-id="8dcc1-291">ID</span></span>       | <span data-ttu-id="8dcc1-292">Identificador de proveedor (asignado por USB-IF).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-292">Vendor ID (assigned by USB-IF)</span></span> |
| <span data-ttu-id="8dcc1-293">10</span><span class="sxs-lookup"><span data-stu-id="8dcc1-293">10</span></span>     | <span data-ttu-id="8dcc1-294">idProduct</span><span class="sxs-lookup"><span data-stu-id="8dcc1-294">idProduct</span></span>          | <span data-ttu-id="8dcc1-295">2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-295">2</span></span>    | <span data-ttu-id="8dcc1-296">ID</span><span class="sxs-lookup"><span data-stu-id="8dcc1-296">ID</span></span>       | <span data-ttu-id="8dcc1-297">Identificador del producto (asignado por el fabricante).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-297">Product ID (assigned by the Manufacturer)</span></span> |
| <span data-ttu-id="8dcc1-298">12</span><span class="sxs-lookup"><span data-stu-id="8dcc1-298">12</span></span>     | <span data-ttu-id="8dcc1-299">bcdDevice</span><span class="sxs-lookup"><span data-stu-id="8dcc1-299">bcdDevice</span></span>          | <span data-ttu-id="8dcc1-300">2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-300">2</span></span>    | <span data-ttu-id="8dcc1-301">BCD</span><span class="sxs-lookup"><span data-stu-id="8dcc1-301">BCD</span></span>      | <span data-ttu-id="8dcc1-302">Número de versión del dispositivo en binary-coded decimal.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-302">Device release number in binary-coded decimal</span></span> |
| <span data-ttu-id="8dcc1-303">14</span><span class="sxs-lookup"><span data-stu-id="8dcc1-303">14</span></span>     | <span data-ttu-id="8dcc1-304">iManufacturer</span><span class="sxs-lookup"><span data-stu-id="8dcc1-304">iManufacturer</span></span>      | <span data-ttu-id="8dcc1-305">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-305">1</span></span>    | <span data-ttu-id="8dcc1-306">Índice</span><span class="sxs-lookup"><span data-stu-id="8dcc1-306">Index</span></span>    | <span data-ttu-id="8dcc1-307">Índice de descriptor de cadena que describe el fabricante.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-307">Index of string descriptor describing manufacturer</span></span> |
| <span data-ttu-id="8dcc1-308">15</span><span class="sxs-lookup"><span data-stu-id="8dcc1-308">15</span></span>     | <span data-ttu-id="8dcc1-309">iProduct</span><span class="sxs-lookup"><span data-stu-id="8dcc1-309">iProduct</span></span>           | <span data-ttu-id="8dcc1-310">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-310">1</span></span>    | <span data-ttu-id="8dcc1-311">Índice</span><span class="sxs-lookup"><span data-stu-id="8dcc1-311">Index</span></span>    | <span data-ttu-id="8dcc1-312">Índice de descriptor de cadena que describe el producto.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-312">Index of string descriptor describing product</span></span> |
| <span data-ttu-id="8dcc1-313">16</span><span class="sxs-lookup"><span data-stu-id="8dcc1-313">16</span></span>     | <span data-ttu-id="8dcc1-314">iSerialNumber</span><span class="sxs-lookup"><span data-stu-id="8dcc1-314">iSerialNumbe</span></span>       | <span data-ttu-id="8dcc1-315">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-315">1</span></span>    | <span data-ttu-id="8dcc1-316">Índice</span><span class="sxs-lookup"><span data-stu-id="8dcc1-316">Index</span></span>    | <span data-ttu-id="8dcc1-317">Índice de descriptor de cadena que describe el número de serie del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-317">Index of string descriptor describing the device's serial number</span></span> |
| <span data-ttu-id="8dcc1-318">17</span><span class="sxs-lookup"><span data-stu-id="8dcc1-318">17</span></span>     | <span data-ttu-id="8dcc1-319">bNumConfigurations</span><span class="sxs-lookup"><span data-stu-id="8dcc1-319">bNumConfigurations</span></span> | <span data-ttu-id="8dcc1-320">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-320">1</span></span>    | <span data-ttu-id="8dcc1-321">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-321">Number</span></span>   | <span data-ttu-id="8dcc1-322">Número de configuraciones posibles.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-322">Number of possible configurations</span></span> |

<span data-ttu-id="8dcc1-323">USBX define un descriptor de dispositivo USB de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-323">USBX defines a USB device descriptor as follows:</span></span>

```c
typedef struct UX_DEVICE_DESCRIPTOR_STRUCT
{
    UINT      bLength;
    UINT      bDescriptorType;
    USHORT    bcdUSB;
    UINT      bDeviceClass;
    UINT      bDeviceSubClass;
    UINT      bDeviceProtocol;
    UINT      bMaxPacketSize0;
    USHORT    idVendor;
    USHORT    idProduct;
    USHORT    bcdDevice;
    UINT      iManufacturer;
    UINT      iProduct;
    UINT      iSerialNumber;
    UINT      bNumConfigurations;
} UX_DEVICE_DESCRIPTOR;
```

<span data-ttu-id="8dcc1-324">El descriptor de dispositivo USB forma parte de un contenedor de dispositivos descrito como sigue:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-324">The USB device descriptor is part of a device container described as:</span></span>

```c
typedef struct UX_DEVICE_STRUCT
{
    ULONG ux_device_handle;
    ULONG ux_device_type;
    ULONG ux_device_state;
    ULONG ux_device_address;
    ULONG ux_device_speed;
    ULONG ux_device_port_location;
    ULONG ux_device_max_power;
    ULONG ux_device_power_source;
    UINT ux_device_current_configuration;

    TX_SEMAPHORE ux_device_protection_semaphore;
    struct UX_DEVICE_STRUCT *ux_device_parent; 
    struct UX_HOST_CLASS_STRUCT *ux_device_class; 
    VOID *ux_device_class_instance;
    struct UX_HCD_STRUCT *ux_device_hcd;
    struct UX_CONFIGURATION_STRUCT *ux_device_first_configuration; 
    struct UX_DEVICE_STRUCT *ux_device_next_device;
    struct UX_DEVICE_DESCRIPTOR_STRUCT ux_device_descriptor;
    struct UX_ENDPOINT_STRUCT ux_device_control_endpoint;
    struct UX_HUB_TT_STRUCT ux_device_hub_tt[UX_MAX_TT];
} UX_DEVICE;
```

- <span data-ttu-id="8dcc1-325">**ux_device_handle**: identificador del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-325">**ux_device_handle**: Handle of the device.</span></span> <span data-ttu-id="8dcc1-326">Normalmente, es la dirección de la instancia de esta estructura para el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-326">This is typically the address of the instance of this structure for the device.</span></span>
- <span data-ttu-id="8dcc1-327">**ux_device_type**: valor obsoleto.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-327">**ux_device_type**: Obsolete value.</span></span> <span data-ttu-id="8dcc1-328">Sin usar.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-328">Unused.</span></span>
- <span data-ttu-id="8dcc1-329">**ux_device_state**: estado del dispositivo, que puede tener uno de los valores siguientes:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-329">**ux_device_state**: Device State, which can have one of the following values:</span></span>
    - <span data-ttu-id="8dcc1-330">**UX_DEVICE_RESET** 0</span><span class="sxs-lookup"><span data-stu-id="8dcc1-330">**UX_DEVICE_RESET**                0</span></span>
    - <span data-ttu-id="8dcc1-331">**UX_DEVICE_ATTACHED** 1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-331">**UX_DEVICE_ATTACHED**             1</span></span>
    - <span data-ttu-id="8dcc1-332">**UX_DEVICE_ADDRESSED** 2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-332">**UX_DEVICE_ADDRESSED**            2</span></span>
    - <span data-ttu-id="8dcc1-333">**UX_DEVICE_CONFIGURED** 3</span><span class="sxs-lookup"><span data-stu-id="8dcc1-333">**UX_DEVICE_CONFIGURED**           3</span></span>
    - <span data-ttu-id="8dcc1-334">**UX_DEVICE_SUSPENDED** 4</span><span class="sxs-lookup"><span data-stu-id="8dcc1-334">**UX_DEVICE_SUSPENDED**            4</span></span>
    - <span data-ttu-id="8dcc1-335">**UX_DEVICE_RESUMED** 5</span><span class="sxs-lookup"><span data-stu-id="8dcc1-335">**UX_DEVICE_RESUMED**              5</span></span>
    - <span data-ttu-id="8dcc1-336">**UX_DEVICE_SELF_POWERED_STATE** 6</span><span class="sxs-lookup"><span data-stu-id="8dcc1-336">**UX_DEVICE_SELF_POWERED_STATE**   6</span></span>
    - <span data-ttu-id="8dcc1-337">**UX_DEVICE_SELF_POWERED_STATE** 7</span><span class="sxs-lookup"><span data-stu-id="8dcc1-337">**UX_DEVICE_SELF_POWERED_STATE**   7</span></span>
    - <span data-ttu-id="8dcc1-338">**UX_DEVICE_REMOTE_WAKEUP** 8</span><span class="sxs-lookup"><span data-stu-id="8dcc1-338">**UX_DEVICE_REMOTE_WAKEUP**        8</span></span>
    - <span data-ttu-id="8dcc1-339">**UX_DEVICE_BUS_RESET_COMPLETED** 9</span><span class="sxs-lookup"><span data-stu-id="8dcc1-339">**UX_DEVICE_BUS_RESET_COMPLETED**  9</span></span>
    - <span data-ttu-id="8dcc1-340">**UX_DEVICE_REMOVED** 10</span><span class="sxs-lookup"><span data-stu-id="8dcc1-340">**UX_DEVICE_REMOVED**              10</span></span>
    - <span data-ttu-id="8dcc1-341">**UX_DEVICE_FORCE_DISCONNECT** 11</span><span class="sxs-lookup"><span data-stu-id="8dcc1-341">**UX_DEVICE_FORCE_DISCONNECT**     11</span></span>
- <span data-ttu-id="8dcc1-342">**ux_device_address**: dirección del dispositivo después de que se haya aceptado el comando de **SET_ADDRESS** (de 1 a 127).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-342">**ux_device_address**: Address of the device after the **SET_ADDRESS** command has been accepted (from 1 to 127).</span></span>
- <span data-ttu-id="8dcc1-343">**ux_device_speed**: velocidad del dispositivo:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-343">**ux_device_speed**: Speed of the device:</span></span>
    - <span data-ttu-id="8dcc1-344">**UX_LOW_SPEED_DEVICE** 0</span><span class="sxs-lookup"><span data-stu-id="8dcc1-344">**UX_LOW_SPEED_DEVICE**      0</span></span>
    - <span data-ttu-id="8dcc1-345">**UX_FULL_SPEED_DEVICE** 1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-345">**UX_FULL_SPEED_DEVICE**     1</span></span>
    - <span data-ttu-id="8dcc1-346">**UX_HIGH_SPEED_DEVICE** 2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-346">**UX_HIGH_SPEED_DEVICE**     2</span></span>
- <span data-ttu-id="8dcc1-347">**ux_device_port_location**: índice del puerto del dispositivo primario (concentrador raíz o concentrador).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-347">**ux_device_port_location**: Index of the port of the parent device (root hub or hub).</span></span>
- <span data-ttu-id="8dcc1-348">**ux_device_max_power**: potencia máxima en mA que el dispositivo puede recibir en la configuración seleccionada.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-348">**ux_device_max_power**: Maximum power in mA that the device may take in the selected configuration.</span></span>
- <span data-ttu-id="8dcc1-349">**ux_device_power_source**: puede ser uno de los dos valores siguientes:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-349">**ux_device_power_source**: Can be one of the two following values:</span></span>
    - <span data-ttu-id="8dcc1-350">**UX_DEVICE_BUS_POWERED** 1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-350">**UX_DEVICE_BUS_POWERED**     1</span></span>
    - <span data-ttu-id="8dcc1-351">**UX_DEVICE_SELF_POWERED** 2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-351">**UX_DEVICE_SELF_POWERED**    2</span></span>
- <span data-ttu-id="8dcc1-352">**ux_device_current_configuration**: índice de la configuración actual usada por este dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-352">**ux_device_current_configuration**: Index of the current configuration being used by this device.</span></span>
- <span data-ttu-id="8dcc1-353">**ux_device_parent**: puntero de contenedor de dispositivo del elemento primario de este dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-353">**ux_device_parent**: Device container pointer of the parent of this device.</span></span> <span data-ttu-id="8dcc1-354">Si el puntero es null, el elemento primario es el concentrador raíz del controlador.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-354">If the pointer is null, the parent is the root hub of the controller.</span></span>
- <span data-ttu-id="8dcc1-355">**ux_device_class**: puntero al tipo de clase que posee este dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-355">**ux_device_class**: Pointer to the class type that owns this device.</span></span>
- <span data-ttu-id="8dcc1-356">**ux_device_class_instance**: puntero a la instancia de la clase a la que pertenece este dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-356">**ux_device_class_instance**: Pointer to the instance of the class that owns this device.</span></span>
- <span data-ttu-id="8dcc1-357">**ux_device_hcd**: instancia del controladora de host USB donde está conectado este dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-357">**ux_device_hcd**: USB Host Controller Instance where this device is attached.</span></span>
- <span data-ttu-id="8dcc1-358">**ux_device_first_configuration**: puntero al primer contenedor de configuración para este dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-358">**ux_device_first_configuration**: Pointer to the first configuration container for this device.</span></span>
- <span data-ttu-id="8dcc1-359">**ux_device_next_device**: puntero al siguiente dispositivo de la lista de dispositivos en cualquiera de los buses detectados por USBX.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-359">**ux_device_next_device**: Pointer to the next device in the list of device on any of the buses detected by USBX.</span></span>
- <span data-ttu-id="8dcc1-360">**ux_device_descriptor**: descriptor de dispositivo USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-360">**ux_device_descriptor**: USB device descriptor.</span></span>
- <span data-ttu-id="8dcc1-361">**ux_device_control_endpoint**: descriptor del punto de conexión de control predeterminado que usa este dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-361">**ux_device_control_endpoint**: Descriptor of the default control endpoint used by this device.</span></span>
- <span data-ttu-id="8dcc1-362">**ux_device_hub_tt**: matriz de TTS del concentrador para el dispositivo</span><span class="sxs-lookup"><span data-stu-id="8dcc1-362">**ux_device_hub_tt**: Array of Hub TTs for the device</span></span>

### <a name="configuration-descriptors"></a><span data-ttu-id="8dcc1-363">Descriptores de configuración</span><span class="sxs-lookup"><span data-stu-id="8dcc1-363">Configuration Descriptors</span></span>

<span data-ttu-id="8dcc1-364">El descriptor de configuración describe información sobre una configuración específica del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-364">The configuration descriptor describes information about a specific device configuration.</span></span> <span data-ttu-id="8dcc1-365">Un dispositivo USB puede contener uno o varios descriptores de configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-365">A USB device may contain one or more configuration descriptors.</span></span> <span data-ttu-id="8dcc1-366">El campo **bNumConfigurations** del descriptor de dispositivo indica el número de descriptores de configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-366">The **bNumConfigurations** field in the device descriptor indicates the number of configuration descriptors.</span></span> <span data-ttu-id="8dcc1-367">El descriptor contiene un campo **bConfigurationValue** con un valor que, cuando se usa como parámetro para la solicitud Set Configuration (Establecer la configuración), hace que el dispositivo asuma la configuración descrita.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-367">The descriptor contains a **bConfigurationValue** field with a value that, when used as a parameter to the Set Configuration request, causes the device to assume the described configuration.</span></span>

<span data-ttu-id="8dcc1-368">El descriptor describe el número de interfaces proporcionadas por la configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-368">The descriptor describes the number of interfaces provided by the configuration.</span></span> <span data-ttu-id="8dcc1-369">Cada interfaz representa una función lógica dentro del dispositivo y puede funcionar de forma independiente.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-369">Each interface represents a logical function within the device and may operate independently.</span></span> <span data-ttu-id="8dcc1-370">Por ejemplo, un altavoz de audio USB puede tener tres interfaces, una para el streaming de audio, otra para el control de audio y otra interfaz HID para controlar los botones del altavoz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-370">For instance a USB audio speaker may have three interfaces, one for audio streaming, one for audio control, and one HID interface to manage the speaker's buttons.</span></span>

<span data-ttu-id="8dcc1-371">Cuando el host emite una solicitud GET_DESCRIPTOR para el descriptor de configuración, se devuelven todos los descriptores de interfaz y de punto de conexión relacionados.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-371">When the host issues a GET_DESCRIPTOR request for the configuration descriptor, all related interface and endpoint descriptors are returned.</span></span>

| <span data-ttu-id="8dcc1-372">Offset</span><span class="sxs-lookup"><span data-stu-id="8dcc1-372">Offset</span></span> | <span data-ttu-id="8dcc1-373">Campo</span><span class="sxs-lookup"><span data-stu-id="8dcc1-373">Field</span></span>               | <span data-ttu-id="8dcc1-374">Size</span><span class="sxs-lookup"><span data-stu-id="8dcc1-374">Size</span></span> | <span data-ttu-id="8dcc1-375">Value</span><span class="sxs-lookup"><span data-stu-id="8dcc1-375">Value</span></span>    | <span data-ttu-id="8dcc1-376">Descripción</span><span class="sxs-lookup"><span data-stu-id="8dcc1-376">Description</span></span>                       |
| ------ | ------------------- | ---- | -------- | --------------------------------- |
| <span data-ttu-id="8dcc1-377">0</span><span class="sxs-lookup"><span data-stu-id="8dcc1-377">0</span></span>      | <span data-ttu-id="8dcc1-378">BLength</span><span class="sxs-lookup"><span data-stu-id="8dcc1-378">bLength</span></span>             | <span data-ttu-id="8dcc1-379">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-379">1</span></span>    | <span data-ttu-id="8dcc1-380">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-380">Number</span></span>   | <span data-ttu-id="8dcc1-381">Tamaño de este descriptor en bytes.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-381">Size of this descriptor in bytes.</span></span> |
| <span data-ttu-id="8dcc1-382">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-382">1</span></span>      | <span data-ttu-id="8dcc1-383">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="8dcc1-383">bDescriptorType</span></span>     | <span data-ttu-id="8dcc1-384">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-384">1</span></span>    | <span data-ttu-id="8dcc1-385">Constante</span><span class="sxs-lookup"><span data-stu-id="8dcc1-385">Constant</span></span> | <span data-ttu-id="8dcc1-386">CONFIGURATION</span><span class="sxs-lookup"><span data-stu-id="8dcc1-386">CONFIGURATION</span></span>                     |
| <span data-ttu-id="8dcc1-387">2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-387">2</span></span>      | <span data-ttu-id="8dcc1-388">wTotalLength</span><span class="sxs-lookup"><span data-stu-id="8dcc1-388">wTotalLength</span></span>        | <span data-ttu-id="8dcc1-389">2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-389">2</span></span>    | <span data-ttu-id="8dcc1-390">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-390">Number</span></span>   | <span data-ttu-id="8dcc1-391">Longitud total de los datos devueltos para esta configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-391">Total length of data returned for this configuration.</span></span> <span data-ttu-id="8dcc1-392">Incluye la longitud combinada de todos los descriptores (de configuración, interfaz, punto de conexión y de clase o específico del proveedor) devueltos para esta configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-392">Includes the combined length of all descriptors (configuration, interface, endpoint, and class or vendor specific) returned for this configuration.</span></span> |
| <span data-ttu-id="8dcc1-393">4</span><span class="sxs-lookup"><span data-stu-id="8dcc1-393">4</span></span>      | <span data-ttu-id="8dcc1-394">bNumInterfaces</span><span class="sxs-lookup"><span data-stu-id="8dcc1-394">bNumInterfaces</span></span>      | <span data-ttu-id="8dcc1-395">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-395">1</span></span>    | <span data-ttu-id="8dcc1-396">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-396">Number</span></span>   | <span data-ttu-id="8dcc1-397">Número de interfaces admitidas por esta configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-397">Number of interfaces supported by this configuration.</span></span> |
| <span data-ttu-id="8dcc1-398">5</span><span class="sxs-lookup"><span data-stu-id="8dcc1-398">5</span></span>      | <span data-ttu-id="8dcc1-399">bConfigurationValue</span><span class="sxs-lookup"><span data-stu-id="8dcc1-399">bConfigurationValue</span></span> | <span data-ttu-id="8dcc1-400">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-400">1</span></span>    | <span data-ttu-id="8dcc1-401">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-401">Number</span></span>   | <span data-ttu-id="8dcc1-402">Valor que se va a usar como argumento que se va a establecer.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-402">Value to use as an argument to Set</span></span><br/><span data-ttu-id="8dcc1-403">Configuración para seleccionar esta configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-403">Configuration to select this configuration.</span></span> |
| <span data-ttu-id="8dcc1-404">6</span><span class="sxs-lookup"><span data-stu-id="8dcc1-404">6</span></span>      | <span data-ttu-id="8dcc1-405">iConfiguration</span><span class="sxs-lookup"><span data-stu-id="8dcc1-405">iConfiguration</span></span>      | <span data-ttu-id="8dcc1-406">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-406">1</span></span>    | <span data-ttu-id="8dcc1-407">Índice</span><span class="sxs-lookup"><span data-stu-id="8dcc1-407">Index</span></span>    | <span data-ttu-id="8dcc1-408">Índice de descriptor de cadena que describe esta configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-408">Index of string descriptor describing this configuration.</span></span> |
| <span data-ttu-id="8dcc1-409">7</span><span class="sxs-lookup"><span data-stu-id="8dcc1-409">7</span></span>      | <span data-ttu-id="8dcc1-410">bMAttributes</span><span class="sxs-lookup"><span data-stu-id="8dcc1-410">bMAttributes</span></span>        | <span data-ttu-id="8dcc1-411">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-411">1</span></span>    | <span data-ttu-id="8dcc1-412">Bitmap</span><span class="sxs-lookup"><span data-stu-id="8dcc1-412">Bitmap</span></span>   | <span data-ttu-id="8dcc1-413">Características de configuración D7 Alimentado por bus</span><span class="sxs-lookup"><span data-stu-id="8dcc1-413">Configuration characteristics D7 Bus Powered</span></span><br /><span data-ttu-id="8dcc1-414">D6 Autoalimentado</span><span class="sxs-lookup"><span data-stu-id="8dcc1-414">D6 Self Powered</span></span><br /><span data-ttu-id="8dcc1-415">D5 Activación remota</span><span class="sxs-lookup"><span data-stu-id="8dcc1-415">D5 Remote Wakeup</span></span><br /><span data-ttu-id="8dcc1-416">D4 0 reservado (restablecer a cero)</span><span class="sxs-lookup"><span data-stu-id="8dcc1-416">D4..0 Reserved (reset to 0)</span></span><br /><span data-ttu-id="8dcc1-417">Una configuración de dispositivo que usa la energía del bus y de un origen local establece tanto D7 como D6.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-417">A device configuration that uses power from the bus and a local source sets both D7 and D6.</span></span> <span data-ttu-id="8dcc1-418">La fuente de alimentación real en tiempo de ejecución se puede determinar mediante la solicitud de dispositivo Get Status (Obtener estado).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-418">The actual power source at runtime may be determined using the Get Status device request.</span></span><br /><span data-ttu-id="8dcc1-419">Si una configuración de dispositivo admite la activación remota, D5 se establece en 1.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-419">If a device configuration supports remote wakeup, D5 is set to 1.</span></span> |
| <span data-ttu-id="8dcc1-420">8</span><span class="sxs-lookup"><span data-stu-id="8dcc1-420">8</span></span>      | <span data-ttu-id="8dcc1-421">MaxPower</span><span class="sxs-lookup"><span data-stu-id="8dcc1-421">MaxPower</span></span>            | <span data-ttu-id="8dcc1-422">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-422">1</span></span>    | <span data-ttu-id="8dcc1-423">mA</span><span class="sxs-lookup"><span data-stu-id="8dcc1-423">mA</span></span>       | <span data-ttu-id="8dcc1-424">Consumo de energía máximo del dispositivo USB desde el bus en esta configuración específica cuando el dispositivo está totalmente operativo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-424">Maximum power consumption of USB device from the bus in this specific configuration when the device is fully operational.</span></span><br /><span data-ttu-id="8dcc1-425">Expresado en dos unidades de mA (por ejemplo, 50 = 100 mA).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-425">Expressed in 2 mA units (e.g., 50 = 100 mA).</span></span><br /><span data-ttu-id="8dcc1-426">Nota: Una configuración de dispositivo informa de si la configuración se alimenta por bus tiene autoalimentación.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-426">Note: A device configuration reports whether the configuration is bus-powered or self-powered.</span></span><br /><span data-ttu-id="8dcc1-427">El estado del dispositivo informa de si el dispositivo tiene autoalimentación.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-427">Device status reports whether the device is currently self-powered.</span></span> <span data-ttu-id="8dcc1-428">Si un dispositivo está desconectado de su fuente de alimentación externa, actualiza el estado del dispositivo para indicar que ya no tiene autoalimentación.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-428">If a device is disconnected from its external power source, it updates device status to indicate that it is no longer self-powered.</span></span> |

<span data-ttu-id="8dcc1-429">USBX define un descriptor de configuración USB como se indica a continuación.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-429">USBX defines a USB configuration descriptor as follows.</span></span>

```c
typedef struct UX_CONFIGURATION_DESCRIPTOR_STRUCT
{
    UINT bLength;
    UINT bDescriptorType;
    USHORT wTotalLength;
    UINT bNumInterfaces;
    UINT bConfigurationValue;
    UINT iConfiguration;
    UINT bmAttributes;
    UINT MaxPower;
} UX_CONFIGURATION_DESCRIPTOR;
```

<span data-ttu-id="8dcc1-430">El descriptor de configuración de USB forma parte de un contenedor de configuración descrito como sigue.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-430">The USB configuration descriptor is part of a configuration container described as shown below.</span></span>

```c
typedef struct UX_CONFIGURATION_STRUCT
{
    ULONG ux_configuration_handle;
    ULONG ux_configuration_state;
    struct UX_CONFIGURATION_DESCRIPTOR_STRUCT ux_configuration_descriptor;
    struct UX_INTERFACE_STRUCT *ux_configuration_first_interface;
    struct UX_CONFIGURATION_STRUCT *ux_configuration_next_configuration;
    struct UX_DEVICE_STRUCT *ux_configuration_device;
} UX_CONFIGURATION;
```

- <span data-ttu-id="8dcc1-431">**ux_configuration_handle**: identificador de la configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-431">**ux_configuration_handle**: Handle of the configuration.</span></span> <span data-ttu-id="8dcc1-432">Normalmente, es la dirección de la instancia de esta estructura para la configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-432">This is typically the address of the instance of this structure for the configuration.</span></span>
- <span data-ttu-id="8dcc1-433">**ux_configuration_state**: estado de la configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-433">**ux_configuration_state**: State of the configuration.</span></span>
- <span data-ttu-id="8dcc1-434">**ux_configuration_descriptor**: descriptor de dispositivo USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-434">**ux_configuration_descriptor**: USB device descriptor.</span></span>
- <span data-ttu-id="8dcc1-435">**ux_configuration_first_interface**: puntero a la primera interfaz para esta configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-435">**ux_configuration_first_interface**: Pointer to the first interface for this configuration.</span></span>
- <span data-ttu-id="8dcc1-436">**ux_configuration_next_configuration**: puntero a la siguiente configuración para el mismo dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-436">**ux_configuration_next_configuration**: Pointer to the next configuration for the same device.</span></span>
- <span data-ttu-id="8dcc1-437">**ux_configuration_device**: puntero al propietario del dispositivo de esta configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-437">**ux_configuration_device**: Pointer to the device owner of this configuration.</span></span>

### <a name="interface-descriptors"></a><span data-ttu-id="8dcc1-438">Descriptores de interfaz</span><span class="sxs-lookup"><span data-stu-id="8dcc1-438">Interface Descriptors</span></span>

<span data-ttu-id="8dcc1-439">El descriptor de interfaz describe una interfaz específica dentro de una configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-439">The interface descriptor describes a specific interface within a configuration.</span></span> <span data-ttu-id="8dcc1-440">Una interfaz es una función lógica dentro de un dispositivo USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-440">An interface is a logical function within a USB device.</span></span> <span data-ttu-id="8dcc1-441">Una configuración proporciona una o más interfaces, cada una con cero o más descriptores de punto de conexión que describen un conjunto único de puntos de conexión en la configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-441">A configuration provides one or more interfaces, each with zero or more endpoint descriptors describing a unique set of endpoints within the configuration.</span></span> <span data-ttu-id="8dcc1-442">Cuando una configuración admite más de una interfaz, los descriptores de punto de conexión para una interfaz determinada siguen el descriptor de la interfaz de los datos devueltos por la solicitud de **GET_DESCRIPTOR** para la configuración especificada.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-442">When a configuration supports more than one interface, the endpoint descriptors for a particular interface follow the interface descriptor in the data returned by the **GET_DESCRIPTOR** request for the specified configuration.</span></span>

<span data-ttu-id="8dcc1-443">Un descriptor de interfaz siempre se devuelve como parte de un descriptor de configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-443">An interface descriptor is always returned as part of a configuration descriptor.</span></span> <span data-ttu-id="8dcc1-444">Una solicitud GET_DESCRIPTOR no puede acceder directamente a un descriptor de interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-444">An interface descriptor cannot be directly access by a GET_DESCRIPTOR request.</span></span>

<span data-ttu-id="8dcc1-445">Una interfaz puede incluir configuraciones alternativas que permiten variar los puntos de conexión y sus características una vez configurado el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-445">An interface may include alternate settings that allow the endpoints and/or their characteristics to be varied after the device has been configured.</span></span> <span data-ttu-id="8dcc1-446">La configuración predeterminada de una interfaz siempre es el valor alternativo cero.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-446">The default setting for an interface is always alternate setting zero.</span></span> <span data-ttu-id="8dcc1-447">Una clase puede seleccionar cambiar la configuración alternativa actual para cambiar el comportamiento de la interfaz y las características de los puntos de conexión asociados.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-447">A class can select to change the current alternate setting to change the interface behavior and the characteristics of the associated endpoints.</span></span> <span data-ttu-id="8dcc1-448">La solicitud SET_INTERFACE se usa para seleccionar una configuración alternativa o para volver a la configuración predeterminada.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-448">The SET_INTERFACE request is used to select an alternate setting or to return to the default setting.</span></span>

<span data-ttu-id="8dcc1-449">La configuración alternativa permite variar una parte de la configuración del dispositivo mientras otras interfaces se mantienen en funcionamiento.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-449">Alternate settings allow a portion of the device configuration to be varied while other interfaces remain in operation.</span></span> <span data-ttu-id="8dcc1-450">Si una configuración tiene un valor alternativo para una o varias de sus interfaces, se incluyen un descriptor de interfaz independiente y sus puntos de conexión asociados para cada valor.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-450">If a configuration has alternate settings for one or more of its interfaces, a separate interface descriptor and its associated endpoints are included for each setting.</span></span>

<span data-ttu-id="8dcc1-451">Si una configuración de dispositivo contiene una sola interfaz con dos valores alternativos, la solicitud GET_DESCRIPTOR de la configuración devolvería el descriptor de configuración, el descriptor de la interfaz con los campos **bInterfaceNumber** y **bAlternateSetting** establecidos en cero y, después, los descriptores de punto de conexión para esa configuración, seguidos de otro descriptor de interfaz y sus descriptores de punto de conexión asociados.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-451">If a device configuration contains a single interface with two alternate settings, the GET_DESCRIPTOR request for the configuration would return the configuration descriptor, then the interface descriptor with the **bInterfaceNumber** and **bAlternateSetting** fields set to zero and then the endpoint descriptors for that setting, followed by another interface descriptor and its associated endpoint descriptors.</span></span> <span data-ttu-id="8dcc1-452">El campo **bInterfaceNumber** del segundo descriptor de la interfaz también se establecería en cero, pero el campo **bAlternateSetting** del segundo descriptor de interfaz se establecería en 1, lo que indica que esta configuración alternativa pertenece a la primera interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-452">The second interface descriptor's **bInterfaceNumber** field would also be set to zero, but the **bAlternateSetting** field of the second interface descriptor would be set to 1 indicating that this alternate setting belongs to the first interface.</span></span>

<span data-ttu-id="8dcc1-453">Una interfaz podría no tener ningún punto de conexión asociado, en cuyo caso solo sería válido para dicha interfaz el punto de conexión de control predeterminado.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-453">An interface may not have any endpoints associated with it, in which case only the default control endpoint is valid for that interface.</span></span>

<span data-ttu-id="8dcc1-454">Las configuraciones alternativas se usan principalmente para cambiar el ancho de banda solicitado para los puntos de conexión periódicos asociados a la interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-454">Alternate settings are used mainly to change the requested bandwidth for periodic endpoints associated with the interface.</span></span> <span data-ttu-id="8dcc1-455">Por ejemplo, una interfaz de streaming de un altavoz USB debe tener el primer valor alternativo con una demanda de ancho de banda de 0 en su punto de conexión isocrónico.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-455">For example, a USB speaker streaming interface should have the first alternate setting with a 0 bandwidth demand on its isochronous endpoint.</span></span> <span data-ttu-id="8dcc1-456">Otras configuraciones alternativas pueden seleccionar diferentes requisitos de ancho de banda en función de la frecuencia de streaming de audio.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-456">Other alternate settings may select different bandwidth requirements depending on the audio streaming frequency.</span></span>

<span data-ttu-id="8dcc1-457">El descriptor USB de la interfaz es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-457">The USB descriptor for the interface is as follows:</span></span>

| <span data-ttu-id="8dcc1-458">Offset</span><span class="sxs-lookup"><span data-stu-id="8dcc1-458">Offset</span></span> | <span data-ttu-id="8dcc1-459">Campo</span><span class="sxs-lookup"><span data-stu-id="8dcc1-459">Field</span></span>              | <span data-ttu-id="8dcc1-460">Size</span><span class="sxs-lookup"><span data-stu-id="8dcc1-460">Size</span></span> | <span data-ttu-id="8dcc1-461">Value</span><span class="sxs-lookup"><span data-stu-id="8dcc1-461">Value</span></span>     | <span data-ttu-id="8dcc1-462">Descriptor</span><span class="sxs-lookup"><span data-stu-id="8dcc1-462">Descriptor</span></span>                              |
| ------ | ------------------ | ---- | --------- | --------------------------------------- |
| <span data-ttu-id="8dcc1-463">0</span><span class="sxs-lookup"><span data-stu-id="8dcc1-463">0</span></span>      | <span data-ttu-id="8dcc1-464">BLength</span><span class="sxs-lookup"><span data-stu-id="8dcc1-464">bLength</span></span>            | <span data-ttu-id="8dcc1-465">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-465">1</span></span>    | <span data-ttu-id="8dcc1-466">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-466">Number</span></span>    | <span data-ttu-id="8dcc1-467">Tamaño de este descriptor en bytes.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-467">Size of this descriptor in bytes.</span></span>       |
| <span data-ttu-id="8dcc1-468">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-468">1</span></span>      | <span data-ttu-id="8dcc1-469">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="8dcc1-469">bDescriptorType</span></span>    | <span data-ttu-id="8dcc1-470">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-470">1</span></span>    | <span data-ttu-id="8dcc1-471">Constante</span><span class="sxs-lookup"><span data-stu-id="8dcc1-471">Constant</span></span>  | <span data-ttu-id="8dcc1-472">Tipo de descriptor de interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-472">INTERFACE Descriptor Type</span></span>               |
| <span data-ttu-id="8dcc1-473">2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-473">2</span></span>      | <span data-ttu-id="8dcc1-474">bInterfaceNumber</span><span class="sxs-lookup"><span data-stu-id="8dcc1-474">bInterfaceNumber</span></span>   | <span data-ttu-id="8dcc1-475">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-475">1</span></span>    | <span data-ttu-id="8dcc1-476">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-476">Number</span></span>    | <span data-ttu-id="8dcc1-477">Número de interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-477">Number of interface.</span></span> <span data-ttu-id="8dcc1-478">Valor basado en cero que identifica el índice en la matriz de interfaces simultáneas admitidas por esta configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-478">Zero-based value identifying the index in the array of concurrent interfaces supported by this configuration.</span></span> |
| <span data-ttu-id="8dcc1-479">3</span><span class="sxs-lookup"><span data-stu-id="8dcc1-479">3</span></span>      | <span data-ttu-id="8dcc1-480">bAltenateSetting</span><span class="sxs-lookup"><span data-stu-id="8dcc1-480">bAltenateSetting</span></span>   | <span data-ttu-id="8dcc1-481">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-481">1</span></span>    | <span data-ttu-id="8dcc1-482">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-482">Number</span></span>    | <span data-ttu-id="8dcc1-483">Valor que se usa para seleccionar la configuración alternativa de la interfaz identificada en el campo anterior.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-483">Value used to select alternate setting for the interface identified in the prior field.</span></span> |
| <span data-ttu-id="8dcc1-484">4</span><span class="sxs-lookup"><span data-stu-id="8dcc1-484">4</span></span>      | <span data-ttu-id="8dcc1-485">bNumEndpoints</span><span class="sxs-lookup"><span data-stu-id="8dcc1-485">bNumEndpoints</span></span>      | <span data-ttu-id="8dcc1-486">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-486">1</span></span>    | <span data-ttu-id="8dcc1-487">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-487">Number</span></span>    | <span data-ttu-id="8dcc1-488">Número de puntos de conexión utilizados por esta interfaz (excluyendo el punto de conexión cero).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-488">Number of endpoints used by this interface (excluding endpoint zero).</span></span> <span data-ttu-id="8dcc1-489">Si este valor es 0, esta interfaz solo utiliza el punto de conexión cero.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-489">If this value is 0, this interface only uses endpoint zero.</span></span> |
| <span data-ttu-id="8dcc1-490">5</span><span class="sxs-lookup"><span data-stu-id="8dcc1-490">5</span></span>      | <span data-ttu-id="8dcc1-491">bInterfaceClass</span><span class="sxs-lookup"><span data-stu-id="8dcc1-491">bInterfaceClass</span></span>    | <span data-ttu-id="8dcc1-492">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-492">1</span></span>    | <span data-ttu-id="8dcc1-493">Clase</span><span class="sxs-lookup"><span data-stu-id="8dcc1-493">Class</span></span>     | <span data-ttu-id="8dcc1-494">Código de clase (asignado por USB).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-494">Class code (assigned by USB)</span></span><br /><span data-ttu-id="8dcc1-495">Si este campo se restablece a 0, la interfaz no pertenece a ninguna clase de dispositivo USB especificada.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-495">If this field is reset to 0, the interface does not belong to any USB specified device class.</span></span><br /><span data-ttu-id="8dcc1-496">Si este campo se establece en 0xFF, la clase de interfaz es específica del proveedor.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-496">If this field is set to 0xFF, the interface class is vendor specific.</span></span><br /><span data-ttu-id="8dcc1-497">El resto de los valores están reservados para la asignación por USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-497">All other values are reserved for assignment by USB.</span></span> |
| <span data-ttu-id="8dcc1-498">6</span><span class="sxs-lookup"><span data-stu-id="8dcc1-498">6</span></span>      | <span data-ttu-id="8dcc1-499">bInterfaceSubClass</span><span class="sxs-lookup"><span data-stu-id="8dcc1-499">bInterfaceSubClass</span></span> | <span data-ttu-id="8dcc1-500">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-500">1</span></span>    | <span data-ttu-id="8dcc1-501">Subclase</span><span class="sxs-lookup"><span data-stu-id="8dcc1-501">SubClass</span></span>  | <span data-ttu-id="8dcc1-502">Código de subclase (asignado por USB).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-502">Subclass code (assigned by USB).</span></span><br /><span data-ttu-id="8dcc1-503">Estos códigos se califican mediante el valor del campo bInterfaceClass.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-503">These codes are qualified by the value of the bInterfaceClass field.</span></span> <span data-ttu-id="8dcc1-504">Si el campo bInterfaceClass se restablece a 0, este campo también debe restablecerse a 0.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-504">If the bInterfaceClass field is reset to 0, this field must also be reset to 0.</span></span> <span data-ttu-id="8dcc1-505">Si el campo bInterfaceClass no se establece en 0xFF, se reservan todos los valores para la asignación mediante USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-505">If the bInterfaceClass field is not set to 0xFF, all values are reserved for assignment by USB.</span></span> |
| <span data-ttu-id="8dcc1-506">7</span><span class="sxs-lookup"><span data-stu-id="8dcc1-506">7</span></span>      | <span data-ttu-id="8dcc1-507">bInterfaceProtocol</span><span class="sxs-lookup"><span data-stu-id="8dcc1-507">bInterfaceProtocol</span></span> | <span data-ttu-id="8dcc1-508">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-508">1</span></span>    | <span data-ttu-id="8dcc1-509">Protocolo</span><span class="sxs-lookup"><span data-stu-id="8dcc1-509">Protocol</span></span>  | <span data-ttu-id="8dcc1-510">Código de protocolo (asignado por USB).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-510">Protocol code (assigned by USB).</span></span> <span data-ttu-id="8dcc1-511">Estos códigos se cualifican con el valor de los campos bInterfaceClass y bInterfaceSubClass.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-511">These codes are qualified by the value of the bInterfaceClass and the bInterfaceSubClass fields.</span></span> <span data-ttu-id="8dcc1-512">Si una interfaz admite solicitudes específicas de la clase, este código identifica los protocolos que usa el dispositivo tal y como se define en la especificación de la clase de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-512">If an interface supports class-specific requests, this code identifies the protocols that the device uses as defined by the specification of the device class.</span></span><br /><span data-ttu-id="8dcc1-513">Si este campo se restablece a 0, el dispositivo no usa un protocolo específico en esta interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-513">If this field is reset to 0, the device does not use a class specific protocol on this interface.</span></span> <span data-ttu-id="8dcc1-514">Si este campo se restablece a 0xFF, el dispositivo usa un protocolo específico de proveedor para esta interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-514">If this field is set to 0xFF, the device uses a vendor specific protocol for this interface.</span></span> |
| <span data-ttu-id="8dcc1-515">8</span><span class="sxs-lookup"><span data-stu-id="8dcc1-515">8</span></span>      | <span data-ttu-id="8dcc1-516">iInterface</span><span class="sxs-lookup"><span data-stu-id="8dcc1-516">iInterface</span></span>         | <span data-ttu-id="8dcc1-517">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-517">1</span></span>    | <span data-ttu-id="8dcc1-518">Índice</span><span class="sxs-lookup"><span data-stu-id="8dcc1-518">Index</span></span>     | <span data-ttu-id="8dcc1-519">Índice de descriptor de cadena que describe esta interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-519">Index of string descriptor describing this interface.</span></span> |

<span data-ttu-id="8dcc1-520">USBX define un descriptor de interfaz USB de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-520">USBX defines a USB interface descriptor as follows.</span></span>

```c
typedef struct UX_INTERFACE_DESCRIPTOR_STRUCT
{
    UINT bLength;
    UINT bDescriptorType;
    UINT bInterfaceNumber;
    UINT bAlternateSetting;
    UINT bNumEndpoints;
    UINT bInterfaceClass
    UINT bInterfaceSubClass;
    UINT bInterfaceProtocol;
    UINT iInterface;
} UX_INTERFACE_DESCRIPTOR;
```

<span data-ttu-id="8dcc1-521">El descriptor de interfaz USB forma parte de un contenedor de interfaz descrito como sigue:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-521">The USB interface descriptor is part of an interface container described as follows.</span></span>

```c
typedef struct UX_INTERFACE_STRUCT
{
    ULONG ux_interface_handle;
    ULONG ux_interface_state;
    ULONG ux_interface_current_alternate_setting;
    struct UX_INTERFACE_DESCRIPTOR_STRUCT ux_interface_descriptor;
    struct UX_HOST_CLASS_STRUCT    *ux_interface_class;
    VOID    *ux_interface_class_instance;
    struct UX_ENDPOINT_STRUCT    *ux_interface_first_endpoint;
    struct UX_INTERFACE_STRUCT    *ux_interface_next_interface;
    struct UX_CONFIGURATION_STRUCT    *ux_interface_configuration;
} UX_INTERFACE;
```

- <span data-ttu-id="8dcc1-522">**ux_interface_handle**: identificador de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-522">**ux_interface_handle**: Handle of the interface.</span></span> <span data-ttu-id="8dcc1-523">Normalmente, es la dirección de la instancia de esta estructura para la interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-523">This is typically the address of the instance of this structure for the interface.</span></span>
- <span data-ttu-id="8dcc1-524">**ux_interface_state**: estado de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-524">**ux_interface_state**: State of the interface.</span></span>
- <span data-ttu-id="8dcc1-525">**ux_interface_descriptor**: descriptor de interfaz USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-525">**ux_interface_descriptor**: USB interface descriptor.</span></span>
- <span data-ttu-id="8dcc1-526">**ux_interface_class**: puntero al tipo de clase que posee esta interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-526">**ux_interface_class**: Pointer to the class type that owns this interface.</span></span>
- <span data-ttu-id="8dcc1-527">**ux_interface_class_instance**: puntero a la instancia de la clase a la que pertenece esta interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-527">**ux_interface_class_instance**: Pointer to the instance of the class that owns this interface.</span></span>
- <span data-ttu-id="8dcc1-528">**ux_interface_first_endpoint**: puntero al primer punto de conexión registrado con esta interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-528">**ux_interface_first_endpoint**: Pointer to the first endpoint registered with this interface.</span></span>
- <span data-ttu-id="8dcc1-529">**ux_interface_next_interface**: puntero a la siguiente interfaz asociada a la configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-529">**ux_interface_next_interface**: Pointer to the next interface associated with the configuration.</span></span>
- <span data-ttu-id="8dcc1-530">**ux_interface_configuration**: puntero al propietario de la configuración de esta interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-530">**ux_interface_configuration**: Pointer to the configuration owner of this interface.</span></span>

### <a name="endpoint-descriptors"></a><span data-ttu-id="8dcc1-531">Descriptores de punto de conexión</span><span class="sxs-lookup"><span data-stu-id="8dcc1-531">Endpoint Descriptors</span></span>

<span data-ttu-id="8dcc1-532">Cada punto de conexión asociado con una interfaz tiene su propio descriptor de punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-532">Each endpoint associated with an interface has its own endpoint descriptor.</span></span> <span data-ttu-id="8dcc1-533">Este descriptor contiene la información requerida por la pila de host para determinar los requisitos de ancho de banda de cada punto de conexión, la carga máxima asociada con el punto de conexión, su periodicidad y su dirección.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-533">This descriptor contains the information required by the host stack to determine the bandwidth requirements of each endpoint, the maximum payload associated with the endpoint, its periodicity, and its direction.</span></span> <span data-ttu-id="8dcc1-534">Un descriptor de extremo siempre lo devuelve un comando GET_DESCRIPTOR para la configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-534">An endpoint descriptor is always returned by a GET_DESCRIPTOR command for the configuration.</span></span>

<span data-ttu-id="8dcc1-535">El punto de conexión de control predeterminado asociado al descriptor de dispositivo no se cuenta como parte de los puntos de conexión asociados a la interfaz y, por tanto, no se devuelve en este descriptor.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-535">The default control endpoint associated with the device descriptor is not counted as part of the endpoint(s) associated with the interface and therefore not returned in this descriptor.</span></span>

<span data-ttu-id="8dcc1-536">Cuando el software del host solicita un cambio de la configuración alternativa para una interfaz, todos los puntos de conexión asociados y sus recursos USB se modifican según la nueva configuración alternativa.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-536">When the host software requests a change of the alternate setting for an interface, all the associated endpoints and their USB resources are modified according to the new alternate setting.</span></span>

<span data-ttu-id="8dcc1-537">Los puntos de conexión no se pueden compartir entre las interfaces, a excepción de los puntos de conexión de control predeterminados.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-537">Except for the default control endpoints, endpoints cannot be share between interfaces.</span></span>

| <span data-ttu-id="8dcc1-538">Offset</span><span class="sxs-lookup"><span data-stu-id="8dcc1-538">Offset</span></span> | <span data-ttu-id="8dcc1-539">Campo</span><span class="sxs-lookup"><span data-stu-id="8dcc1-539">Field</span></span>            | <span data-ttu-id="8dcc1-540">Size</span><span class="sxs-lookup"><span data-stu-id="8dcc1-540">Size</span></span> | <span data-ttu-id="8dcc1-541">Value</span><span class="sxs-lookup"><span data-stu-id="8dcc1-541">Value</span></span>    | <span data-ttu-id="8dcc1-542">Descripción</span><span class="sxs-lookup"><span data-stu-id="8dcc1-542">Description</span></span>                       |
| ------ | ---------------- | ---- | -------- | --------------------------------- |
| <span data-ttu-id="8dcc1-543">0</span><span class="sxs-lookup"><span data-stu-id="8dcc1-543">0</span></span>      | <span data-ttu-id="8dcc1-544">BLength</span><span class="sxs-lookup"><span data-stu-id="8dcc1-544">bLength</span></span>          | <span data-ttu-id="8dcc1-545">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-545">1</span></span>    | <span data-ttu-id="8dcc1-546">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-546">Number</span></span>   | <span data-ttu-id="8dcc1-547">Tamaño de este descriptor en bytes.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-547">Size of this descriptor in bytes.</span></span> |
| <span data-ttu-id="8dcc1-548">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-548">1</span></span>      | <span data-ttu-id="8dcc1-549">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="8dcc1-549">bDescriptorType</span></span>  | <span data-ttu-id="8dcc1-550">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-550">1</span></span>    | <span data-ttu-id="8dcc1-551">Constante</span><span class="sxs-lookup"><span data-stu-id="8dcc1-551">Constant</span></span> | <span data-ttu-id="8dcc1-552">Tipo de descriptor de punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-552">ENDPOINT Descriptor Type.</span></span> |
| <span data-ttu-id="8dcc1-553">2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-553">2</span></span>      | <span data-ttu-id="8dcc1-554">bEndpointAddress</span><span class="sxs-lookup"><span data-stu-id="8dcc1-554">bEndpointAddress</span></span> | <span data-ttu-id="8dcc1-555">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-555">1</span></span>    | <span data-ttu-id="8dcc1-556">Punto de conexión</span><span class="sxs-lookup"><span data-stu-id="8dcc1-556">Endpoint</span></span> | <span data-ttu-id="8dcc1-557">La dirección del punto de conexión en el dispositivo USB descrito por este descriptor.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-557">The address of the endpoint on the USB device described by this descriptor.</span></span> <span data-ttu-id="8dcc1-558">La dirección se codifica de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-558">The address is encoded as follows:</span></span><br /><span data-ttu-id="8dcc1-559">Bit 3... 0: Número de punto de conexión</span><span class="sxs-lookup"><span data-stu-id="8dcc1-559">Bit 3...0: The endpoint number</span></span><br /><span data-ttu-id="8dcc1-560">Bit 6... 4: Reservado, restablecer a cero</span><span class="sxs-lookup"><span data-stu-id="8dcc1-560">Bit 6...4: Reserved, reset to zero</span></span><br /><span data-ttu-id="8dcc1-561">Bit 7: Dirección, omitido para puntos de conexión de control</span><span class="sxs-lookup"><span data-stu-id="8dcc1-561">Bit 7: Direction, ignored for control endpoints</span></span><br /><span data-ttu-id="8dcc1-562">0 = Punto de conexión de salida</span><span class="sxs-lookup"><span data-stu-id="8dcc1-562">0 = OUT endpoint</span></span><br /><span data-ttu-id="8dcc1-563">1 = Punto de conexión de entrada</span><span class="sxs-lookup"><span data-stu-id="8dcc1-563">1 = IN endpoint</span></span> |
| <span data-ttu-id="8dcc1-564">3</span><span class="sxs-lookup"><span data-stu-id="8dcc1-564">3</span></span>      | <span data-ttu-id="8dcc1-565">bmAttributes</span><span class="sxs-lookup"><span data-stu-id="8dcc1-565">bmAttributes</span></span>     | <span data-ttu-id="8dcc1-566">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-566">1</span></span>    | <span data-ttu-id="8dcc1-567">Bitmap</span><span class="sxs-lookup"><span data-stu-id="8dcc1-567">Bitmap</span></span>   | <span data-ttu-id="8dcc1-568">Este campo describe los atributos del punto de conexión cuando se configura mediante el campo **bConfigurationValue**.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-568">This field describes the endpoint's attributes when it is configured using the **bConfigurationValue** field.</span></span> <span data-ttu-id="8dcc1-569">Bits 1... 0: Tipo de transferencia</span><span class="sxs-lookup"><span data-stu-id="8dcc1-569">Bits 1..0: Transfer Type</span></span><br /><span data-ttu-id="8dcc1-570">00 = Control</span><span class="sxs-lookup"><span data-stu-id="8dcc1-570">00 = Control</span></span><br /><span data-ttu-id="8dcc1-571">01 = Isocrónico</span><span class="sxs-lookup"><span data-stu-id="8dcc1-571">01 = Isochronous</span></span><br /><span data-ttu-id="8dcc1-572">10 = Masivo</span><span class="sxs-lookup"><span data-stu-id="8dcc1-572">10 = Bulk</span></span><br /><span data-ttu-id="8dcc1-573">11 = Interrupción</span><span class="sxs-lookup"><span data-stu-id="8dcc1-573">11 = Interrupt</span></span><br /><span data-ttu-id="8dcc1-574">Si no se trata de un punto de conexión isocrónico, los bits 5..2 están reservados y deben establecerse en cero.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-574">If not an isochronous endpoint, bits 5..2 are reserved and must be set to zero.</span></span> <span data-ttu-id="8dcc1-575">Si es isocrónico, se define de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-575">If isochronous, they are defined as follows:</span></span><br /><span data-ttu-id="8dcc1-576">Bits 3..2: Tipo de sincronización</span><span class="sxs-lookup"><span data-stu-id="8dcc1-576">Bits 3..2: Synchronization Type</span></span><br /><span data-ttu-id="8dcc1-577">00 = Sin sincronización</span><span class="sxs-lookup"><span data-stu-id="8dcc1-577">00 = No Synchronization</span></span><br /><span data-ttu-id="8dcc1-578">01 = Asincrónico</span><span class="sxs-lookup"><span data-stu-id="8dcc1-578">01 = Asynchronous</span></span><br /><span data-ttu-id="8dcc1-579">10 = Adaptable</span><span class="sxs-lookup"><span data-stu-id="8dcc1-579">10 = Adaptive</span></span><br /><span data-ttu-id="8dcc1-580">11 = Sincrónico</span><span class="sxs-lookup"><span data-stu-id="8dcc1-580">11 = Synchronous</span></span><br /><span data-ttu-id="8dcc1-581">Bits 5..4: Tipo de uso</span><span class="sxs-lookup"><span data-stu-id="8dcc1-581">Bits 5..4: Usage Type</span></span><br /><span data-ttu-id="8dcc1-582">00 = Punto de conexión de datos</span><span class="sxs-lookup"><span data-stu-id="8dcc1-582">00 = Data endpoint</span></span><br /><span data-ttu-id="8dcc1-583">01 = Punto de conexión de comentarios</span><span class="sxs-lookup"><span data-stu-id="8dcc1-583">01 = Feedback endpoint</span></span><br /><span data-ttu-id="8dcc1-584">10 = Punto de conexión de datos de comentarios implícitos</span><span class="sxs-lookup"><span data-stu-id="8dcc1-584">10 = Implicit feedback data endpoint</span></span><br /><span data-ttu-id="8dcc1-585">11 = Reservado</span><span class="sxs-lookup"><span data-stu-id="8dcc1-585">11 = Reserved</span></span> |
| <span data-ttu-id="8dcc1-586">4</span><span class="sxs-lookup"><span data-stu-id="8dcc1-586">4</span></span>      | <span data-ttu-id="8dcc1-587">wMaxPacketSize</span><span class="sxs-lookup"><span data-stu-id="8dcc1-587">wMaxPacketSize</span></span>   | <span data-ttu-id="8dcc1-588">2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-588">2</span></span>    | <span data-ttu-id="8dcc1-589">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-589">Number</span></span>   | <span data-ttu-id="8dcc1-590">Tamaño máximo de paquete que este punto de conexión puede enviar o recibir cuando se selecciona esta configuración.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-590">Maximum packet size this endpoint is capable of sending or receiving when this configuration is selected.</span></span><br /><span data-ttu-id="8dcc1-591">En el caso de los puntos de conexión isocrónicos, este valor se usa para reservar la hora de bus en la programación, necesaria para las cargas de datos de (micro)fotogramas.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-591">For isochronous endpoints, this value is used to reserve the bus time in the schedule, required for the per-(micro)frame data payloads.</span></span> <span data-ttu-id="8dcc1-592">La canalización puede usar, de manera continuada, menos ancho de banda que la reservada.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-592">The pipe may, on an ongoing basis, actually use less bandwidth than that reserved.</span></span> <span data-ttu-id="8dcc1-593">El dispositivo notifica, si es necesario, el ancho de banda real usado a través de sus mecanismos normales no definidos por USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-593">The device reports, if necessary, the actual bandwidth used via its normal, non-USB defined mechanisms.</span></span><br /><span data-ttu-id="8dcc1-594">Para todos los puntos de conexión, los bits 10..0 especifican el tamaño máximo del paquete (en bytes).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-594">For all endpoints, bits 10..0 specify the maximum packet size (in bytes).</span></span><br /><span data-ttu-id="8dcc1-595">En el caso de los puntos de conexión isocrónicos y de interrupción de alta velocidad:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-595">For high-speed isochronous and interrupt endpoints:</span></span><br /><span data-ttu-id="8dcc1-596">Bits 12..11 especifican el número de oportunidades de transacciones adicionales por micrograma: 00 = ninguna (1 transacción por micrograma)</span><span class="sxs-lookup"><span data-stu-id="8dcc1-596">Bits 12..11 specify the number of additional transaction opportunities per microframe: 00 = None (1 transaction per microframe)</span></span><br /><span data-ttu-id="8dcc1-597">01 = 1 adicional (2 por micrograma)</span><span class="sxs-lookup"><span data-stu-id="8dcc1-597">01 = 1 additional (2 per microframe)</span></span><br /><span data-ttu-id="8dcc1-598">10 = 2 adicionales (3 por micrograma)</span><span class="sxs-lookup"><span data-stu-id="8dcc1-598">10 = 2 additional (3 per microframe)</span></span><br /><span data-ttu-id="8dcc1-599">11 = Reservado</span><span class="sxs-lookup"><span data-stu-id="8dcc1-599">11 = Reserved</span></span><br /><span data-ttu-id="8dcc1-600">Los bits 15..13 están reservados y deben establecerse en cero.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-600">Bits 15..13 are reserved and must be set to zero.</span></span> |
| <span data-ttu-id="8dcc1-601">6</span><span class="sxs-lookup"><span data-stu-id="8dcc1-601">6</span></span>      | <span data-ttu-id="8dcc1-602">bInterval</span><span class="sxs-lookup"><span data-stu-id="8dcc1-602">bInterval</span></span>        | <span data-ttu-id="8dcc1-603">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-603">1</span></span>     | <span data-ttu-id="8dcc1-604">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-604">Number</span></span>   | <span data-ttu-id="8dcc1-605">Intervalo de número para el punto de conexión de sondeo para las transferencias de datos.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-605">Number interval for polling endpoint for data transfers.</span></span><br /><span data-ttu-id="8dcc1-606">Expresado en marcos o microgramas en función de la velocidad de funcionamiento del dispositivo (es decir, un milisegundo o 125 unidades de μs).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-606">Expressed in frames or microframes depending on the device operating speed (i.e., either 1 millisecond or 125 µs units).</span></span><br /><span data-ttu-id="8dcc1-607">En el caso de los extremos isocrónicos de alta velocidad o velocidad máxima, este valor debe estar en el intervalo comprendido entre 1 y 16.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-607">For full-/high-speed isochronous endpoints, this value must be in the range from 1 to 16.</span></span> <span data-ttu-id="8dcc1-608">**BInterval** se usa como exponente para un valor de 2bInterval-1; por ejemplo, un **bInterval** de 4 significa un período de 8 (24-1).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-608">The **bInterval** is used as the exponent for a 2bInterval-1 value; e.g., a **bInterval** 4 means a period of 8 (24-1).</span></span><br /><span data-ttu-id="8dcc1-609">En el caso de los puntos de conexión de interrupción completos, el valor de este campo puede ser de 1 a 255.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-609">For full-/low-speed interrupt endpoints, the value of this field may be from 1 to 255.</span></span><br /><span data-ttu-id="8dcc1-610">Para puntos de conexión de interrupción de alta velocidad, **bInterval** se usa como exponente para un valor de 2bInterval-1; por ejemplo, un **bInterval** de 4 significa un período de 8 (24-1).</span><span class="sxs-lookup"><span data-stu-id="8dcc1-610">For high-speed interrupt endpoints, the **bInterval** is used as the exponent for a 2bInterval-1 value; e.g., a **bInterval** 4 means a period of 8 (24-1).</span></span> <span data-ttu-id="8dcc1-611">Este valor debe estar comprendido entre 1 y 16.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-611">This value must be from 1 to 16.</span></span><br /><span data-ttu-id="8dcc1-612">En el caso de los puntos de conexión de salida de control o masivos de alta velocidad, **bInterval** especifica la tasa de NAK máxima del punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-612">For high-speed bulk/control OUT endpoints, the **bInterval** specify the maximum NAK rate of the endpoint.</span></span> <span data-ttu-id="8dcc1-613">Un valor de cero indica que el punto de conexión nunca envía NAK.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-613">A value of 0 indicates the endpoint never NAKs.</span></span> <span data-ttu-id="8dcc1-614">Otros valores indican como máximo una señal NAK cada **bInterval** de microgramas.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-614">Other values indicate at most one NAK each **bInterval** of microframes.</span></span><br /><span data-ttu-id="8dcc1-615">Este valor debe estar comprendido entre 0 y 255.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-615">This value must be in the range from 0 to 255.</span></span> |

<span data-ttu-id="8dcc1-616">USBX define un descriptor de punto de conexión USB de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-616">USBX defines a USB endpoint descriptor as follows:</span></span>

```c
typedef struct UX_ENDPOINT_DESCRIPTOR_STRUCT
{
    UINT bLength;
    UINT bDescriptorType;
    UINT bEndpointAddress;
    UINT bmAttributes;
    USHORT wMaxPacketSize;
    UINT bInterval;
} UX_ENDPOINT_DESCRIPTOR;
```

<span data-ttu-id="8dcc1-617">El descriptor de punto de conexión USB forma parte de un contenedor de puntos de conexión, que se describe como sigue:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-617">The USB endpoint descriptor is part of an endpoint container, which is described as follows.</span></span>

```c
typedef struct UX_ENDPOINT_STRUCT {
    ULONG    ux_endpoint_handle;
    ULONG    ux_endpoint_state;
    VOID    *ux_endpoint_ed;
    struct UX_ENDPOINT_DESCRIPTOR_STRUCT    ux_endpoint_descriptor;
    struct UX_ENDPOINT_STRUCT    *ux_endpoint_next_endpoint;
    struct UX_INTERFACE_STRUCT    *ux_endpoint_interface;
    struct UX_DEVICE_STRUCT    *ux_endpoint_device;
    struct UX_TRANSFER REQUEST_STRUCT    ux_endpoint_transfer request;
} UX_ENDPOINT;

```

- <span data-ttu-id="8dcc1-618">**ux_endpoint_handle**: identificador del punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-618">**ux_endpoint_handle**: Handle of the endpoint.</span></span> <span data-ttu-id="8dcc1-619">Normalmente, es la dirección de la instancia de esta estructura para el punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-619">This is typically the address of the instance of this structure for the endpoint.</span></span>
- <span data-ttu-id="8dcc1-620">**ux_endpoint_state**: estado del punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-620">**ux_endpoint_state**: State of the endpoint.</span></span>
- <span data-ttu-id="8dcc1-621">**ux_endpoint_ed**: puntero al punto de conexión físico en la capa del controladora de host.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-621">**ux_endpoint_ed**: Pointer to the physical endpoint at the host controller layer.</span></span>
- <span data-ttu-id="8dcc1-622">**ux_endpoint_descriptor**: descriptor de punto de conexión USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-622">**ux_endpoint_descriptor**: USB endpoint descriptor.</span></span>
- <span data-ttu-id="8dcc1-623">**ux_endpoint_next_endpoint**: puntero al siguiente punto de conexión que pertenece a la misma interfaz.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-623">**ux_endpoint_next_endpoint**: Pointer to the next endpoint that belongs to the same interface.</span></span>
- <span data-ttu-id="8dcc1-624">**ux_endpoint_interface**: puntero a la interfaz que posee esta interfaz de punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-624">**ux_endpoint_interface**: Pointer to the interface that owns this endpoint interface.</span></span>
- <span data-ttu-id="8dcc1-625">**ux_endpoint_device**: puntero al contenedor del dispositivo primario.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-625">**ux_endpoint_device**: Pointer to the parent device container.</span></span>
- <span data-ttu-id="8dcc1-626">**ux_endpoint_transfer solicitud**: solicitud de transferencia USB usada para enviar y recibir datos desde el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-626">**ux_endpoint_transfer request**: USB transfer request used to send/receive data from to/from the device.</span></span>

### <a name="string-descriptors"></a><span data-ttu-id="8dcc1-627">Descriptores de cadena</span><span class="sxs-lookup"><span data-stu-id="8dcc1-627">String descriptors</span></span>

<span data-ttu-id="8dcc1-628">Los descriptores de cadena son opcionales.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-628">String descriptors are optional.</span></span> <span data-ttu-id="8dcc1-629">Si un dispositivo no admite descriptores de cadena, todas las referencias a descriptores de cadena dentro del dispositivo, configuración y descriptores de interfaz deben restablecerse a cero.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-629">If a device does not support string descriptors, all references to string descriptors within device, configuration, and interface descriptors must be reset to zero.</span></span>

<span data-ttu-id="8dcc1-630">Los descriptores de cadena utilizan codificación Unicode, lo que permite la compatibilidad con varios conjuntos de caracteres.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-630">String descriptors use UNICODE encoding, thus allowing the support for several character sets.</span></span> <span data-ttu-id="8dcc1-631">Las cadenas de un dispositivo USB pueden admitir varios idiomas.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-631">The strings in a USB device may support multiple languages.</span></span> <span data-ttu-id="8dcc1-632">Cuando se solicita un descriptor de cadena, el solicitante especifica el idioma deseado mediante un identificador de idioma definido por el USB.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-632">When requesting a string descriptor, the requester specifies the desired language using a language ID defined by the USB-IF.</span></span> <span data-ttu-id="8dcc1-633">Puede encontrar la lista de LANGID USB definidos actualmente en el apéndice USBX ??</span><span class="sxs-lookup"><span data-stu-id="8dcc1-633">The list of currently defined USB LANGIDs can be found in the USBX appendix ??.</span></span>
<span data-ttu-id="8dcc1-634">El índice de cadena cero para todos los lenguajes devuelve un descriptor de cadena que contiene una matriz de códigos LANGID de dos bytes admitidos por el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-634">String index zero for all languages returns a string descriptor that contains an array of two-byte LANGID codes supported by the device.</span></span> <span data-ttu-id="8dcc1-635">Obsérvese que la cadena Unicode no finaliza en cero.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-635">It should be noted that the UNICODE string is not 0 terminated.</span></span> <span data-ttu-id="8dcc1-636">En su lugar, el tamaño de la matriz de cadenas se calcula restando dos al tamaño de la matriz que se encuentra en el primer byte del descriptor.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-636">Instead, the size of the string array is computed by subtracting two from the size of the array contained in the first byte of the descriptor.</span></span>

<span data-ttu-id="8dcc1-637">El descriptor cero de cadena USB se codifica como se indica a continuación.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-637">The USB string descriptor 0 is encoded as follows.</span></span>

| <span data-ttu-id="8dcc1-638">Offset</span><span class="sxs-lookup"><span data-stu-id="8dcc1-638">Offset</span></span> | <span data-ttu-id="8dcc1-639">Campo</span><span class="sxs-lookup"><span data-stu-id="8dcc1-639">Field</span></span>           | <span data-ttu-id="8dcc1-640">Size</span><span class="sxs-lookup"><span data-stu-id="8dcc1-640">Size</span></span> | <span data-ttu-id="8dcc1-641">Value</span><span class="sxs-lookup"><span data-stu-id="8dcc1-641">Value</span></span>    | <span data-ttu-id="8dcc1-642">Descripción</span><span class="sxs-lookup"><span data-stu-id="8dcc1-642">Description</span></span>                      |
| ------ | --------------- | ---- | -------- | -------------------------------- |
| <span data-ttu-id="8dcc1-643">0</span><span class="sxs-lookup"><span data-stu-id="8dcc1-643">0</span></span>      | <span data-ttu-id="8dcc1-644">BLength</span><span class="sxs-lookup"><span data-stu-id="8dcc1-644">bLength</span></span>         | <span data-ttu-id="8dcc1-645">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-645">1</span></span>    | <span data-ttu-id="8dcc1-646">N+2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-646">N+2</span></span>      | <span data-ttu-id="8dcc1-647">Tamaño de este descriptor en bytes.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-647">Size of this descriptor in bytes</span></span> |
| <span data-ttu-id="8dcc1-648">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-648">1</span></span>      | <span data-ttu-id="8dcc1-649">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="8dcc1-649">bDescriptorType</span></span> | <span data-ttu-id="8dcc1-650">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-650">1</span></span>    | <span data-ttu-id="8dcc1-651">Constante</span><span class="sxs-lookup"><span data-stu-id="8dcc1-651">Constant</span></span> | <span data-ttu-id="8dcc1-652">Tipo de descriptor de cadena</span><span class="sxs-lookup"><span data-stu-id="8dcc1-652">STRING Descriptor Type</span></span>           |
| <span data-ttu-id="8dcc1-653">2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-653">2</span></span>      | <span data-ttu-id="8dcc1-654">wLANGID[0]</span><span class="sxs-lookup"><span data-stu-id="8dcc1-654">wLANGID[0]</span></span>      | <span data-ttu-id="8dcc1-655">2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-655">2</span></span>    | <span data-ttu-id="8dcc1-656">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-656">Number</span></span>   | <span data-ttu-id="8dcc1-657">LANGID code 0</span><span class="sxs-lookup"><span data-stu-id="8dcc1-657">LANGID code 0</span></span>                    |
| <span data-ttu-id="8dcc1-658">...</span><span class="sxs-lookup"><span data-stu-id="8dcc1-658">...</span></span>    | <span data-ttu-id="8dcc1-659">...]</span><span class="sxs-lookup"><span data-stu-id="8dcc1-659">...]</span></span>            | <span data-ttu-id="8dcc1-660">...</span><span class="sxs-lookup"><span data-stu-id="8dcc1-660">...</span></span>  | <span data-ttu-id="8dcc1-661">...</span><span class="sxs-lookup"><span data-stu-id="8dcc1-661">...</span></span>      | <span data-ttu-id="8dcc1-662">...</span><span class="sxs-lookup"><span data-stu-id="8dcc1-662">...</span></span>                              |
| <span data-ttu-id="8dcc1-663">N</span><span class="sxs-lookup"><span data-stu-id="8dcc1-663">N</span></span>      | <span data-ttu-id="8dcc1-664">wLANGID[n]</span><span class="sxs-lookup"><span data-stu-id="8dcc1-664">wLANGID[n]</span></span>      | <span data-ttu-id="8dcc1-665">2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-665">2</span></span>    | <span data-ttu-id="8dcc1-666">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-666">Number</span></span>   | <span data-ttu-id="8dcc1-667">LANGID code n</span><span class="sxs-lookup"><span data-stu-id="8dcc1-667">LANGID code n</span></span>                    |

<span data-ttu-id="8dcc1-668">Otros descriptores de cadena USB se codifican como se indica a continuación.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-668">Other USB string descriptors are encoded as follows.</span></span>

| <span data-ttu-id="8dcc1-669">Offset</span><span class="sxs-lookup"><span data-stu-id="8dcc1-669">Offset</span></span> | <span data-ttu-id="8dcc1-670">Campo</span><span class="sxs-lookup"><span data-stu-id="8dcc1-670">Field</span></span>           | <span data-ttu-id="8dcc1-671">Size</span><span class="sxs-lookup"><span data-stu-id="8dcc1-671">Size</span></span> | <span data-ttu-id="8dcc1-672">Value</span><span class="sxs-lookup"><span data-stu-id="8dcc1-672">Value</span></span>    | <span data-ttu-id="8dcc1-673">Descripción</span><span class="sxs-lookup"><span data-stu-id="8dcc1-673">Description</span></span>                      |
| ------ | --------------- | ---- | -------- | -------------------------------- |
| <span data-ttu-id="8dcc1-674">0</span><span class="sxs-lookup"><span data-stu-id="8dcc1-674">0</span></span>      | <span data-ttu-id="8dcc1-675">BLength</span><span class="sxs-lookup"><span data-stu-id="8dcc1-675">bLength</span></span>         | <span data-ttu-id="8dcc1-676">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-676">1</span></span>    | <span data-ttu-id="8dcc1-677">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-677">Number</span></span>   | <span data-ttu-id="8dcc1-678">Tamaño de este descriptor en bytes.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-678">Size of this descriptor in bytes</span></span> |
| <span data-ttu-id="8dcc1-679">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-679">1</span></span>      | <span data-ttu-id="8dcc1-680">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="8dcc1-680">bDescriptorType</span></span> | <span data-ttu-id="8dcc1-681">1</span><span class="sxs-lookup"><span data-stu-id="8dcc1-681">1</span></span>    | <span data-ttu-id="8dcc1-682">Constante</span><span class="sxs-lookup"><span data-stu-id="8dcc1-682">Constant</span></span> | <span data-ttu-id="8dcc1-683">Tipo de descriptor de cadena</span><span class="sxs-lookup"><span data-stu-id="8dcc1-683">STRING Descriptor Type</span></span>           |
| <span data-ttu-id="8dcc1-684">2</span><span class="sxs-lookup"><span data-stu-id="8dcc1-684">2</span></span>      | <span data-ttu-id="8dcc1-685">bString</span><span class="sxs-lookup"><span data-stu-id="8dcc1-685">bString</span></span>         | <span data-ttu-id="8dcc1-686">n</span><span class="sxs-lookup"><span data-stu-id="8dcc1-686">n</span></span>    | <span data-ttu-id="8dcc1-687">Number</span><span class="sxs-lookup"><span data-stu-id="8dcc1-687">Number</span></span>   | <span data-ttu-id="8dcc1-688">Cadena codificada de Unicode.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-688">UNICODE encoded string</span></span>           |

<span data-ttu-id="8dcc1-689">USBX define un descriptor de cadena USB de longitud distinta de cero como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="8dcc1-689">USBX defines a non-zero length USB string descriptor as follows:</span></span>

```c
typedef struct UX_STRING_DESCRIPTOR_STRUCT
{
    UINT bLength;
    UINT bDescriptorType;
    USHORT bString[1];
} UX_STRING_DESCRIPTOR;
```

### <a name="functional-descriptors"></a><span data-ttu-id="8dcc1-690">Descriptores funcionales</span><span class="sxs-lookup"><span data-stu-id="8dcc1-690">Functional Descriptors</span></span>

<span data-ttu-id="8dcc1-691">Los descriptores funcionales también se conocen como descriptores específicos de clase.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-691">Functional descriptors are also known as class-specific descriptors.</span></span> <span data-ttu-id="8dcc1-692">Normalmente usan las mismas estructuras básicas que los descriptores genéricos y permiten que haya información adicional disponible para la clase.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-692">They normally use the same basic structures as generic descriptors and allow for additional information to be available to the class.</span></span> <span data-ttu-id="8dcc1-693">Por ejemplo, en el caso del altavoz de audio USB, los descriptores específicos de la clase permiten que la clase de audio recupere para cada configuración alternativa el tipo de frecuencia de audio admitido.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-693">For example, in the case of the USB audio speaker, class specific descriptors allow the audio class to retrieve for each alternate setting the type of audio frequency supported.</span></span>

### <a name="usbx-device-descriptor-framework-in-memory"></a><span data-ttu-id="8dcc1-694">Marco de descriptor de dispositivo USBX en memoria</span><span class="sxs-lookup"><span data-stu-id="8dcc1-694">USBX Device Descriptor Framework in Memory</span></span>

<span data-ttu-id="8dcc1-695">USBX mantiene la mayoría de los descriptores de dispositivo en memoria, es decir, todos los descriptores excepto la cadena y los descriptores funcionales.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-695">USBX maintains most device descriptors in memory, that is, all descriptors except the string and functional descriptors.</span></span> <span data-ttu-id="8dcc1-696">En el diagrama siguiente se muestra cómo se almacenan y se relacionan estos descriptores.</span><span class="sxs-lookup"><span data-stu-id="8dcc1-696">The following diagram shows how these descriptors are stored and related.</span></span>

![Marco de descriptor de dispositivo USBX en memoria](./media/usbx-host-stack/usbx-device-descriptor-framework.png)

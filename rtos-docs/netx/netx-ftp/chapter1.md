---
title: 'Capítulo 1: Introducción a Azure RTOS NetX FTP'
description: El protocolo de transferencia de archivos (FTP) es un protocolo diseñado para las transferencias de archivos. FTP emplea servicios de protocolo de control de transmisión (TCP) de confianza para realizar su función de transferencia de archivos.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 86e132daf96f9039631234f10c8e239b61ad5126
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/22/2021
ms.locfileid: "104815209"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-ftp"></a><span data-ttu-id="036ea-104">Capítulo 1: Introducción a Azure RTOS NetX FTP</span><span class="sxs-lookup"><span data-stu-id="036ea-104">Chapter 1 - Introduction to Azure RTOS NetX FTP</span></span>

<span data-ttu-id="036ea-105">El protocolo de transferencia de archivos (FTP) es un protocolo diseñado para las transferencias de archivos.</span><span class="sxs-lookup"><span data-stu-id="036ea-105">The File Transfer Protocol (FTP) is a protocol designed for file transfers.</span></span> <span data-ttu-id="036ea-106">FTP emplea servicios de protocolo de control de transmisión (TCP) de confianza para realizar su función de transferencia de archivos.</span><span class="sxs-lookup"><span data-stu-id="036ea-106">FTP utilizes reliable Transmission Control Protocol (TCP) services to perform its file transfer function.</span></span> <span data-ttu-id="036ea-107">Por este motivo, FTP es un protocolo de transferencia de archivos altamente fiable.</span><span class="sxs-lookup"><span data-stu-id="036ea-107">Because of this, FTP is a highly reliable file transfer protocol.</span></span> <span data-ttu-id="036ea-108">FTP también es de alto rendimiento.</span><span class="sxs-lookup"><span data-stu-id="036ea-108">FTP is also high-performance.</span></span> <span data-ttu-id="036ea-109">La transferencia de archivos FTP real se realiza en una conexión FTP dedicada.</span><span class="sxs-lookup"><span data-stu-id="036ea-109">The actual FTP file transfer is performed on a dedicated FTP connection.</span></span>

## <a name="ftp-requirements"></a><span data-ttu-id="036ea-110">Requisitos de FTP</span><span class="sxs-lookup"><span data-stu-id="036ea-110">FTP Requirements</span></span>

<span data-ttu-id="036ea-111">Para que funcione correctamente, el paquete Azure RTOS NetX FTP requiere que ya se haya creado una instancia de IP NetX.</span><span class="sxs-lookup"><span data-stu-id="036ea-111">In order to function properly, the Azure RTOS NetX FTP package requires that a NetX IP instance has already been created.</span></span> <span data-ttu-id="036ea-112">Además, TCP debe estar habilitado en la misma instancia de IP.</span><span class="sxs-lookup"><span data-stu-id="036ea-112">In addition, TCP must be enabled on that same IP instance.</span></span> <span data-ttu-id="036ea-113">La parte del cliente FTP del paquete NetX FTP no tiene ningún requisito adicional.</span><span class="sxs-lookup"><span data-stu-id="036ea-113">The FTP Client portion of the NetX FTP package has no further requirements.</span></span>

<span data-ttu-id="036ea-114">La parte del servidor FTP del paquete NetX FTP tiene varios requisitos adicionales.</span><span class="sxs-lookup"><span data-stu-id="036ea-114">The FTP Server portion of the NetX FTP package has several additional requirements.</span></span> <span data-ttu-id="036ea-115">En primer lugar, es necesario tener acceso completo al *conocido puerto 21* de TCP para controlar todas las solicitudes de comandos FTP del cliente y al *conocido puerto 20* para controlar todas las transferencias de datos FTP del cliente.</span><span class="sxs-lookup"><span data-stu-id="036ea-115">First, it requires complete access to TCP *well-known port 21* for handling all Client FTP command requests and *well-known port 20* for handling all Client FTP data transfers.</span></span> <span data-ttu-id="036ea-116">El servidor FTP también está diseñado para su uso con el sistema de archivos incrustados FileX.</span><span class="sxs-lookup"><span data-stu-id="036ea-116">The FTP Server is also designed for use with the FileX embedded file system.</span></span> <span data-ttu-id="036ea-117">Si FileX no está disponible, el usuario puede migrar las partes de FileX usadas a su propio entorno.</span><span class="sxs-lookup"><span data-stu-id="036ea-117">If FileX is not available, the user may port the portions of FileX used to their own environment.</span></span> <span data-ttu-id="036ea-118">Esto se describe en secciones posteriores de esta guía.</span><span class="sxs-lookup"><span data-stu-id="036ea-118">This is discussed in later sections of this guide.</span></span>

## <a name="ftp-constraints"></a><span data-ttu-id="036ea-119">Restricciones de FTP</span><span class="sxs-lookup"><span data-stu-id="036ea-119">FTP Constraints</span></span>

<span data-ttu-id="036ea-120">El estándar FTP tiene muchas opciones relacionadas con la representación de datos de archivos.</span><span class="sxs-lookup"><span data-stu-id="036ea-120">The FTP standard has many options regarding the representation of file data.</span></span> <span data-ttu-id="036ea-121">De forma similar a las implementaciones de UNIX, FTP de NetX supone las siguientes restricciones de formato de archivo:</span><span class="sxs-lookup"><span data-stu-id="036ea-121">Similar to Unix implementations, NetX FTP assumes the following file format constraints:</span></span>

- <span data-ttu-id="036ea-122">Tipo de archivo: **binario**</span><span class="sxs-lookup"><span data-stu-id="036ea-122">File Type: **Binary**</span></span>
- <span data-ttu-id="036ea-123">Formato de archivo: **solo para no impresión**</span><span class="sxs-lookup"><span data-stu-id="036ea-123">File Format: **Nonprint Only**</span></span>
- <span data-ttu-id="036ea-124">Estructura de archivo: **solo estructura de archivos**</span><span class="sxs-lookup"><span data-stu-id="036ea-124">File Structure: **File Structure Only**</span></span>
- <span data-ttu-id="036ea-125">Modo de transmisión: **solo en modo de secuencia**</span><span class="sxs-lookup"><span data-stu-id="036ea-125">Transmission Mode: **Stream Mode Only**</span></span>

## <a name="ftp-file-names"></a><span data-ttu-id="036ea-126">Nombre de archivos FTP</span><span class="sxs-lookup"><span data-stu-id="036ea-126">FTP File Names</span></span>

<span data-ttu-id="036ea-127">Los nombres de archivo FTP deben tener el formato del sistema de archivos de destino (normalmente, FileX).</span><span class="sxs-lookup"><span data-stu-id="036ea-127">FTP file names should be in the format of the target file system (usually FileX).</span></span> <span data-ttu-id="036ea-128">Deben ser cadenas ASCII terminadas en NULL, con información de ruta de acceso completa si es necesario.</span><span class="sxs-lookup"><span data-stu-id="036ea-128">They should be NULL terminated ASCII strings, with full path information if necessary.</span></span> <span data-ttu-id="036ea-129">No hay ningún límite especificado para el tamaño de los nombres de archivo FTP en la implementación FTP de NetX.</span><span class="sxs-lookup"><span data-stu-id="036ea-129">There is no specified limit for the size of FTP file names in the NetX FTP implementation.</span></span> <span data-ttu-id="036ea-130">Sin embargo, el tamaño de carga del grupo de paquetes debe ser capaz de dar cabida a la ruta de acceso máxima y/o al nombre de archivo.</span><span class="sxs-lookup"><span data-stu-id="036ea-130">However, the packet pool payload size should be able to accommodate the maximum path and/or file name.</span></span>

## <a name="ftp-client-commands"></a><span data-ttu-id="036ea-131">Comandos de cliente FTP</span><span class="sxs-lookup"><span data-stu-id="036ea-131">FTP Client Commands</span></span>

<span data-ttu-id="036ea-132">El FTP tiene un mecanismo sencillo para abrir conexiones y realizar operaciones de archivos y directorios.</span><span class="sxs-lookup"><span data-stu-id="036ea-132">The FTP has a simple mechanism for opening connections and performing file and directory operations.</span></span> <span data-ttu-id="036ea-133">Básicamente, hay un conjunto de comandos FTP estándar que emite el cliente después de que una conexión se haya establecido correctamente en el *conocido puerto 21* de TCP.</span><span class="sxs-lookup"><span data-stu-id="036ea-133">There is basically a set of standard FTP commands that are issued by the Client after a connection has been successfully established on the TCP *well-known port 21*.</span></span> <span data-ttu-id="036ea-134">A continuación se muestran algunos de los comandos FTP básicos:</span><span class="sxs-lookup"><span data-stu-id="036ea-134">The following shows some of the basic FTP commands:</span></span>

### <a name="ftp-command-and-meaning"></a><span data-ttu-id="036ea-135">Comandos FTP y significado</span><span class="sxs-lookup"><span data-stu-id="036ea-135">FTP Command and Meaning</span></span>

- <span data-ttu-id="036ea-136">**CWD ruta**: *cambiar el directorio de trabajo*.</span><span class="sxs-lookup"><span data-stu-id="036ea-136">**CWD path**: *Change working directory*</span></span>
- <span data-ttu-id="036ea-137">**DELE nombre de archivo**: *eliminar el nombre de archivo especificado*.</span><span class="sxs-lookup"><span data-stu-id="036ea-137">**DELE filename**: *Delete specified file name*</span></span>
- <span data-ttu-id="036ea-138">**LIST directorio**: *obtener lista de directorios*.</span><span class="sxs-lookup"><span data-stu-id="036ea-138">**LIST directory**: *Get directory listing*</span></span>
- <span data-ttu-id="036ea-139">**MKD directorio**: *crear nuevo directorio*.</span><span class="sxs-lookup"><span data-stu-id="036ea-139">**MKD directory**: *Make new directory*</span></span>
- <span data-ttu-id="036ea-140">**NLIST directorio**: *obtener lista de directorios*.</span><span class="sxs-lookup"><span data-stu-id="036ea-140">**NLST directory**: *Get directory listing*</span></span>
- <span data-ttu-id="036ea-141">**NOOP**: *ninguna operación, vuelve correctamente*.</span><span class="sxs-lookup"><span data-stu-id="036ea-141">**NOOP**: *No operation, returns success*</span></span>
- <span data-ttu-id="036ea-142">**PASS contraseña**: *proporcionar la contraseña para el inicio de sesión*.</span><span class="sxs-lookup"><span data-stu-id="036ea-142">**PASS password**: *Provide password for login*</span></span>
- <span data-ttu-id="036ea-143">**PASV**: *solicitar modo de transferencia pasiva*.</span><span class="sxs-lookup"><span data-stu-id="036ea-143">**PASV**: *Request passive transfer mode*</span></span>
- <span data-ttu-id="036ea-144">**PWD ruta**: *seleccionar la ruta de acceso del directorio actual*.</span><span class="sxs-lookup"><span data-stu-id="036ea-144">**PWD path**: *Pickup current directory path*</span></span>
- <span data-ttu-id="036ea-145">**QUIT**: *finalizar la conexión de cliente*.</span><span class="sxs-lookup"><span data-stu-id="036ea-145">**QUIT**: *Terminate Client connection*</span></span>
- <span data-ttu-id="036ea-146">**RETR nombre de archivo**: *leer archivo especificado*.</span><span class="sxs-lookup"><span data-stu-id="036ea-146">**RETR filename**: *Read specified file*</span></span>
- <span data-ttu-id="036ea-147">**RMD directorio**: *eliminar el directorio especificado*.</span><span class="sxs-lookup"><span data-stu-id="036ea-147">**RMD directory**: *Delete specified directory*</span></span>
- <span data-ttu-id="036ea-148">**RNFR nombre de archivo antiguo**: *especificar el archivo que se va a cambiar de nombre*.</span><span class="sxs-lookup"><span data-stu-id="036ea-148">**RNFR oldfilename**: *Specify file to rename*</span></span>
- <span data-ttu-id="036ea-149">**RNTO nombre de archivo nuevo**: *cambiar el nombre del archivo por el nombre de archivo proporcionado*.</span><span class="sxs-lookup"><span data-stu-id="036ea-149">**RNTO newfilename**: *Rename file to supplied file name*</span></span>
- <span data-ttu-id="036ea-150">**STOR nombre de archivo**: *escribir archivo especificado*.</span><span class="sxs-lookup"><span data-stu-id="036ea-150">**STOR filename**: *Write specified file*</span></span>
- <span data-ttu-id="036ea-151">**TYPE I**: *seleccionar imagen de archivo binario*.</span><span class="sxs-lookup"><span data-stu-id="036ea-151">**TYPE I**: *Select binary file image*</span></span>
- <span data-ttu-id="036ea-152">**USER nombre de usuario**: *proporcionar el nombre de usuario para el inicio de sesión*.</span><span class="sxs-lookup"><span data-stu-id="036ea-152">**USER username**: *Provide username for login*</span></span>
- <span data-ttu-id="036ea-153">**PORT ip_address,port**: *proporcionar la dirección IP y el puerto de datos de cliente*.</span><span class="sxs-lookup"><span data-stu-id="036ea-153">**PORT ip_address,port**: *Provide IP address and Client data port*</span></span>

<span data-ttu-id="036ea-154">El software cliente FTP de NetX usa internamente estos comandos ASCII para realizar operaciones FTP con el servidor FTP.</span><span class="sxs-lookup"><span data-stu-id="036ea-154">These ASCII commands are used internally by the NetX FTP Client software to perform FTP operations with the FTP Server.</span></span>

## <a name="ftp-server-responses"></a><span data-ttu-id="036ea-155">Respuestas del servidor FTP</span><span class="sxs-lookup"><span data-stu-id="036ea-155">FTP Server Responses</span></span>

<span data-ttu-id="036ea-156">El servidor FTP emplea el *conocido puerto TCP 21* para el campo solicitudes de comando de cliente.</span><span class="sxs-lookup"><span data-stu-id="036ea-156">The FTP Server utilizes the *well-known TCP port 21* to field Client command requests.</span></span> <span data-ttu-id="036ea-157">Una vez que el servidor FTP procesa el comando de cliente, devuelve una respuesta numérica de 3 dígitos en ASCII seguida de una cadena ASCII opcional.</span><span class="sxs-lookup"><span data-stu-id="036ea-157">Once the FTP Server processes the Client command, it returns a 3-digit numeric response in ASCII followed by an optional ASCII string.</span></span> <span data-ttu-id="036ea-158">El software cliente FTP usa la respuesta numérica para determinar si la operación se ha realizado correctamente o no.</span><span class="sxs-lookup"><span data-stu-id="036ea-158">The numeric response is used by the FTP Client software to determine whether the operation succeeded or failed.</span></span> <span data-ttu-id="036ea-159">A continuación, se enumeran varias respuestas del servidor FTP a comandos de cliente:</span><span class="sxs-lookup"><span data-stu-id="036ea-159">The following lists various FTP Server responses to Client commands:</span></span>

### <a name="first-numeric-field-and-meaning"></a><span data-ttu-id="036ea-160">Primer campo numérico y significado</span><span class="sxs-lookup"><span data-stu-id="036ea-160">First Numeric Field and Meaning</span></span>

- <span data-ttu-id="036ea-161">**1xx**: *Estado preliminar positivo: otra respuesta entrante*.</span><span class="sxs-lookup"><span data-stu-id="036ea-161">**1xx**: *Positive preliminary status – another reply coming*.</span></span>
- <span data-ttu-id="036ea-162">**2xx**: *Estado de finalización positivo*.</span><span class="sxs-lookup"><span data-stu-id="036ea-162">**2xx**: *Positive completion status*.</span></span>
- <span data-ttu-id="036ea-163">**3xx**: *Estado preliminar positivo: se debe enviar otro comando*.</span><span class="sxs-lookup"><span data-stu-id="036ea-163">**3xx**: *Positive preliminary status – another command must be sent*.</span></span>
- <span data-ttu-id="036ea-164">**4xx**: *Condición de error temporal*.</span><span class="sxs-lookup"><span data-stu-id="036ea-164">**4xx**: *Temporary error condition*.</span></span>
- <span data-ttu-id="036ea-165">**5xx:** *Condición de error*.</span><span class="sxs-lookup"><span data-stu-id="036ea-165">**5xx**: *Error condition.*</span></span>

### <a name="second-numeric-field-and-meaning"></a><span data-ttu-id="036ea-166">Segundo campo numérico y significado</span><span class="sxs-lookup"><span data-stu-id="036ea-166">Second Numeric Field and Meaning</span></span>

- <span data-ttu-id="036ea-167">**x0x**: Error de sintaxis en el comando.</span><span class="sxs-lookup"><span data-stu-id="036ea-167">**x0x**: Syntax error in command.</span></span>
- <span data-ttu-id="036ea-168">**x1x**: Mensaje informativo.</span><span class="sxs-lookup"><span data-stu-id="036ea-168">**x1x**: Informational message.</span></span>
- <span data-ttu-id="036ea-169">**x2x**: Conexión relacionada.</span><span class="sxs-lookup"><span data-stu-id="036ea-169">**x2x**: Connection related.</span></span>
- <span data-ttu-id="036ea-170">**x3x**: Autenticación relacionada.</span><span class="sxs-lookup"><span data-stu-id="036ea-170">**x3x**: Authentication related.</span></span>
- <span data-ttu-id="036ea-171">**x4x**: Sin especificar.</span><span class="sxs-lookup"><span data-stu-id="036ea-171">**x4x**: Unspecified.</span></span>
- <span data-ttu-id="036ea-172">**x5x**: Sistema de archivos relacionado.</span><span class="sxs-lookup"><span data-stu-id="036ea-172">**x5x**: File system related.</span></span>

<span data-ttu-id="036ea-173">Por ejemplo, una solicitud de cliente para desconectar una conexión FTP con el comando QUIT normalmente responderá con un código "221" del servidor si la desconexión se realiza correctamente.</span><span class="sxs-lookup"><span data-stu-id="036ea-173">For example, a Client request to disconnect an FTP connection with the QUIT command will typically be responded with a "221" code from the Server – if the disconnect is successful.</span></span>

## <a name="ftp-passive-transfer-mode"></a><span data-ttu-id="036ea-174">Modo de transferencia pasiva de FTP</span><span class="sxs-lookup"><span data-stu-id="036ea-174">FTP Passive Transfer Mode</span></span>

<span data-ttu-id="036ea-175">De forma predeterminada, el cliente FTP de NetX usa el modo de transporte activo para intercambiar datos a través del socket de datos con el servidor FTP.</span><span class="sxs-lookup"><span data-stu-id="036ea-175">By default, the NetX FTP Client uses the active transport mode to exchange data over the data socket with the FTP server.</span></span> <span data-ttu-id="036ea-176">El problema de esta disposición es que requiere que el cliente FTP abra un socket de servidor TCP para que el servidor FTP se conecte.</span><span class="sxs-lookup"><span data-stu-id="036ea-176">The problem with this arrangement is that it requires the FTP Client to open a TCP server socket for the FTP Server to connect to.</span></span> <span data-ttu-id="036ea-177">Esto representa un posible riesgo de seguridad y puede ser bloqueado por el firewall del cliente.</span><span class="sxs-lookup"><span data-stu-id="036ea-177">This represents a possible security risk and may be blocked by the Client firewall.</span></span> <span data-ttu-id="036ea-178">El modo de transferencia pasiva difiere del modo de transporte activa al hacer que el servidor FTP cree el socket del servidor TCP en la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="036ea-178">Passive transfer mode differs from active transport mode by having the FTP server create the TCP server socket on the data connection.</span></span> <span data-ttu-id="036ea-179">Esto elimina el riesgo de seguridad para el cliente FTP.</span><span class="sxs-lookup"><span data-stu-id="036ea-179">This eliminates the security risk (for the FTP Client).</span></span>

<span data-ttu-id="036ea-180">Para habilitar la transferencia de datos pasiva, la aplicación llama a *nx_ftp_client_passive_mode_set* en un cliente FTP creado previamente con el segundo argumento establecido en NX_TRUE.</span><span class="sxs-lookup"><span data-stu-id="036ea-180">To enable passive data transfer, the application calls *nx_ftp_client_passive_mode_set* on a previously created FTP Client with the second argument set to NX_TRUE.</span></span> <span data-ttu-id="036ea-181">A partir de ese momento, todos los servicios de cliente FTP de NetX posteriores para la transferencia de datos (NLST, RETR, STOR) se intentan en el modo de transporte pasivo.</span><span class="sxs-lookup"><span data-stu-id="036ea-181">Thereafter, all subsequent NetX FTP Client services for transferring data (NLST, RETR, STOR) are attempted in the passive transport mode.</span></span>

<span data-ttu-id="036ea-182">El cliente FTP envía primero el comando PASV sin argumentos.</span><span class="sxs-lookup"><span data-stu-id="036ea-182">The FTP Client first sends the PASV command (no arguments).</span></span> <span data-ttu-id="036ea-183">Si el servidor FTP admite esta solicitud, devolverá la respuesta 227 "OK".</span><span class="sxs-lookup"><span data-stu-id="036ea-183">If the FTP server supports this request it will return the 227 "OK" response.</span></span> <span data-ttu-id="036ea-184">A continuación, el cliente envía la solicitud; por ejemplo, RETR.</span><span class="sxs-lookup"><span data-stu-id="036ea-184">Then the Client sends the request e.g. RETR.</span></span> <span data-ttu-id="036ea-185">Si el servidor rechaza el modo de transferencia pasiva, el servicio de cliente FTP de NetX devuelve un estado de error.</span><span class="sxs-lookup"><span data-stu-id="036ea-185">If the server refuses passive transfer mode, the NetX FTP Client service returns an error status.</span></span>

<span data-ttu-id="036ea-186">Para deshabilitar el modo de transporte pasivo y volver al modo de transporte activo, la aplicación llama a *nx_ftp_client_passive_mode_set* con el segundo argumento establecido en NX_FALSE.</span><span class="sxs-lookup"><span data-stu-id="036ea-186">To disable passive transport mode and return to active transport mode, the application calls *nx_ftp_client_passive_mode_set* with the second argument set to NX_FALSE.</span></span>

## <a name="ftp-communication"></a><span data-ttu-id="036ea-187">Comunicación FTP</span><span class="sxs-lookup"><span data-stu-id="036ea-187">FTP Communication</span></span>

<span data-ttu-id="036ea-188">El servidor FTP emplea el *conocido puerto TCP 21* para el campo solicitudes de cliente.</span><span class="sxs-lookup"><span data-stu-id="036ea-188">The FTP Server utilizes the *well-known TCP port 21* to field Client requests.</span></span> <span data-ttu-id="036ea-189">Los clientes FTP pueden utilizar cualquier puerto TCP disponible.</span><span class="sxs-lookup"><span data-stu-id="036ea-189">FTP Clients may use any available TCP port.</span></span> <span data-ttu-id="036ea-190">La secuencia general de eventos FTP es la siguiente:</span><span class="sxs-lookup"><span data-stu-id="036ea-190">The general sequence of FTP events is as follows:</span></span>

### <a name="ftp-read-file-requests"></a><span data-ttu-id="036ea-191">Solicitudes FTP de lectura de archivos</span><span class="sxs-lookup"><span data-stu-id="036ea-191">FTP Read File Requests</span></span>

1. <span data-ttu-id="036ea-192">El cliente emite una conexión TCP al puerto 21 del servidor.</span><span class="sxs-lookup"><span data-stu-id="036ea-192">Client issues TCP connect to Server port 21.</span></span>
1. <span data-ttu-id="036ea-193">El servidor envía la respuesta "220" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-193">Server sends "220" response to signal success.</span></span>
1. <span data-ttu-id="036ea-194">El cliente envía el mensaje "USER" con el "nombre de usuario".</span><span class="sxs-lookup"><span data-stu-id="036ea-194">Client sends "USER" message with "username."</span></span>
1. <span data-ttu-id="036ea-195">El servidor envía la respuesta "331" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-195">Server sends "331" response to signal success.</span></span>
1. <span data-ttu-id="036ea-196">El cliente envía el mensaje "PASS" con la "contraseña".</span><span class="sxs-lookup"><span data-stu-id="036ea-196">Client sends "PASS" message with "password."</span></span>
1. <span data-ttu-id="036ea-197">El servidor envía la respuesta "230" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-197">Server sends "230" response to signal success.</span></span>
1. <span data-ttu-id="036ea-198">El cliente envía el mensaje "TYPE I" para la transferencia binaria.</span><span class="sxs-lookup"><span data-stu-id="036ea-198">Client sends "TYPE I" message for binary transfer.</span></span>
1. <span data-ttu-id="036ea-199">El servidor envía la respuesta "200" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-199">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="036ea-200">El cliente envía el mensaje "PORT" con la dirección IP y el puerto.</span><span class="sxs-lookup"><span data-stu-id="036ea-200">Client sends "PORT" message with IP address and port.</span></span>
1. <span data-ttu-id="036ea-201">El servidor envía la respuesta "200" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-201">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="036ea-202">El cliente envía el mensaje "RETR" con el nombre de archivo que se va a leer.</span><span class="sxs-lookup"><span data-stu-id="036ea-202">Client sends "RETR" message with file name to read.</span></span>
1. <span data-ttu-id="036ea-203">El servidor crea el socket de datos y se conecta con el puerto de datos de cliente especificado en el comando "PORT".</span><span class="sxs-lookup"><span data-stu-id="036ea-203">Server creates data socket and connects with client data port specified in the "PORT" command.</span></span>
1. <span data-ttu-id="036ea-204">El servidor envía la respuesta "125" para indicar que se ha comenzado a leer el archivo.</span><span class="sxs-lookup"><span data-stu-id="036ea-204">Server sends "125" response to signal file read has started.</span></span>
1. <span data-ttu-id="036ea-205">El servidor envía el contenido del archivo a través de la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="036ea-205">Server sends contents of file through the data connection.</span></span> <span data-ttu-id="036ea-206">Este proceso continúa hasta que el archivo se haya transferido por completo.</span><span class="sxs-lookup"><span data-stu-id="036ea-206">This process continues until file is completely transferred.</span></span>
1. <span data-ttu-id="036ea-207">Cuando termine, el servidor desconecta la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="036ea-207">When finished, Server disconnects data connection.</span></span>
1. <span data-ttu-id="036ea-208">El servidor envía la respuesta "250" para indicar que se ha leído el archivo con éxito.</span><span class="sxs-lookup"><span data-stu-id="036ea-208">Server sends "250" response to signal file read is successful.</span></span>
1. <span data-ttu-id="036ea-209">Los clientes envían "QUIT" para finalizar la conexión FTP.</span><span class="sxs-lookup"><span data-stu-id="036ea-209">Clients sends "QUIT" to terminate FTP connection.</span></span>
1. <span data-ttu-id="036ea-210">El servidor envía la respuesta "221" para indicar que se ha desconectado con éxito.</span><span class="sxs-lookup"><span data-stu-id="036ea-210">Server sends "221" response to signal disconnect is successful.</span></span>
1. <span data-ttu-id="036ea-211">El servidor desconecta la conexión FTP.</span><span class="sxs-lookup"><span data-stu-id="036ea-211">Server disconnects FTP connection.</span></span>

<span data-ttu-id="036ea-212">Como se mencionó anteriormente, la única diferencia entre el FTP que se ejecuta a través de IPv4 e IPv6 es el comando de puerto que se sustituye por el comando EPRT para IPv6</span><span class="sxs-lookup"><span data-stu-id="036ea-212">As mentioned previously, the only difference between FTP running over IPv4 and IPv6 is the PORT command is replaced with the EPRT command for IPv6</span></span>

<span data-ttu-id="036ea-213">Si el cliente FTP realiza una solicitud de lectura en el modo de transferencia pasiva, la secuencia de comandos es la siguiente (las líneas en **negrita** indican un paso diferente del modo de transferencia activa):</span><span class="sxs-lookup"><span data-stu-id="036ea-213">If the FTP Client makes a read request in the passive transfer mode, the command sequence is as follows (**bolded** lines indicates a different step from active transfer mode):</span></span>

1. <span data-ttu-id="036ea-214">El cliente emite una conexión TCP al puerto 21 del servidor.</span><span class="sxs-lookup"><span data-stu-id="036ea-214">Client issues TCP connect to Server port 21.</span></span>
1. <span data-ttu-id="036ea-215">El servidor envía la respuesta "220" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-215">Server sends "220" response to signal success.</span></span>
1. <span data-ttu-id="036ea-216">El cliente envía el mensaje "USER" con el "nombre de usuario".</span><span class="sxs-lookup"><span data-stu-id="036ea-216">Client sends "USER" message with "username."</span></span>
1. <span data-ttu-id="036ea-217">El servidor envía la respuesta "331" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-217">Server sends "331" response to signal success.</span></span>
1. <span data-ttu-id="036ea-218">El cliente envía el mensaje "PASS" con la "contraseña".</span><span class="sxs-lookup"><span data-stu-id="036ea-218">Client sends "PASS" message with "password."</span></span>
1. <span data-ttu-id="036ea-219">El servidor envía la respuesta "230" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-219">Server sends "230" response to signal success.</span></span>
1. <span data-ttu-id="036ea-220">El cliente envía el mensaje "TYPE I" para la transferencia binaria.</span><span class="sxs-lookup"><span data-stu-id="036ea-220">Client sends "TYPE I" message for binary transfer.</span></span>
1. <span data-ttu-id="036ea-221">El servidor envía la respuesta "200" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-221">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="036ea-222">**El cliente envía el mensaje "PASV".**</span><span class="sxs-lookup"><span data-stu-id="036ea-222">**Client sends "PASV" message.**</span></span>
1. <span data-ttu-id="036ea-223">**El servidor envía la respuesta "227", la dirección IP y el puerto para el cliente al que se va a conectar, para indicar el éxito.**</span><span class="sxs-lookup"><span data-stu-id="036ea-223">**Server sends "227" response, and IP address and port for the Client to connect to, to signal success.**</span></span>
1. <span data-ttu-id="036ea-224">El cliente envía el mensaje "RETR" con el nombre de archivo que se va a leer.</span><span class="sxs-lookup"><span data-stu-id="036ea-224">Client sends "RETR" message with file name to read.</span></span>
1. <span data-ttu-id="036ea-225">**El servidor crea un socket de servidor de datos y realiza escuchas para la solicitud de conexión de cliente en este socket utilizando el puerto especificado en la respuesta "227".**</span><span class="sxs-lookup"><span data-stu-id="036ea-225">**Server creates data server socket and listens for the Client connect request on this socket using the port specified in the "227" response.**</span></span>
1. <span data-ttu-id="036ea-226">**El servidor envía la respuesta "150" en el socket de control para indicar que la lectura en el archivo se ha iniciado.**</span><span class="sxs-lookup"><span data-stu-id="036ea-226">**Server sends "150" response on the control socket to signal file read has started.**</span></span>
1. <span data-ttu-id="036ea-227">El servidor envía el contenido del archivo a través de la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="036ea-227">Server sends contents of file through the data connection.</span></span> <span data-ttu-id="036ea-228">Este proceso continúa hasta que el archivo se haya transferido por completo.</span><span class="sxs-lookup"><span data-stu-id="036ea-228">This process continues until file is completely transferred.</span></span>
1. <span data-ttu-id="036ea-229">Cuando termine, el servidor desconecta la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="036ea-229">When finished, Server disconnects data connection.</span></span>
1. <span data-ttu-id="036ea-230">**El servidor envía la respuesta "226" en el socket de control para indicar que la lectura en el archivo se ha completado**.</span><span class="sxs-lookup"><span data-stu-id="036ea-230">**Server sends "226" response on the control socket to signal file read is successful.**</span></span>
1. <span data-ttu-id="036ea-231">El cliente envía "QUIT" para finalizar la conexión FTP.</span><span class="sxs-lookup"><span data-stu-id="036ea-231">Client sends "QUIT" to terminate FTP connection.</span></span>
1. <span data-ttu-id="036ea-232">El servidor envía la respuesta "221" para indicar que se ha desconectado con éxito.</span><span class="sxs-lookup"><span data-stu-id="036ea-232">Server sends "221" response to signal disconnect is successful.</span></span>
1. <span data-ttu-id="036ea-233">El servidor desconecta la conexión FTP.</span><span class="sxs-lookup"><span data-stu-id="036ea-233">Server disconnects FTP connection.</span></span>

### <a name="ftp-write-requests"></a><span data-ttu-id="036ea-234">Solicitudes de escritura FTP</span><span class="sxs-lookup"><span data-stu-id="036ea-234">FTP Write Requests</span></span>

1. <span data-ttu-id="036ea-235">El cliente emite una conexión TCP al puerto 21 del servidor.</span><span class="sxs-lookup"><span data-stu-id="036ea-235">Client issues TCP connect to Server port 21.</span></span>
1. <span data-ttu-id="036ea-236">El servidor envía la respuesta "220" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-236">Server sends "220" response to signal success.</span></span>
1. <span data-ttu-id="036ea-237">El cliente envía el mensaje "USER" con el "nombre de usuario".</span><span class="sxs-lookup"><span data-stu-id="036ea-237">Client sends "USER" message with "username."</span></span>
1. <span data-ttu-id="036ea-238">El servidor envía la respuesta "331" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-238">Server sends "331" response to signal success.</span></span>
1. <span data-ttu-id="036ea-239">El cliente envía el mensaje "PASS" con la "contraseña".</span><span class="sxs-lookup"><span data-stu-id="036ea-239">Client sends "PASS" message with "password."</span></span>
1. <span data-ttu-id="036ea-240">El servidor envía la respuesta "230" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-240">Server sends "230" response to signal success.</span></span>
1. <span data-ttu-id="036ea-241">El cliente envía el mensaje "TYPE I" para la transferencia binaria.</span><span class="sxs-lookup"><span data-stu-id="036ea-241">Client sends "TYPE I" message for binary transfer.</span></span>
1. <span data-ttu-id="036ea-242">El servidor envía la respuesta "200" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-242">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="036ea-243">El cliente envía el mensaje "PORT" con la dirección IP y el puerto.</span><span class="sxs-lookup"><span data-stu-id="036ea-243">Client sends "PORT" message with IP address and port.</span></span>
1. <span data-ttu-id="036ea-244">El servidor envía la respuesta "200" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-244">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="036ea-245">El cliente envía el mensaje "STOR" con el nombre de archivo que se va a escribir.</span><span class="sxs-lookup"><span data-stu-id="036ea-245">Client sends "STOR" message with file name to write.</span></span>
1. <span data-ttu-id="036ea-246">El servidor crea el socket de datos y se conecta con el puerto de datos de cliente especificado en el comando "PORT".</span><span class="sxs-lookup"><span data-stu-id="036ea-246">Server creates data socket and connects with client data port specified in the "PORT" command.</span></span>
1. <span data-ttu-id="036ea-247">El servidor envía la respuesta "125" para indicar que se ha comenzado a escribir el archivo.</span><span class="sxs-lookup"><span data-stu-id="036ea-247">Server sends "125" response to signal file write has started.</span></span>
1. <span data-ttu-id="036ea-248">El cliente envía el contenido del archivo a través de la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="036ea-248">Client sends contents of file through the data connection.</span></span> <span data-ttu-id="036ea-249">Este proceso continúa hasta que el archivo se haya transferido por completo.</span><span class="sxs-lookup"><span data-stu-id="036ea-249">This process continues until file is completely transferred.</span></span>
1. <span data-ttu-id="036ea-250">Cuando termine, el cliente desconecta la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="036ea-250">When finished, Client disconnects data connection.</span></span>
1. <span data-ttu-id="036ea-251">El servidor envía la respuesta "250" para indicar que se ha escrito el archivo con éxito.</span><span class="sxs-lookup"><span data-stu-id="036ea-251">Server sends "250" response to signal file write is successful.</span></span>
1. <span data-ttu-id="036ea-252">Los clientes envían "QUIT" para finalizar la conexión FTP.</span><span class="sxs-lookup"><span data-stu-id="036ea-252">Clients sends "QUIT" to terminate FTP connection.</span></span>
1. <span data-ttu-id="036ea-253">El servidor envía la respuesta "221" para indicar que se ha desconectado con éxito.</span><span class="sxs-lookup"><span data-stu-id="036ea-253">Server sends "221" response to signal disconnect is successful.</span></span>
1. <span data-ttu-id="036ea-254">El servidor desconecta la conexión FTP.</span><span class="sxs-lookup"><span data-stu-id="036ea-254">Server disconnects FTP connection.</span></span>

<span data-ttu-id="036ea-255">Si el cliente FTP realiza una solicitud de escritura en el modo de transferencia pasiva, la secuencia de comandos es la siguiente (las líneas en **negrita** indican un paso diferente del modo de transferencia activa):</span><span class="sxs-lookup"><span data-stu-id="036ea-255">If the FTP Client makes a write request in the passive transfer mode, the command sequence is as follows (**bolded** lines indicates a different step from active transfer mode):</span></span>

1. <span data-ttu-id="036ea-256">El cliente emite una conexión TCP al puerto 21 del servidor.</span><span class="sxs-lookup"><span data-stu-id="036ea-256">Client issues TCP connect to Server port 21.</span></span>
1. <span data-ttu-id="036ea-257">El servidor envía la respuesta "220" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-257">Server sends "220" response to signal success.</span></span>
1. <span data-ttu-id="036ea-258">El cliente envía el mensaje "USER" con el "nombre de usuario".</span><span class="sxs-lookup"><span data-stu-id="036ea-258">Client sends "USER" message with "username."</span></span>
1. <span data-ttu-id="036ea-259">El servidor envía la respuesta "331" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-259">Server sends "331" response to signal success.</span></span>
1. <span data-ttu-id="036ea-260">El cliente envía el mensaje "PASS" con la "contraseña".</span><span class="sxs-lookup"><span data-stu-id="036ea-260">Client sends "PASS" message with "password."</span></span>
1. <span data-ttu-id="036ea-261">El servidor envía la respuesta "230" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-261">Server sends "230" response to signal success.</span></span>
1. <span data-ttu-id="036ea-262">El cliente envía el mensaje "TYPE I" para la transferencia binaria.</span><span class="sxs-lookup"><span data-stu-id="036ea-262">Client sends "TYPE I" message for binary transfer.</span></span>
1. <span data-ttu-id="036ea-263">El servidor envía la respuesta "200" a la señal correcta.</span><span class="sxs-lookup"><span data-stu-id="036ea-263">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="036ea-264">**El cliente envía el mensaje "PASV".**</span><span class="sxs-lookup"><span data-stu-id="036ea-264">**Client sends "PASV" message.**</span></span>
1. <span data-ttu-id="036ea-265">**El servidor envía la respuesta "227", la dirección IP y el puerto para el cliente al que se va a conectar, para indicar el éxito.**</span><span class="sxs-lookup"><span data-stu-id="036ea-265">**Server sends "227" response, and IP address and port for the Client to connect to, to signal success.**</span></span>
1. <span data-ttu-id="036ea-266">El cliente envía el mensaje "STOR" con el nombre de archivo que se va a escribir.</span><span class="sxs-lookup"><span data-stu-id="036ea-266">Client sends "STOR" message with file name to write.</span></span>
1. <span data-ttu-id="036ea-267">**El servidor crea un socket de servidor de datos y realiza escuchas para la solicitud de conexión de cliente en este socket utilizando el puerto especificado en la respuesta "227".**</span><span class="sxs-lookup"><span data-stu-id="036ea-267">**Server creates data server socket and listens for the Client connect request on this socket using the port specified in the "227" response.**</span></span>
1. <span data-ttu-id="036ea-268">**El servidor envía la respuesta "150" en el socket de control para indicar que la escritura en el archivo se ha iniciado.**</span><span class="sxs-lookup"><span data-stu-id="036ea-268">**Server sends "150" response on the control socket to signal file write has started.**</span></span>
1. <span data-ttu-id="036ea-269">El cliente envía el contenido del archivo a través de la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="036ea-269">Client sends contents of file through the data connection.</span></span> <span data-ttu-id="036ea-270">Este proceso continúa hasta que el archivo se haya transferido por completo.</span><span class="sxs-lookup"><span data-stu-id="036ea-270">This process continues until file is completely transferred.</span></span>
1. <span data-ttu-id="036ea-271">Cuando termine, el cliente desconecta la conexión de datos.</span><span class="sxs-lookup"><span data-stu-id="036ea-271">When finished, Client disconnects data connection.</span></span>
1. <span data-ttu-id="036ea-272">**El servidor envía la respuesta "226" en el socket de control para indicar que la escritura en el archivo se ha completado**.</span><span class="sxs-lookup"><span data-stu-id="036ea-272">**Server sends "226" response on the control socket to signal file write is successful.**</span></span>
1. <span data-ttu-id="036ea-273">El cliente envía "QUIT" para finalizar la conexión FTP.</span><span class="sxs-lookup"><span data-stu-id="036ea-273">Client sends "QUIT" to terminate FTP connection.</span></span>
1. <span data-ttu-id="036ea-274">El servidor envía la respuesta "221" para indicar que se ha desconectado con éxito.</span><span class="sxs-lookup"><span data-stu-id="036ea-274">Server sends "221" response to signal disconnect is successful.</span></span>
1. <span data-ttu-id="036ea-275">El servidor desconecta la conexión FTP.</span><span class="sxs-lookup"><span data-stu-id="036ea-275">Server disconnects FTP connection.</span></span>

## <a name="ftp-authentication"></a><span data-ttu-id="036ea-276">FTP Authentication</span><span class="sxs-lookup"><span data-stu-id="036ea-276">FTP Authentication</span></span>

<span data-ttu-id="036ea-277">Cada vez que se realiza una conexión FTP, el cliente debe proporcionar al servidor un *nombre de usuario* y una *contraseña*.</span><span class="sxs-lookup"><span data-stu-id="036ea-277">Whenever an FTP connection takes place, the Client must provide the Server with a *username* and *password*.</span></span> <span data-ttu-id="036ea-278">Algunos sitios FTP permiten lo que se denomina *FTP anónimo*, que permite el acceso FTP sin un nombre de usuario y una contraseña específicos.</span><span class="sxs-lookup"><span data-stu-id="036ea-278">Some FTP sites allow what is called *Anonymous FTP*, which allows FTP access without a specific username and password.</span></span> <span data-ttu-id="036ea-279">Para este tipo de conexión, se debe proporcionar "Anonymous" para el nombre de usuario y la contraseña debe ser una dirección de correo electrónico completa.</span><span class="sxs-lookup"><span data-stu-id="036ea-279">For this type of connection, "anonymous" should be supplied for username and the password should be a complete e-mail address.</span></span>

<span data-ttu-id="036ea-280">El usuario es responsable de proporcionar las rutinas de autenticación de FTP de NetX con inicio de sesión y cierre de sesión.</span><span class="sxs-lookup"><span data-stu-id="036ea-280">The user is responsible for supplying NetX FTP with login and logout authentication routines.</span></span> <span data-ttu-id="036ea-281">Se proporcionan durante la función **nx_ftp_server_create** y se les llama desde el procesamiento de contraseñas.</span><span class="sxs-lookup"><span data-stu-id="036ea-281">These are supplied during the \***nx_ftp_server_create** _ function and called from the password processing.</span></span> <span data-ttu-id="036ea-282">Si la función _login \* devuelve NX_SUCCESS, la conexión se autentica y se permiten las operaciones FTP.</span><span class="sxs-lookup"><span data-stu-id="036ea-282">If the _login\* function returns NX_SUCCESS, the connection is authenticated and FTP operations are allowed.</span></span> <span data-ttu-id="036ea-283">De lo contrario, si la función de *Inicio de sesión* devuelve un valor distinto de NX_SUCCESS, se rechazará el intento de conexión.</span><span class="sxs-lookup"><span data-stu-id="036ea-283">Otherwise, if the *login* function returns something other than NX_SUCCESS, the connection attempt is rejected.</span></span>

## <a name="ftp-multi-thread-support"></a><span data-ttu-id="036ea-284">Compatibilidad con varios subprocesos FTP</span><span class="sxs-lookup"><span data-stu-id="036ea-284">FTP Multi-Thread Support</span></span>

<span data-ttu-id="036ea-285">Se puede llamar a los servicios de cliente FTP de NetX desde varios subprocesos simultáneamente.</span><span class="sxs-lookup"><span data-stu-id="036ea-285">The NetX FTP Client services can be called from multiple threads simultaneously.</span></span> <span data-ttu-id="036ea-286">Sin embargo, las solicitudes de lectura o escritura de una determinada instancia de cliente FTP deben realizarse en secuencia desde el mismo subproceso.</span><span class="sxs-lookup"><span data-stu-id="036ea-286">However, read or write requests for a particular FTP Client instance should be done in sequence from the same thread.</span></span>

## <a name="ftp-rfcs"></a><span data-ttu-id="036ea-287">RFC de FTP</span><span class="sxs-lookup"><span data-stu-id="036ea-287">FTP RFCs</span></span>

<span data-ttu-id="036ea-288">FTP de NetX es compatible con RFC959 y RFC relacionados.</span><span class="sxs-lookup"><span data-stu-id="036ea-288">NetX FTP is compliant with RFC959 and related RFCs.</span></span>
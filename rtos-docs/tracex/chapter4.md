---
title: 'Capítulo 4: Análisis de rendimiento de Azure RTOS TraceX'
description: En este capítulo se describe la herramienta de análisis de rendimiento de Azure RTOS TraceX.
author: philmea
ms.service: rtos
ms.topic: article
ms.date: 5/19/2020
ms.author: philmea
ms.openlocfilehash: 6cf1b5bd5349efd97c3afc8a9e7f57f477f06f8f
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/22/2021
ms.locfileid: "104815745"
---
# <a name="chapter-4---azure-rtos-tracex-performance-analysis"></a><span data-ttu-id="694fb-103">Capítulo 4: Análisis de rendimiento de Azure RTOS TraceX</span><span class="sxs-lookup"><span data-stu-id="694fb-103">Chapter 4 - Azure RTOS TraceX performance analysis</span></span>

<span data-ttu-id="694fb-104">En este capítulo se describe la herramienta de análisis de rendimiento de Azure RTOS TraceX:</span><span class="sxs-lookup"><span data-stu-id="694fb-104">This chapter describes the Azure RTOS TraceX performance analysis tool:</span></span>

## <a name="performance-analysis"></a><span data-ttu-id="694fb-105">Análisis de rendimiento</span><span class="sxs-lookup"><span data-stu-id="694fb-105">Performance Analysis</span></span>

<span data-ttu-id="694fb-106">TraceX proporciona un análisis de rendimiento integrado de los archivos de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="694fb-106">TraceX provides built-in performance analysis of trace files.</span></span> <span data-ttu-id="694fb-107">Se puede acceder fácilmente a la información, como el *perfil de ejecución*, los *servicios populares*, el *uso de la pila de subprocesos* y diversas *estadísticas de rendimiento*, incluidas las estadísticas de FileX y NetX *,* .</span><span class="sxs-lookup"><span data-stu-id="694fb-107">Information such as the *execution profile*, *popular services*, *thread stack usage*, and various *performance statistics,* including FileX and NetX statistics *,* are readily available.</span></span> <span data-ttu-id="694fb-108">Esta información está disponible en el elemento de menú ***Ver***.</span><span class="sxs-lookup"><span data-stu-id="694fb-108">This information is available via the ***View*** menu item.</span></span> 


## <a name="execution-profile"></a><span data-ttu-id="694fb-109">Perfil de ejecución</span><span class="sxs-lookup"><span data-stu-id="694fb-109">Execution Profile</span></span>

<span data-ttu-id="694fb-110">Al seleccionar el botón ***Generate Execution Profile** _ (Generar perfil de ejecución) o _*_View -Execution Profile_\*_ (Ver - Perfil de ejecución), se presenta el perfil de ejecución de TraceX para el archivo de seguimiento cargado actualmente.</span><span class="sxs-lookup"><span data-stu-id="694fb-110">Selecting the ***Generate Execution Profile** _ button or _*_View -Execution Profile_\*_ presents the TraceX execution profile for the currently loaded trace file.</span></span> <span data-ttu-id="694fb-111">El perfil de ejecución asociado al seguimiento de la demostración de ThreadX de ejemplo se muestra en la _\* figura 19\*\*.</span><span class="sxs-lookup"><span data-stu-id="694fb-111">The execution profile associated with the sample ThreadX demonstration trace is shown in _\*Figure 19\*\*.</span></span>

![Captura de pantalla del perfil de ejecución asociado al seguimiento de la demostración de ThreadX de ejemplo.](./media/user-guide/execution_profile.png)

<span data-ttu-id="694fb-113">**FIGURA 19**</span><span class="sxs-lookup"><span data-stu-id="694fb-113">**FIGURE 19**</span></span>

<span data-ttu-id="694fb-114">El ejemplo que se muestra en la **figura 19** indica que casi el 45 % del tiempo de procesamiento transcurre dentro de **_thread 2_ *_ (subproceso 2) y casi el 51 % del tiempo de procesamiento transcurre dentro de _* _thread 1_** (subproceso 1). Esto es lógico, ya que la mayor parte del seguimiento muestra que estos subprocesos envían y reciben mensajes.</span><span class="sxs-lookup"><span data-stu-id="694fb-114">The example shown in **Figure 19** indicates that nearly 45% of the processing time is inside of **_thread 2_*_ and nearly 51% of the processing time is inside of _*_thread 1_** This is logical since the bulk of the trace shows these threads sending and receiving messages.</span></span> <span data-ttu-id="694fb-115">En los demás contextos de ejecución transcurre solo una pequeña parte del tiempo de ejecución en este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="694fb-115">The remaining execution contexts have only a small amount of execution time in this example.</span></span>

## <a name="popular-services"></a><span data-ttu-id="694fb-116">Servicios populares</span><span class="sxs-lookup"><span data-stu-id="694fb-116">Popular Services</span></span>

<span data-ttu-id="694fb-117">Al seleccionar \***View ->Popular Services** _ (Ver->Servicios populares) se presentan los servicios populares del archivo de seguimiento cargado actualmente.</span><span class="sxs-lookup"><span data-stu-id="694fb-117">Selecting \***View ->Popular Services** _ presents the popular services in the currently loaded trace file.</span></span> <span data-ttu-id="694fb-118">De forma predeterminada, esta información se muestra para todo el sistema.</span><span class="sxs-lookup"><span data-stu-id="694fb-118">By default, this information is displayed for the entire system.</span></span> <span data-ttu-id="694fb-119">Sin embargo, también están disponibles los servicios populares para subprocesos específicos.</span><span class="sxs-lookup"><span data-stu-id="694fb-119">However, the popular services for specific threads are also available.</span></span> <span data-ttu-id="694fb-120">Los servicios populares del seguimiento de demostración de ThreadX de ejemplo se muestran en la _\*figura 20\*\*.</span><span class="sxs-lookup"><span data-stu-id="694fb-120">The popular services in the sample ThreadX demonstration trace are shown in _\*Figure 20\*\*.</span></span>

![Captura de pantalla de los servicios populares en el seguimiento de demostración de ThreadX de ejemplo.](./media/user-guide/popular_services.png)

<span data-ttu-id="694fb-122">**FIGURA 20**</span><span class="sxs-lookup"><span data-stu-id="694fb-122">**FIGURE 20**</span></span>

<span data-ttu-id="694fb-123">El ejemplo que se muestra en la **figura 20** indica que **_tx_queue_send_ *_ y _* _tx_queue_receive_** son los dos servicios más populares de este seguimiento.</span><span class="sxs-lookup"><span data-stu-id="694fb-123">The example shown in **Figure 20** indicates that **_tx_queue_send_*_ and _*_tx_queue_receive_** are the two most popular services in this trace.</span></span> <span data-ttu-id="694fb-124">Esto es coherente con el comportamiento de la demostración de ThreadX estándar en la que se capturó este seguimiento.</span><span class="sxs-lookup"><span data-stu-id="694fb-124">This is consistent with the behavior of the standard ThreadX demonstration from which this trace was captured.</span></span>

<span data-ttu-id="694fb-125">Los subprocesos específicos se pueden seleccionar para este análisis mediante la lista desplegable de selección de la parte superior de esta ventana.</span><span class="sxs-lookup"><span data-stu-id="694fb-125">Specific threads can be selected for this analysis by using the drop down selection list at the top of this window.</span></span> <span data-ttu-id="694fb-126">En la **figura 21** se muestra este análisis para **_thread 3_** (subproceso 3).</span><span class="sxs-lookup"><span data-stu-id="694fb-126">**Figure 21** shows this analysis for **_thread 3_**.</span></span>

![Captura de pantalla del análisis de los servicios populares de TraceX](./media/user-guide/popular_services_thread3.png)

<span data-ttu-id="694fb-128">**FIGURA 21**</span><span class="sxs-lookup"><span data-stu-id="694fb-128">**FIGURE 21**</span></span>

## <a name="thread-stack-usage-analysis-for-thread-3"></a><span data-ttu-id="694fb-129">Uso de la pila de subprocesos</span><span class="sxs-lookup"><span data-stu-id="694fb-129">Thread Stack Usage</span></span> ![Análisis del subproceso 3.](./media/user-guide/screen_shot_17.png)

<span data-ttu-id="694fb-131">Al seleccionar el botón ***Generate Thread Stack Usage** _ (Generar uso de la pila de subprocesos) o _*_View -> Thread Stack Usage_\*_ (Ver -> Uso de la pila de subprocesos), se muestra el uso de la pila para cada subproceso del archivo de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="694fb-131">Selecting the ***Generate Thread Stack Usage** _ button or _*_View -> Thread Stack Usage_\*_ presents the stack usage for each thread in the trace file.</span></span> <span data-ttu-id="694fb-132">Esto se logra mediante ThreadX, incluido el puntero de la pila de subprocesos actual en muchas de las entradas de seguimiento del archivo.</span><span class="sxs-lookup"><span data-stu-id="694fb-132">This is accomplished by ThreadX including the current thread stack pointer in many of the trace entries in the file.</span></span> <span data-ttu-id="694fb-133">Un uso de la pila del 100 % indica que la pila se ha desbordado y que debe corregirse en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="694fb-133">A stack usage of 100% indicates the stack has overflowed and must be corrected in the application.</span></span> <span data-ttu-id="694fb-134">Si no hay ninguna ejecución de subprocesos dentro de este archivo de seguimiento, el uso de la pila de ese subproceso se muestra como 0 %.</span><span class="sxs-lookup"><span data-stu-id="694fb-134">If there is no thread execution within this trace file, the stack usage for that thread is shown at 0%.</span></span> <span data-ttu-id="694fb-135">El uso de la pila de subprocesos del seguimiento de demostración de ThreadX de ejemplo se muestra en la _\*figura 22\*\*.</span><span class="sxs-lookup"><span data-stu-id="694fb-135">The thread stack usage in the sample ThreadX demonstration trace is shown in _\*Figure 22\*\*.</span></span>

![Captura de pantalla del uso de la pila de subprocesos de TraceX](./media/user-guide/thread_stack_usage.png)

<span data-ttu-id="694fb-137">**FIGURA 22**</span><span class="sxs-lookup"><span data-stu-id="694fb-137">**FIGURE 22**</span></span>

<span data-ttu-id="694fb-138">El ejemplo que se muestra en la **figura 22** indica que la mayoría de los subprocesos de este seguimiento consumen un uso de la pila de entre el 9 % y el 12 %.</span><span class="sxs-lookup"><span data-stu-id="694fb-138">The example shown in **Figure 22** indicates that most threads in this trace have between 9% and 12% stack usage.</span></span>

## <a name="performance-statistics"></a><span data-ttu-id="694fb-139">Estadísticas de rendimiento</span><span class="sxs-lookup"><span data-stu-id="694fb-139">Performance Statistics</span></span>

<span data-ttu-id="694fb-140">Al seleccionar el botón **Generate Performance Statistics** _ (Generar estadísticas de rendimiento) o _ *_View -> Performance Statistics_*\* (Ver -> Estadísticas de rendimiento), se muestran las estadísticas de rendimiento del archivo de seguimiento cargado actualmente.</span><span class="sxs-lookup"><span data-stu-id="694fb-140">Selecting the ***Generate Performance Statistics** _ button or _ *_View -> Performance Statistics_** presents the performance statistics of the currently loaded trace file.</span></span> <span data-ttu-id="694fb-141">De forma predeterminada, esta información se muestra para todo el sistema.</span><span class="sxs-lookup"><span data-stu-id="694fb-141">By default, this information is displayed for the entire system.</span></span> <span data-ttu-id="694fb-142">Sin embargo, las estadísticas de rendimiento también están disponibles para cada subproceso específico.</span><span class="sxs-lookup"><span data-stu-id="694fb-142">However, the performance statistics are also available for each specific thread.</span></span>

<span data-ttu-id="694fb-143">Las estadísticas de rendimiento del seguimiento de demostración de ThreadX de ejemplo se muestran en la **figura 23**.</span><span class="sxs-lookup"><span data-stu-id="694fb-143">The performance statistics of the sample ThreadX demonstration trace are shown in **Figure 23**.</span></span>

![Captura de pantalla de las estadísticas de rendimiento de TraceX](./media/user-guide/performance_statistics.png)

<span data-ttu-id="694fb-145">**FIGURA 23**</span><span class="sxs-lookup"><span data-stu-id="694fb-145">**FIGURE 23**</span></span>

<span data-ttu-id="694fb-146">El ejemplo que se muestra en la **figura 23** indica que había 18 cambios de contexto en este archivo de seguimiento, así como 5 adelantamientos de subproceso, 16 suspensiones de subprocesos, 19 reanudaciones de subprocesos y 3 interrupciones.</span><span class="sxs-lookup"><span data-stu-id="694fb-146">The example shown in **Figure 23** indicates that there were 18 context switches in this trace file, as well as five thread preemptions, 16 thread suspensions, 19 thread resumptions, and three interrupts.</span></span> <span data-ttu-id="694fb-147">No se encontraron inversiones de prioridades en este archivo de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="694fb-147">There were no priority inversions found in this trace file.</span></span> <span data-ttu-id="694fb-148">Observe que hay dos categorías de inversiones de prioridades, es decir, *deterministas* y *no deterministas*.</span><span class="sxs-lookup"><span data-stu-id="694fb-148">Notice there are two categories of priority inversions, namely, *deterministic* and *nondeterministic*.</span></span> <span data-ttu-id="694fb-149">Las inversiones de prioridades deterministas son aquellas en las que un subproceso se bloquea en una exclusión mutua que es propiedad de un subproceso de prioridad más baja.</span><span class="sxs-lookup"><span data-stu-id="694fb-149">Deterministic priority inversions are priority inversion in which a thread is blocked on a mutex owned by a lower priority thread.</span></span> <span data-ttu-id="694fb-150">Una inversión de prioridad no determinista es donde se ejecuta un subproceso de prioridad más baja diferente durante una inversión de prioridad determinista.</span><span class="sxs-lookup"><span data-stu-id="694fb-150">An nondeterministic priority inversion is where a different lower priority thread runs during a deterministic priority inversion.</span></span> <span data-ttu-id="694fb-151">Esta última puede provocar un comportamiento de temporización imprevisto en la aplicación y debe estudiarse detenidamente.</span><span class="sxs-lookup"><span data-stu-id="694fb-151">The later can cause unforeseen timing behavior in the application and should be studied carefully.</span></span>

## <a name="filex-statistics"></a><span data-ttu-id="694fb-152">Estadísticas de FileX</span><span class="sxs-lookup"><span data-stu-id="694fb-152">FileX Statistics</span></span>

<span data-ttu-id="694fb-153">Al seleccionar \***View -> FileX Statistics** _ (Ver -> Estadísticas de FileX), se muestran las estadísticas de rendimiento de FileX del archivo de seguimiento cargado actualmente.</span><span class="sxs-lookup"><span data-stu-id="694fb-153">Selecting \***View -> FileX Statistics** _ presents the FileX performance statistics of the currently loaded trace file.</span></span> <span data-ttu-id="694fb-154">Esta información se muestra para todo el sistema, en todos los objetos ../media abiertos.</span><span class="sxs-lookup"><span data-stu-id="694fb-154">This information is displayed for the entire system, on all opened ../media objects.</span></span> <span data-ttu-id="694fb-155">Las estadísticas de rendimiento del seguimiento de demostración de FileX de ejemplo se muestran en la _\*figura 24\*\*.</span><span class="sxs-lookup"><span data-stu-id="694fb-155">The performance statistics of the sample FileX demonstration trace are shown in _\*Figure 24\*\*.</span></span>

![Captura de pantalla de las estadísticas de FileX](./media/user-guide/filex_statistics.png)

<span data-ttu-id="694fb-157">**FIGURA 24**</span><span class="sxs-lookup"><span data-stu-id="694fb-157">**FIGURE 24**</span></span>

<span data-ttu-id="694fb-158">El ejemplo que se muestra en la **figura 27** indica que había 19 elementos ../media abiertos, 19 elementos ../media cerrados, 19 elementos ../media vacíos, 18 lecturas de directorio, 19 escrituras de directorio y 18 errores en la caché del directorio.</span><span class="sxs-lookup"><span data-stu-id="694fb-158">The example shown in **Figure 27** indicates there were 19 ../media opens, 19 ../media closes, 19 ../media flushes, 18 directory reads, 19 directory writes, and 18 directory cache misses.</span></span> <span data-ttu-id="694fb-159">Para consultar información adicional, desplácese hacia abajo en la ventana de estadísticas.</span><span class="sxs-lookup"><span data-stu-id="694fb-159">Additonal information can be viewed by scrolling down in the statistics window.</span></span>

## <a name="netx-statistics"></a><span data-ttu-id="694fb-160">Estadísticas de NetX</span><span class="sxs-lookup"><span data-stu-id="694fb-160">NetX Statistics</span></span>

<span data-ttu-id="694fb-161">Al seleccionar \***View -> NetX Statistics** _ (Ver -> Estadísticas de NetX), se muestran las estadísticas de rendimiento de NetX del archivo de seguimiento cargado actualmente.</span><span class="sxs-lookup"><span data-stu-id="694fb-161">Selecting \***View -NetX Statistics** _ presents the NetX performance statistics of the currently loaded trace file.</span></span> <span data-ttu-id="694fb-162">Esta información se muestra para todo el sistema.</span><span class="sxs-lookup"><span data-stu-id="694fb-162">This information is displayed for the entire system.</span></span> <span data-ttu-id="694fb-163">Las estadísticas de rendimiento del seguimiento de demostración de NetX de ejemplo se muestran en la _\*figura 25\*\*.</span><span class="sxs-lookup"><span data-stu-id="694fb-163">The performance statistics of the sample NetX demonstration trace are shown in _\*Figure 25\*\*.</span></span>

![Captura de pantalla de las estadísticas de NetX](./media/user-guide/netx_statistics.png)

<span data-ttu-id="694fb-165">**FIGURA 25**</span><span class="sxs-lookup"><span data-stu-id="694fb-165">**FIGURE 25**</span></span>

<span data-ttu-id="694fb-166">El ejemplo que se muestra en la **figura 25** indica que no había eventos ARP, ping o UDP, pero que había 30 paquetes de IP enviados, 1368 bytes de IP enviados, 30 paquetes de IP recibidos y 1360 bytes de IP recibidos.</span><span class="sxs-lookup"><span data-stu-id="694fb-166">The example shown in **Figure 25** indicates there were no ARP, Ping, or UDP events, but there were 30 IP packets sent, 1,368 IP bytes sent, 30 IP packets received, and 1,360 IP bytes received.</span></span>

## <a name="trace-file-information"></a><span data-ttu-id="694fb-167">Información del archivo de seguimiento</span><span class="sxs-lookup"><span data-stu-id="694fb-167">Trace File Information</span></span>

<span data-ttu-id="694fb-168">Al seleccionar \***View -> Trace File Information** _ (Ver -> Información del archivo de seguimiento), se muestra información básica sobre el archivo de seguimiento abierto.</span><span class="sxs-lookup"><span data-stu-id="694fb-168">Selecting \***View -> Trace File Information** _ presents some basic information about the opened trace file.</span></span> <span data-ttu-id="694fb-169">Esta información incluye el orden de bytes del archivo, el tamaño del origen de la hora, el número máximo de bytes para cada nombre de objeto y la dirección base de todos los punteros del archivo de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="694fb-169">This information includes the byte order of the file, size of the time source, maximum number of bytes for each object name, and the base address of all trace file pointers.</span></span> <span data-ttu-id="694fb-170">En la _ *figura 26*\* se muestra la información del archivo de seguimiento estándar **_demo_threadx.trx_**.</span><span class="sxs-lookup"><span data-stu-id="694fb-170">_ *Figure 26*\* shows the trace file information for the standard **_demo_threadx.trx_** trace file.</span></span>

![Captura de pantalla de la información del archivo de TraceX](./media/user-guide/trace_file_info.png)

<span data-ttu-id="694fb-172">**FIGURA 26**</span><span class="sxs-lookup"><span data-stu-id="694fb-172">**FIGURE 26**</span></span>

## <a name="raw-trace-dump"></a><span data-ttu-id="694fb-173">Volcado de seguimiento sin procesar</span><span class="sxs-lookup"><span data-stu-id="694fb-173">Raw Trace Dump</span></span>

<span data-ttu-id="694fb-174">Al seleccionar \***View -> Raw Trace Dump** _ (Ver -> Volcado de seguimiento sin procesar), se presenta un cuadro de diálogo para asignar un nombre al archivo que contiene el volcado de seguimiento sin procesar.</span><span class="sxs-lookup"><span data-stu-id="694fb-174">Selecting \***View -> Raw Trace Dump** _ presents a dialog to name the file containing the raw trace dump.</span></span> <span data-ttu-id="694fb-175">Después de escribir el nombre de archivo y la ruta de acceso, TraceX crea el archivo de seguimiento sin procesar en formato de texto e inicia _*_notepad.exe_*_ para mostrarlo.</span><span class="sxs-lookup"><span data-stu-id="694fb-175">After the file name and path are entered, TraceX builds the raw trace file in text format and launches _*_notepad.exe_*_ to display it.</span></span> <span data-ttu-id="694fb-176">En la _ *figura 27*\* se muestra el volcado del archivo de seguimiento sin procesar del archivo de seguimiento estándar **_demo_threadx.trx_**.</span><span class="sxs-lookup"><span data-stu-id="694fb-176">_ *Figure 27*\* shows the raw trace file dump for the standard **_demo_threadx.trx_** trace file.</span></span>

![Captura de pantalla del volcado de seguimiento sin procesar](./media/user-guide/raw_trace_dump.png)

<span data-ttu-id="694fb-178">**FIGURA 27**</span><span class="sxs-lookup"><span data-stu-id="694fb-178">**FIGURE 27**</span></span>
